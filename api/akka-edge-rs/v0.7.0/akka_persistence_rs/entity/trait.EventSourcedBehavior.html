<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An entity’s behavior is the basic unit of modelling aspects of an Akka-Persistence-based application and encapsulates how commands can be applied to state, including the emission of events. Events can also be applied to state in order to produce more state."><title>EventSourcedBehavior in akka_persistence_rs::entity - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="akka_persistence_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../akka_persistence_rs/index.html">akka_persistence_rs</a><span class="version">0.7.0</span></h2></div><h2 class="location"><a href="#">EventSourcedBehavior</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Command">Command</a></li><li><a href="#associatedtype.Event">Event</a></li><li><a href="#associatedtype.State">State</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.for_command">for_command</a></li><li><a href="#tymethod.on_event">on_event</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.on_initial_recovery_completed">on_initial_recovery_completed</a></li><li><a href="#method.on_recovery_completed">on_recovery_completed</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In akka_persistence_rs::entity</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">akka_persistence_rs</a>::<wbr><a href="index.html">entity</a>::<wbr><a class="trait" href="#">EventSourcedBehavior</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/akka_persistence_rs/entity.rs.html#25-60">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait EventSourcedBehavior {
    type <a href="#associatedtype.State" class="associatedtype">State</a>: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>;
    type <a href="#associatedtype.Command" class="associatedtype">Command</a>;
    type <a href="#associatedtype.Event" class="associatedtype">Event</a>;

    // Required methods
    fn <a href="#tymethod.for_command" class="fn">for_command</a>(
        context: &amp;<a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;,
        state: &amp;Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>,
        command: Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.Command" title="type akka_persistence_rs::entity::EventSourcedBehavior::Command">Command</a>
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../effect/trait.Effect.html" title="trait akka_persistence_rs::effect::Effect">Effect</a>&lt;Self&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_event" class="fn">on_event</a>(
        context: &amp;<a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;,
        state: &amp;mut Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>,
        event: Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.Event" title="type akka_persistence_rs::entity::EventSourcedBehavior::Event">Event</a>
    );

    // Provided methods
    fn <a href="#method.on_recovery_completed" class="fn">on_recovery_completed</a>&lt;'life0, 'life1, 'life2, 'async_trait&gt;(
        &amp;'life0 self,
        _context: &amp;'life1 <a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;,
        _state: &amp;'life2 Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait,
             'life2: 'async_trait</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_initial_recovery_completed" class="fn">on_initial_recovery_completed</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 self
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'async_trait,
             'life0: 'async_trait</span> { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An entity’s behavior is the basic unit of modelling aspects of an Akka-Persistence-based application and
encapsulates how commands can be applied to state, including the emission of events. Events can
also be applied to state in order to produce more state.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.State" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#27">source</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a>: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a></h4></section></summary><div class="docblock"><p>The state managed by the entity.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Command" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#29">source</a><h4 class="code-header">type <a href="#associatedtype.Command" class="associatedtype">Command</a></h4></section></summary><div class="docblock"><p>The command(s) that are able to be processed by the entity.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Event" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#31">source</a><h4 class="code-header">type <a href="#associatedtype.Event" class="associatedtype">Event</a></h4></section></summary><div class="docblock"><p>The event produced having performed an effect.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.for_command" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#40-44">source</a><h4 class="code-header">fn <a href="#tymethod.for_command" class="fn">for_command</a>(
    context: &amp;<a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;,
    state: &amp;Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>,
    command: Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.Command" title="type akka_persistence_rs::entity::EventSourcedBehavior::Command">Command</a>
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../effect/trait.Effect.html" title="trait akka_persistence_rs::effect::Effect">Effect</a>&lt;Self&gt;&gt;</h4></section></summary><div class="docblock"><p>Given a state and command, optionally produce an effect that may cause an
event transition. Events are responsible for mutating state.
State can also be associated with the behavior so that other effects can be
performed. For example, a behavior might be created with a channel sender
so that data can be sent as an effect of performing a command.
Effects can be chained and are guaranteed to be applied in their entirety
before the next command for their entity id is processed.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_event" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#49">source</a><h4 class="code-header">fn <a href="#tymethod.on_event" class="fn">on_event</a>(context: &amp;<a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;, state: &amp;mut Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>, event: Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.Event" title="type akka_persistence_rs::entity::EventSourcedBehavior::Event">Event</a>)</h4></section></summary><div class="docblock"><p>Given a state and event, modify state, which could indicate transition to
the next state. No side effects are to be performed. Can be used to replay
events to attain a new state i.e. the major function of event sourcing.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.on_recovery_completed" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#55">source</a><h4 class="code-header">fn <a href="#method.on_recovery_completed" class="fn">on_recovery_completed</a>&lt;'life0, 'life1, 'life2, 'async_trait&gt;(
    &amp;'life0 self,
    _context: &amp;'life1 <a class="struct" href="struct.Context.html" title="struct akka_persistence_rs::entity::Context">Context</a>&lt;'_&gt;,
    _state: &amp;'life2 Self::<a class="associatedtype" href="trait.EventSourcedBehavior.html#associatedtype.State" title="type akka_persistence_rs::entity::EventSourcedBehavior::State">State</a>
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,
    'life2: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The entity will always receive a “recovery completed” signal, even if there
are no events sourced, or if it’s a new entity with a previously unused EntityId.
Any required side effects should be performed once recovery has completed by
overriding this method.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_initial_recovery_completed" class="method"><a class="src rightside" href="../../src/akka_persistence_rs/entity.rs.html#59">source</a><h4 class="code-header">fn <a href="#method.on_initial_recovery_completed" class="fn">on_initial_recovery_completed</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 self
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.75.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.75.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'async_trait,
    'life0: 'async_trait,</span></h4></section></summary><div class="docblock"><p>Called when the entity manager has completed initially recoverying entities,
even if there are no initial entities.</p>
</div></details></div><h2 id="object-safety" class="small-section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.75.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/akka_persistence_rs/entity/trait.EventSourcedBehavior.js" async></script></section></div></main></body></html>