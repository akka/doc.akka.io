<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Effects express how the state of an entity is to be updated, and how various side-effects can be performed; all in response to an entity’s commands. Effects can be chained with other effects and are guaranteed to be applied (run) before the next command for an entity id is processed."><title>akka_persistence_rs::effect - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="akka_persistence_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../akka_persistence_rs/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../akka_persistence_rs/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module effect</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">akka_persistence_rs</a>::<wbr><a class="mod" href="#">effect</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/akka_persistence_rs/effect.rs.html#1-787">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Effects express how the state of an entity is to be updated, and how various side-effects
can be performed; all in response to an entity’s commands. Effects can be chained with other effects and are guaranteed
to be applied (run) before the next command for an entity id is processed.</p>
<p>Effects are applied
on being returned from a command handler. Command handlers are “pure” and deliberately constrained
from performing side effects. Using effects this way helps us reason the code of a command handler, and facilitate testing
outside of running an entity manager.</p>
<p>An example as used within a command handler:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>akka_persistence_rs::effect::{EffectExt, persist_event};

<span class="comment">// ...

</span>persist_event(SomeEvent)
    .then_reply(<span class="kw">move </span>|_s| <span class="prelude-val">Some</span>((reply_to, reply_value)))
    .boxed();</code></pre></div>
<p>Convenience methods are provided for commonly chained operations and often provide any state that
has been updated by a previous operation.
These conveniences take the form of <code>and_then</code> and <code>then</code> as the prefix. By Rust convention, <code>and_then</code>
provides the result of the previous operation and expects a result provided
given some closure. Also by convention, <code>then</code> is applied only when the previous operation
completed successfully.</p>
<p>The <a href="trait.EffectExt.html#method.boxed" title="method akka_persistence_rs::effect::EffectExt::boxed">EffectExt::boxed</a> method is a convenience for “boxing” the chain of effects into a concrete
type that can be returned from a command handler. For more information on boxing, please refer
to <a href="https://doc.rust-lang.org/std/boxed/index.html">the Rust documentation</a>.</p>
<p>Custom effects may also be provided by implementing the <a href="trait.Effect.html" title="trait akka_persistence_rs::effect::Effect">Effect</a> and <a href="trait.EffectExt.html" title="trait akka_persistence_rs::effect::EffectExt">EffectExt</a>
traits. See the <a href="struct.Reply.html" title="struct akka_persistence_rs::effect::Reply">Reply</a> type to illustrate how.</p>
<p>In the case where there is no convenience method, such as with custom ones, a generalized <code>and</code>
operation can be used to chain any effect. Using the previous <code>then_reply</code> example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>akka_persistence_rs::effect::{EffectExt, reply, persist_event};

<span class="comment">// ...

</span>persist_event(SomeEvent)
    .and(reply(reply_to, reply_value))
    .boxed();</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.And.html" title="struct akka_persistence_rs::effect::And">And</a></div><div class="desc docblock-short">The return type of <a href="trait.EffectExt.html#method.and" title="method akka_persistence_rs::effect::EffectExt::and">EffectExt::and</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.PersistEvent.html" title="struct akka_persistence_rs::effect::PersistEvent">PersistEvent</a></div><div class="desc docblock-short">The return type of <a href="fn.persist_event.html" title="fn akka_persistence_rs::effect::persist_event">persist_event</a> and <a href="fn.persist_deletion_event.html" title="fn akka_persistence_rs::effect::persist_deletion_event">persist_deletion_event</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Reply.html" title="struct akka_persistence_rs::effect::Reply">Reply</a></div><div class="desc docblock-short">The return type of <a href="fn.reply.html" title="fn akka_persistence_rs::effect::reply">reply</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Then.html" title="struct akka_persistence_rs::effect::Then">Then</a></div><div class="desc docblock-short">The return type of <a href="fn.then.html" title="fn akka_persistence_rs::effect::then">then</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ThenPersistEvent.html" title="struct akka_persistence_rs::effect::ThenPersistEvent">ThenPersistEvent</a></div><div class="desc docblock-short">The return type of <a href="trait.EffectExt.html#method.then_persist_event" title="method akka_persistence_rs::effect::EffectExt::then_persist_event">EffectExt::then_persist_event</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ThenReply.html" title="struct akka_persistence_rs::effect::ThenReply">ThenReply</a></div><div class="desc docblock-short">The return type of <a href="trait.EffectExt.html#method.then_reply" title="method akka_persistence_rs::effect::EffectExt::then_reply">EffectExt::then_reply</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Unhandled.html" title="struct akka_persistence_rs::effect::Unhandled">Unhandled</a></div><div class="desc docblock-short">The return type of <a href="fn.unhandled.html" title="fn akka_persistence_rs::effect::unhandled">unhandled</a>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum akka_persistence_rs::effect::Error">Error</a></div><div class="desc docblock-short">Errors that can occur when applying effects.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Effect.html" title="trait akka_persistence_rs::effect::Effect">Effect</a></div><div class="desc docblock-short">The trait that effect types implement.</div></li><li><div class="item-name"><a class="trait" href="trait.EffectExt.html" title="trait akka_persistence_rs::effect::EffectExt">EffectExt</a></div><div class="desc docblock-short">Combinators for use with effects.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.persist_deletion_event.html" title="fn akka_persistence_rs::effect::persist_deletion_event">persist_deletion_event</a></div><div class="desc docblock-short">An effect to persist an event upon having successfully handed it off to
be persisted. The event will be flagged to represent the deletion of
an entity instance.</div></li><li><div class="item-name"><a class="fn" href="fn.persist_event.html" title="fn akka_persistence_rs::effect::persist_event">persist_event</a></div><div class="desc docblock-short">An effect to persist an event.</div></li><li><div class="item-name"><a class="fn" href="fn.reply.html" title="fn akka_persistence_rs::effect::reply">reply</a></div><div class="desc docblock-short">An effect to reply an envelope if the previous effect completed
successfully. Note that if state from having persisted an event
via a prior effect is required, then use a <a href="fn.then.html" title="fn akka_persistence_rs::effect::then">then</a> effect instead.</div></li><li><div class="item-name"><a class="fn" href="fn.then.html" title="fn akka_persistence_rs::effect::then">then</a></div><div class="desc docblock-short">A side effect to run a function asynchronously. The associated
behavior is available so that communication channels, for
example, can be accessed by the side-effect. Additionally, the
latest state given any previous effect having persisted an event,
or else the state at the outset of the effects being applied,
is also available.</div></li><li><div class="item-name"><a class="fn" href="fn.unhandled.html" title="fn akka_persistence_rs::effect::unhandled">unhandled</a></div><div class="desc docblock-short">An unhandled command producing no effect</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.ReplyResult.html" title="type akka_persistence_rs::effect::ReplyResult">ReplyResult</a></div><div class="desc docblock-short">A result type for <a href="type.ReplyTo.html" title="type akka_persistence_rs::effect::ReplyTo">ReplyTo</a> which is used to reply if wrapped with <a href="https://doc.rust-lang.org/1.73.0/core/option/enum.Option.html#variant.Some" title="variant core::option::Option::Some">Some</a>.</div></li><li><div class="item-name"><a class="type" href="type.ReplyTo.html" title="type akka_persistence_rs::effect::ReplyTo">ReplyTo</a></div><div class="desc docblock-short">The reply-to [oneshot::Sender] and the value to send as a result of some
tuple.</div></li><li><div class="item-name"><a class="type" href="type.Result.html" title="type akka_persistence_rs::effect::Result">Result</a></div></li></ul></section></div></main></body></html>