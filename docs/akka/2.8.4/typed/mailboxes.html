<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Mailboxes &bull; Akka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/current/typed/mailboxes.html"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="../css/banner-2.css"/>
<link rel="shortcut icon" href="../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png"/>
<link rel="manifest" href="../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics NOTE this will stop processing data July 1st 2023. At which point this embed code can be removed-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>

<!-- Google Tag Manager: Updated May 17th 2023 - Cookie Compliance checks have been moved into Google Tag Manager -->
<script type="text/javascript">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>

</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="../images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.4
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../typed/index.html" class="page">Actors</a>
  <ul>
    <li><a href="../typed/actors.html" class="page">Introduction to Actors</a></li>
    <li><a href="../typed/actor-lifecycle.html" class="page">Actor lifecycle</a></li>
    <li><a href="../typed/interaction-patterns.html" class="page">Interaction Patterns</a></li>
    <li><a href="../typed/fault-tolerance.html" class="page">Fault Tolerance</a></li>
    <li><a href="../typed/actor-discovery.html" class="page">Actor discovery</a></li>
    <li><a href="../typed/routers.html" class="page">Routers</a></li>
    <li><a href="../typed/stash.html" class="page">Stash</a></li>
    <li><a href="../typed/fsm.html" class="page">Behaviors as finite state machines</a></li>
    <li><a href="../coordinated-shutdown.html" class="page">Coordinated Shutdown</a></li>
    <li><a href="../typed/dispatchers.html" class="page">Dispatchers</a></li>
    <li><a href="../typed/mailboxes.html#mailboxes" class="active page">Mailboxes</a>
    <ul>
      <li><a href="../typed/mailboxes.html#dependency" class="header">Dependency</a></li>
      <li><a href="../typed/mailboxes.html#introduction" class="header">Introduction</a></li>
      <li><a href="../typed/mailboxes.html#selecting-what-mailbox-is-used" class="header">Selecting what mailbox is used</a></li>
      <li><a href="../typed/mailboxes.html#mailbox-implementations" class="header">Mailbox Implementations</a></li>
      <li><a href="../typed/mailboxes.html#custom-mailbox-type" class="header">Custom Mailbox type</a></li>
    </ul></li>
    <li><a href="../typed/testing.html" class="page">Testing</a></li>
    <li><a href="../typed/coexisting.html" class="page">Coexistence</a></li>
    <li><a href="../typed/style-guide.html" class="page">Style guide</a></li>
    <li><a href="../typed/from-classic.html" class="page">Learning Akka Typed from Classic</a></li>
  </ul></li>
  <li><a href="../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../stream/index.html" class="page">Streams</a></li>
  <li><a href="../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../project/index.html" class="page">Project Information</a></li>
  <li><a href="../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.4
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../typed/index.html" class="page">Actors</a>
  <ul>
    <li><a href="../typed/actors.html" class="page">Introduction to Actors</a></li>
    <li><a href="../typed/actor-lifecycle.html" class="page">Actor lifecycle</a></li>
    <li><a href="../typed/interaction-patterns.html" class="page">Interaction Patterns</a></li>
    <li><a href="../typed/fault-tolerance.html" class="page">Fault Tolerance</a></li>
    <li><a href="../typed/actor-discovery.html" class="page">Actor discovery</a></li>
    <li><a href="../typed/routers.html" class="page">Routers</a></li>
    <li><a href="../typed/stash.html" class="page">Stash</a></li>
    <li><a href="../typed/fsm.html" class="page">Behaviors as finite state machines</a></li>
    <li><a href="../coordinated-shutdown.html" class="page">Coordinated Shutdown</a></li>
    <li><a href="../typed/dispatchers.html" class="page">Dispatchers</a></li>
    <li><a href="../typed/mailboxes.html#mailboxes" class="active page">Mailboxes</a>
    <ul>
      <li><a href="../typed/mailboxes.html#dependency" class="header">Dependency</a></li>
      <li><a href="../typed/mailboxes.html#introduction" class="header">Introduction</a></li>
      <li><a href="../typed/mailboxes.html#selecting-what-mailbox-is-used" class="header">Selecting what mailbox is used</a></li>
      <li><a href="../typed/mailboxes.html#mailbox-implementations" class="header">Mailbox Implementations</a></li>
      <li><a href="../typed/mailboxes.html#custom-mailbox-type" class="header">Custom Mailbox type</a></li>
    </ul></li>
    <li><a href="../typed/testing.html" class="page">Testing</a></li>
    <li><a href="../typed/coexisting.html" class="page">Coexistence</a></li>
    <li><a href="../typed/style-guide.html" class="page">Style guide</a></li>
    <li><a href="../typed/from-classic.html" class="page">Learning Akka Typed from Classic</a></li>
  </ul></li>
  <li><a href="../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../stream/index.html" class="page">Streams</a></li>
  <li><a href="../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../project/index.html" class="page">Project Information</a></li>
  <li><a href="../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#mailboxes" name="mailboxes" class="anchor"><span class="anchor-link"></span></a>Mailboxes</h1>
<p>You are viewing the documentation for the new actor APIs, to view the Akka Classic documentation, see <a href="../mailboxes.html">Classic Mailboxes</a>.</p>
<h2><a href="#dependency" name="dependency" class="anchor"><span class="anchor-link"></span></a>Dependency</h2>
<p>Mailboxes are part of core Akka, which means that they are part of the <code>akka-actor</code> dependency. This page describes how to use mailboxes with <code>akka-actor-typed</code>.</p>
<p>The Akka dependencies are available from Akka&rsquo;s library repository. To access them there, you need to configure the URL for this repository.</p><dl class="repository"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">resolvers += "Akka library repository".at("https://repo.akka.io/maven")
</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;project&gt
  ...
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;akka-repository&lt;/id&gt;
      &lt;name>Akka library repository&lt;/name&gt;
      &lt;url>https://repo.akka.io/maven&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt
&lt;/project&gt;
</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">repositories {
    mavenCentral()
    maven {
        url "https://repo.akka.io/maven"
    }
}
</code></pre></dd></dl>
<p>Additionally, add the dependency as below.</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaVersion = "2.8.4"
libraryDependencies += "com.typesafe.akka" %% "akka-actor-typed" % AkkaVersion</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;scala.binary.version&gt;2.13&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
      &lt;artifactId&gt;akka-bom_${scala.binary.version}&lt;/artifactId&gt;
      &lt;version&gt;2.8.4&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-actor-typed_${scala.binary.version}&lt;/artifactId&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  ScalaBinary: "2.13"
]
dependencies {
  implementation platform("com.typesafe.akka:akka-bom_${versions.ScalaBinary}:2.8.4")

  implementation "com.typesafe.akka:akka-actor-typed_${versions.ScalaBinary}"
}</code></pre></dd></dl>
<h2><a href="#introduction" name="introduction" class="anchor"><span class="anchor-link"></span></a>Introduction</h2>
<p>Each actor in Akka has a <code>Mailbox</code>, this is where the messages are enqueued before being processed by the actor.</p>
<p>By default an unbounded mailbox is used, this means any number of messages can be enqueued into the mailbox. </p>
<p>The unbounded mailbox is a convenient default but in a scenario where messages are added to the mailbox faster than the actor can process them, this can lead to the application running out of memory. For this reason a bounded mailbox can be specified, the bounded mailbox will pass new messages to <code>deadletters</code> when the mailbox is full.</p>
<p>For advanced use cases it is also possible to defer mailbox selection to config by pointing to a config path.</p>
<h2><a href="#selecting-what-mailbox-is-used" name="selecting-what-mailbox-is-used" class="anchor"><span class="anchor-link"></span></a>Selecting what mailbox is used</h2>
<h3><a href="#selecting-a-mailbox-type-for-an-actor" name="selecting-a-mailbox-type-for-an-actor" class="anchor"><span class="anchor-link"></span></a>Selecting a Mailbox Type for an Actor</h3>
<p>To select a specific mailbox for an actor use <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/MailboxSelector$.html" title="akka.actor.typed.MailboxSelector"><code>MailboxSelector</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/MailboxSelector.html" title="akka.actor.typed.MailboxSelector"><code>MailboxSelector</code></a></span> to create a <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Props.html" title="akka.actor.typed.Props"><code>Props</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Props.html" title="akka.actor.typed.Props"><code>Props</code></a></span> instance for spawning your actor:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-actor-typed-tests/src/test/scala/docs/akka/typed/MailboxDocSpec.scala#L27-L30" target="_blank" title="Go to snippet source">source</a><code class="language-scala">context.spawn(childBehavior, &quot;bounded-mailbox-child&quot;, MailboxSelector.bounded(100))

val props = MailboxSelector.fromConfig(&quot;my-app.my-special-mailbox&quot;)
context.spawn(childBehavior, &quot;from-config-mailbox-child&quot;, props)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/MailboxDocTest.java#L38-L43" target="_blank" title="Go to snippet source">source</a><code class="language-java">context.spawn(childBehavior, &quot;bounded-mailbox-child&quot;, MailboxSelector.bounded(100));

context.spawn(
    childBehavior,
    &quot;from-config-mailbox-child&quot;,
    MailboxSelector.fromConfig(&quot;my-app.my-special-mailbox&quot;));</code></pre></dd>
</dl>
<p><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/MailboxSelector$.html#fromConfig(path:String):akka.actor.typed.MailboxSelector" title="akka.actor.typed.MailboxSelector"><code>fromConfig</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/MailboxSelector.html#fromConfig(java.lang.String)" title="akka.actor.typed.MailboxSelector"><code>fromConfig</code></a></span> takes an absolute config path to a block defining the dispatcher in the config file:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-actor-typed-tests/src/test/resources/mailbox-config-sample.conf" target="_blank" title="Go to snippet source">source</a><code class="language-conf">my-app {
  my-special-mailbox {
    mailbox-type = &quot;akka.dispatch.SingleConsumerOnlyUnboundedMailbox&quot;
  }
}</code></pre>
<h3><a href="#default-mailbox" name="default-mailbox" class="anchor"><span class="anchor-link"></span></a>Default Mailbox</h3>
<p>The default mailbox is used when the mailbox is not specified and is the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/SingleConsumerOnlyUnboundedMailbox.html" title="akka.dispatch.SingleConsumerOnlyUnboundedMailbox"><code>SingleConsumerOnlyUnboundedMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/SingleConsumerOnlyUnboundedMailbox.html" title="akka.dispatch.SingleConsumerOnlyUnboundedMailbox"><code>SingleConsumerOnlyUnboundedMailbox</code></a></span></p>
<h3><a href="#which-configuration-is-passed-to-the-mailbox-type" name="which-configuration-is-passed-to-the-mailbox-type" class="anchor"><span class="anchor-link"></span></a>Which Configuration is passed to the Mailbox Type</h3>
<p>Each mailbox type is implemented by a class which extends <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/MailboxType.html" title="akka.dispatch.MailboxType"><code>MailboxType</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/MailboxType.html" title="akka.dispatch.MailboxType"><code>MailboxType</code></a></span> and takes two constructor arguments: a <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Settings.html" title="akka.actor.typed.Settings"><code>ActorSystem.Settings</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Settings.html" title="akka.actor.typed.Settings"><code>ActorSystem.Settings</code></a></span> object and a <a href="https://lightbend.github.io/config/latest/api/index.html?com/typesafe/config/Config.html">Config</a> section. The latter is computed by obtaining the named configuration section from the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/ActorSystem.html" title="akka.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/ActorSystem.html" title="akka.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> configuration, overriding its <code>id</code> key with the configuration path of the mailbox type and adding a fall-back to the default mailbox configuration section.</p>
<h2><a href="#mailbox-implementations" name="mailbox-implementations" class="anchor"><span class="anchor-link"></span></a>Mailbox Implementations</h2>
<p>Akka ships with a number of mailbox implementations:</p>
<ul>
  <li> <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/SingleConsumerOnlyUnboundedMailbox.html" title="akka.dispatch.SingleConsumerOnlyUnboundedMailbox"><code>SingleConsumerOnlyUnboundedMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/SingleConsumerOnlyUnboundedMailbox.html" title="akka.dispatch.SingleConsumerOnlyUnboundedMailbox"><code>SingleConsumerOnlyUnboundedMailbox</code></a></span> (default)
    <ul>
      <li>This is the default</li>
      <li>Backed by a Multiple-Producer Single-Consumer queue, cannot be used with <code>BalancingDispatcher</code></li>
      <li>Blocking: No</li>
      <li>Bounded: No</li>
      <li>Configuration name: <code>&quot;akka.dispatch.SingleConsumerOnlyUnboundedMailbox&quot;</code></li>
    </ul>
  </li>
  <li> <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/UnboundedMailbox.html" title="akka.dispatch.UnboundedMailbox"><code>UnboundedMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/UnboundedMailbox.html" title="akka.dispatch.UnboundedMailbox"><code>UnboundedMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html" title="java.util.concurrent.ConcurrentLinkedQueue"><code>java.util.concurrent.ConcurrentLinkedQueue</code></a></li>
      <li>Blocking: No</li>
      <li>Bounded: No</li>
      <li>Configuration name: <code>&quot;unbounded&quot;</code> or <code>&quot;akka.dispatch.UnboundedMailbox&quot;</code></li>
    </ul>
  </li>
  <li>
    <p><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/NonBlockingBoundedMailbox.html" title="akka.dispatch.NonBlockingBoundedMailbox"><code>NonBlockingBoundedMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/NonBlockingBoundedMailbox.html" title="akka.dispatch.NonBlockingBoundedMailbox"><code>NonBlockingBoundedMailbox</code></a></span></p>
    <ul>
      <li>Backed by a very efficient Multiple-Producer Single-Consumer queue</li>
      <li>Blocking: No (discards overflowing messages into deadLetters)</li>
      <li>Bounded: Yes</li>
      <li>Configuration name: <code>&quot;akka.dispatch.NonBlockingBoundedMailbox&quot;</code></li>
    </ul>
  </li>
  <li> <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/UnboundedControlAwareMailbox.html" title="akka.dispatch.UnboundedControlAwareMailbox"><code>UnboundedControlAwareMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/UnboundedControlAwareMailbox.html" title="akka.dispatch.UnboundedControlAwareMailbox"><code>UnboundedControlAwareMailbox</code></a></span>
    <ul>
      <li>Delivers messages that extend <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/ControlMessage.html" title="akka.dispatch.ControlMessage"><code>akka.dispatch.ControlMessage</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/ControlMessage.html" title="akka.dispatch.ControlMessage"><code>akka.dispatch.ControlMessage</code></a></span> with higher priority</li>
      <li>Backed by two <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html" title="java.util.concurrent.ConcurrentLinkedQueue"><code>java.util.concurrent.ConcurrentLinkedQueue</code></a></li>
      <li>Blocking: No</li>
      <li>Bounded: No</li>
      <li>Configuration name: <code>&quot;akka.dispatch.UnboundedControlAwareMailbox&quot;</code></li>
    </ul>
  </li>
  <li> <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/UnboundedPriorityMailbox.html" title="akka.dispatch.UnboundedPriorityMailbox"><code>UnboundedPriorityMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/UnboundedPriorityMailbox.html" title="akka.dispatch.UnboundedPriorityMailbox"><code>UnboundedPriorityMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html" title="java.util.concurrent.PriorityBlockingQueue"><code>java.util.concurrent.PriorityBlockingQueue</code></a></li>
      <li>Delivery order for messages of equal priority is undefined - contrast with the <code>UnboundedStablePriorityMailbox</code></li>
      <li>Blocking: No</li>
      <li>Bounded: No</li>
      <li>Configuration name: <code>&quot;akka.dispatch.UnboundedPriorityMailbox&quot;</code></li>
    </ul>
  </li>
  <li> <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/UnboundedStablePriorityMailbox.html" title="akka.dispatch.UnboundedStablePriorityMailbox"><code>UnboundedStablePriorityMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/UnboundedStablePriorityMailbox.html" title="akka.dispatch.UnboundedStablePriorityMailbox"><code>UnboundedStablePriorityMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html" title="java.util.concurrent.PriorityBlockingQueue"><code>java.util.concurrent.PriorityBlockingQueue</code></a> wrapped in an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/util/PriorityQueueStabilizer.html" title="akka.util.PriorityQueueStabilizer"><code>akka.util.PriorityQueueStabilizer</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/util/PriorityQueueStabilizer.html" title="akka.util.PriorityQueueStabilizer"><code>akka.util.PriorityQueueStabilizer</code></a></span></li>
      <li>FIFO order is preserved for messages of equal priority - contrast with the <code>UnboundedPriorityMailbox</code></li>
      <li>Blocking: No</li>
      <li>Bounded: No</li>
      <li>Configuration name: <code>&quot;akka.dispatch.UnboundedStablePriorityMailbox&quot;</code></li>
    </ul>
  </li>
</ul>
<p>Other bounded mailbox implementations which will block the sender if the capacity is reached and configured with non-zero <code>mailbox-push-timeout-time</code>. </p><div class="callout note "><div class="callout-title">Note</div>
<p>The following mailboxes should only be used with zero <code>mailbox-push-timeout-time</code>.</p></div>
<ul>
  <li><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/BoundedMailbox.html" title="akka.dispatch.BoundedMailbox"><code>BoundedMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/BoundedMailbox.html" title="akka.dispatch.BoundedMailbox"><code>BoundedMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/LinkedBlockingQueue.html" title="java.util.concurrent.LinkedBlockingQueue"><code>java.util.concurrent.LinkedBlockingQueue</code></a></li>
      <li>Blocking: Yes if used with non-zero <code>mailbox-push-timeout-time</code>, otherwise No</li>
      <li>Bounded: Yes</li>
      <li>Configuration name: <code>&quot;bounded&quot;</code> or <code>&quot;akka.dispatch.BoundedMailbox&quot;</code></li>
    </ul>
  </li>
  <li><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/BoundedPriorityMailbox.html" title="akka.dispatch.BoundedPriorityMailbox"><code>BoundedPriorityMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/BoundedPriorityMailbox.html" title="akka.dispatch.BoundedPriorityMailbox"><code>BoundedPriorityMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/PriorityQueue.html" title="java.util.PriorityQueue"><code>java.util.PriorityQueue</code></a> wrapped in an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/util/BoundedBlockingQueue.html" title="akka.util.BoundedBlockingQueue"><code>akka.util.BoundedBlockingQueue</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/util/BoundedBlockingQueue.html" title="akka.util.BoundedBlockingQueue"><code>akka.util.BoundedBlockingQueue</code></a></span></li>
      <li>Delivery order for messages of equal priority is undefined - contrast with the <code>BoundedStablePriorityMailbox</code></li>
      <li>Blocking: Yes if used with non-zero <code>mailbox-push-timeout-time</code>, otherwise No</li>
      <li>Bounded: Yes</li>
      <li>Configuration name: <code>&quot;akka.dispatch.BoundedPriorityMailbox&quot;</code></li>
    </ul>
  </li>
  <li><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/BoundedStablePriorityMailbox.html" title="akka.dispatch.BoundedStablePriorityMailbox"><code>BoundedStablePriorityMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/BoundedStablePriorityMailbox.html" title="akka.dispatch.BoundedStablePriorityMailbox"><code>BoundedStablePriorityMailbox</code></a></span>
    <ul>
      <li>Backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/PriorityQueue.html" title="java.util.PriorityQueue"><code>java.util.PriorityQueue</code></a> wrapped in an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/util/PriorityQueueStabilizer.html" title="akka.util.PriorityQueueStabilizer"><code>akka.util.PriorityQueueStabilizer</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/util/PriorityQueueStabilizer.html" title="akka.util.PriorityQueueStabilizer"><code>akka.util.PriorityQueueStabilizer</code></a></span> and an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/util/BoundedBlockingQueue.html" title="akka.util.BoundedBlockingQueue"><code>akka.util.BoundedBlockingQueue</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/util/BoundedBlockingQueue.html" title="akka.util.BoundedBlockingQueue"><code>akka.util.BoundedBlockingQueue</code></a></span></li>
      <li>FIFO order is preserved for messages of equal priority - contrast with the BoundedPriorityMailbox</li>
      <li>Blocking: Yes if used with non-zero <code>mailbox-push-timeout-time</code>, otherwise No</li>
      <li>Bounded: Yes</li>
      <li>Configuration name: <code>&quot;akka.dispatch.BoundedStablePriorityMailbox&quot;</code></li>
    </ul>
  </li>
  <li><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/BoundedControlAwareMailbox.html" title="akka.dispatch.BoundedControlAwareMailbox"><code>BoundedControlAwareMailbox</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/BoundedControlAwareMailbox.html" title="akka.dispatch.BoundedControlAwareMailbox"><code>BoundedControlAwareMailbox</code></a></span>
    <ul>
      <li>Delivers messages that extend <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/dispatch/ControlMessage.html" title="akka.dispatch.ControlMessage"><code>akka.dispatch.ControlMessage</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/dispatch/ControlMessage.html" title="akka.dispatch.ControlMessage"><code>akka.dispatch.ControlMessage</code></a></span> with higher priority</li>
      <li>Backed by two <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentLinkedQueue.html" title="java.util.concurrent.ConcurrentLinkedQueue"><code>java.util.concurrent.ConcurrentLinkedQueue</code></a> and blocking on enqueue if capacity has been reached</li>
      <li>Blocking: Yes if used with non-zero <code>mailbox-push-timeout-time</code>, otherwise No</li>
      <li>Bounded: Yes</li>
      <li>Configuration name: <code>&quot;akka.dispatch.BoundedControlAwareMailbox&quot;</code></li>
    </ul>
  </li>
</ul>
<h2><a href="#custom-mailbox-type" name="custom-mailbox-type" class="anchor"><span class="anchor-link"></span></a>Custom Mailbox type</h2>
<p>The best way to show how to create your own Mailbox type is by example:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-docs/src/test/scala/docs/dispatcher/MyUnboundedMailbox.scala#L56-L57" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// Marker trait used for mailbox requirements mapping
trait MyUnboundedMessageQueueSemantics</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-docs/src/test/java/jdocs/dispatcher/MyUnboundedMessageQueueSemantics.java#L8-L9" target="_blank" title="Go to snippet source">source</a><code class="language-java">// Marker interface used for mailbox requirements mapping
public interface MyUnboundedMessageQueueSemantics {}</code></pre></dd>
</dl>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-docs/src/test/scala/docs/dispatcher/MyUnboundedMailbox.scala#L8-L52" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.ActorRef
import akka.actor.ActorSystem
import akka.dispatch.Envelope
import akka.dispatch.MailboxType
import akka.dispatch.MessageQueue
import akka.dispatch.ProducesMessageQueue
import com.typesafe.config.Config
import java.util.concurrent.ConcurrentLinkedQueue
import scala.Option

object MyUnboundedMailbox {
  // This is the MessageQueue implementation
  class MyMessageQueue extends MessageQueue with MyUnboundedMessageQueueSemantics {

    private final val queue = new ConcurrentLinkedQueue[Envelope]()

    // these should be implemented; queue used as example
    def enqueue(receiver: ActorRef, handle: Envelope): Unit =
      queue.offer(handle)
    def dequeue(): Envelope = queue.poll()
    def numberOfMessages: Int = queue.size
    def hasMessages: Boolean = !queue.isEmpty
    def cleanUp(owner: ActorRef, deadLetters: MessageQueue): Unit = {
      while (hasMessages) {
        deadLetters.enqueue(owner, dequeue())
      }
    }
  }
}

// This is the Mailbox implementation
class MyUnboundedMailbox extends MailboxType with ProducesMessageQueue[MyUnboundedMailbox.MyMessageQueue] {

  import MyUnboundedMailbox._

  // This constructor signature must exist, it will be called by Akka
  def this(settings: ActorSystem.Settings, config: Config) = {
    // put your initialization code here
    this()
  }

  // The create method is called to create the MessageQueue
  final override def create(owner: Option[ActorRef], system: Option[ActorSystem]): MessageQueue =
    new MyMessageQueue()
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.4/akka-docs/src/test/java/jdocs/dispatcher/MyUnboundedMailbox.java#L8-L59" target="_blank" title="Go to snippet source">source</a><code class="language-java">import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.dispatch.Envelope;
import akka.dispatch.MailboxType;
import akka.dispatch.MessageQueue;
import akka.dispatch.ProducesMessageQueue;
import com.typesafe.config.Config;
import java.util.Queue;
import java.util.concurrent.ConcurrentLinkedQueue;
import scala.Option;

public class MyUnboundedMailbox
    implements MailboxType, ProducesMessageQueue&lt;MyUnboundedMailbox.MyMessageQueue&gt; {

  // This is the MessageQueue implementation
  public static class MyMessageQueue implements MessageQueue, MyUnboundedMessageQueueSemantics {
    private final Queue&lt;Envelope&gt; queue = new ConcurrentLinkedQueue&lt;Envelope&gt;();

    // these must be implemented; queue used as example
    public void enqueue(ActorRef receiver, Envelope handle) {
      queue.offer(handle);
    }

    public Envelope dequeue() {
      return queue.poll();
    }

    public int numberOfMessages() {
      return queue.size();
    }

    public boolean hasMessages() {
      return !queue.isEmpty();
    }

    public void cleanUp(ActorRef owner, MessageQueue deadLetters) {
      while (!queue.isEmpty()) {
        deadLetters.enqueue(owner, dequeue());
      }
    }
  }

  // This constructor signature must exist, it will be called by Akka
  public MyUnboundedMailbox(ActorSystem.Settings settings, Config config) {
    // put your initialization code here
  }

  // The create method is called to create the MessageQueue
  public MessageQueue create(Option&lt;ActorRef&gt; owner, Option&lt;ActorSystem&gt; system) {
    return new MyMessageQueue();
  }
}</code></pre></dd>
</dl>
<p>And then you specify the FQCN of your MailboxType as the value of the &ldquo;mailbox-type&rdquo; in the dispatcher configuration, or the mailbox configuration.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Make sure to include a constructor which takes <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ActorSystem$$Settings.html" title="akka.actor.ActorSystem.Settings"><code>akka.actor.ActorSystem.Settings</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ActorSystem.Settings.html" title="akka.actor.ActorSystem.Settings"><code>akka.actor.ActorSystem.Settings</code></a></span> and <a href="https://lightbend.github.io/config/latest/api/index.html?com/typesafe/config/Config.html">com.typesafe.config.Config</a> arguments, as this constructor is invoked reflectively to construct your mailbox type. The config passed in as second argument is that section from the configuration which describes the dispatcher or mailbox setting using this mailbox type; the mailbox type will be instantiated once for each dispatcher or mailbox setting using it.</p></div>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../typed/dispatchers.html"><i class="icon-prev"></i> <span class="link-prev">Dispatchers</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../typed/testing.html">Testing <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka/tree/v2.8.4/akka-docs/src/main/paradox/typed/mailboxes.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../images/akka-icon.svg" />
<section class="copyright">
<div>Akka is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/groups.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/snippets.js"></script>
<script type="text/javascript" src="../js/magellan.js"></script>
<script type="text/javascript" src="../js/metadata-toggle.js"></script>
<script type="text/javascript" src="../js/lbHeader.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="../assets/js/warnOldDocs.js"></script>
<script type="text/javascript" src="../assets/js/scalafiddle.js"></script>


</body>
</html>
