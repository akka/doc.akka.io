<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Logging &bull; Akka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Logging options with Akka."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/current/typed/logging.html"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="../css/banner-2.css"/>
<link rel="shortcut icon" href="../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png"/>
<link rel="manifest" href="../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics NOTE this will stop processing data July 1st 2023. At which point this embed code can be removed-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>

<!-- Google Tag Manager: Updated May 17th 2023 - Cookie Compliance checks have been moved into Google Tag Manager -->
<script type="text/javascript">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>

</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="../images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.9.0-M1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../typed/index.html" class="page">Actors</a></li>
  <li><a href="../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../stream/index.html" class="page">Streams</a></li>
  <li><a href="../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../index-utilities.html" class="page">Utilities</a>
  <ul>
    <li><a href="../typed/logging.html#logging" class="active page">Logging</a>
    <ul>
      <li><a href="../typed/logging.html#dependency" class="header">Dependency</a></li>
      <li><a href="../typed/logging.html#introduction" class="header">Introduction</a></li>
      <li><a href="../typed/logging.html#how-to-log" class="header">How to log</a></li>
      <li><a href="../typed/logging.html#mdc" class="header">MDC</a></li>
      <li><a href="../typed/logging.html#slf4j-backend" class="header">SLF4J backend</a></li>
      <li><a href="../typed/logging.html#internal-logging-by-akka" class="header">Internal logging by Akka</a></li>
      <li><a href="../typed/logging.html#logging-in-tests" class="header">Logging in tests</a></li>
    </ul></li>
    <li><a href="../common/circuitbreaker.html" class="page">Circuit Breaker</a></li>
    <li><a href="../futures.html" class="page">Futures patterns</a></li>
    <li><a href="../typed/extending.html" class="page">Extending Akka</a></li>
  </ul></li>
  <li><a href="../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../project/index.html" class="page">Project Information</a></li>
  <li><a href="../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.9.0-M1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../typed/index.html" class="page">Actors</a></li>
  <li><a href="../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../stream/index.html" class="page">Streams</a></li>
  <li><a href="../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../index-utilities.html" class="page">Utilities</a>
  <ul>
    <li><a href="../typed/logging.html#logging" class="active page">Logging</a>
    <ul>
      <li><a href="../typed/logging.html#dependency" class="header">Dependency</a></li>
      <li><a href="../typed/logging.html#introduction" class="header">Introduction</a></li>
      <li><a href="../typed/logging.html#how-to-log" class="header">How to log</a></li>
      <li><a href="../typed/logging.html#mdc" class="header">MDC</a></li>
      <li><a href="../typed/logging.html#slf4j-backend" class="header">SLF4J backend</a></li>
      <li><a href="../typed/logging.html#internal-logging-by-akka" class="header">Internal logging by Akka</a></li>
      <li><a href="../typed/logging.html#logging-in-tests" class="header">Logging in tests</a></li>
    </ul></li>
    <li><a href="../common/circuitbreaker.html" class="page">Circuit Breaker</a></li>
    <li><a href="../futures.html" class="page">Futures patterns</a></li>
    <li><a href="../typed/extending.html" class="page">Extending Akka</a></li>
  </ul></li>
  <li><a href="../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../project/index.html" class="page">Project Information</a></li>
  <li><a href="../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#logging" name="logging" class="anchor"><span class="anchor-link"></span></a>Logging</h1>
<p>You are viewing the documentation for the new actor APIs, to view the Akka Classic documentation, see <a href="../logging.html">Classic Logging</a>.</p>
<h2><a href="#dependency" name="dependency" class="anchor"><span class="anchor-link"></span></a>Dependency</h2>
<p>To use Logging, you must at least use the Akka actors dependency in your project, and configure logging via the SLF4J backend, such as Logback configuration.</p>
<p>The Akka dependencies are available from Akka&rsquo;s library repository. To access them there, you need to configure the URL for this repository.</p><dl class="repository"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">resolvers += "Akka library repository".at("https://repo.akka.io/maven")
</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;project&gt
  ...
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;akka-repository&lt;/id&gt;
      &lt;name>Akka library repository&lt;/name&gt;
      &lt;url>https://repo.akka.io/maven&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt
&lt;/project&gt;
</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">repositories {
    mavenCentral()
    maven {
        url "https://repo.akka.io/maven"
    }
}
</code></pre></dd></dl>
<p>Additionally, add the dependency as below.</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaVersion = "2.9.0-M1"
libraryDependencies += "com.typesafe.akka" %% "akka-actor-typed" % AkkaVersion</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;scala.binary.version&gt;2.13&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
      &lt;artifactId&gt;akka-bom_${scala.binary.version}&lt;/artifactId&gt;
      &lt;version&gt;2.9.0-M1&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-actor-typed_${scala.binary.version}&lt;/artifactId&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  ScalaBinary: "2.13"
]
dependencies {
  implementation platform("com.typesafe.akka:akka-bom_${versions.ScalaBinary}:2.9.0-M1")

  implementation "com.typesafe.akka:akka-actor-typed_${versions.ScalaBinary}"
}</code></pre></dd></dl>
<h2><a href="#introduction" name="introduction" class="anchor"><span class="anchor-link"></span></a>Introduction</h2>
<p><a href="https://www.slf4j.org/">SLF4J</a> is used for logging and Akka provides access to an <a href="https://www.slf4j.org/api/org/slf4j/Logger.html">org.slf4j.Logger</a> for a specific actor via the <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html" title="akka.actor.typed.javadsl.ActorContext"><code>ActorContext</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html" title="akka.actor.typed.scaladsl.ActorContext"><code>ActorContext</code></a></span>. You may also retrieve a <code>Logger</code> with the ordinary <a href="https://www.slf4j.org/api/org/slf4j/LoggerFactory.html">org.slf4j.LoggerFactory</a>.</p>
<p>To ensure that logging has minimal performance impact it&rsquo;s important that you configure an asynchronous appender for the SLF4J backend. Logging generally means IO and locks, which can slow down the operations of your code if it was performed synchronously.</p>
<h2><a href="#how-to-log" name="how-to-log" class="anchor"><span class="anchor-link"></span></a>How to log</h2>
<p>The <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html" title="akka.actor.typed.javadsl.ActorContext"><code>ActorContext</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html" title="akka.actor.typed.scaladsl.ActorContext"><code>ActorContext</code></a></span> provides access to an <a href="https://www.slf4j.org/api/org/slf4j/Logger.html">org.slf4j.Logger</a> for a specific actor.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L30-L33" target="_blank" title="Go to snippet source">source</a><code class="language-scala">Behaviors.receive[String] { (context, message) =&gt;
  context.log.info(&quot;Received message: {}&quot;, message)
  Behaviors.same
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L32-L51" target="_blank" title="Go to snippet source">source</a><code class="language-java">public class MyLoggingBehavior extends AbstractBehavior&lt;String&gt; {

  public static Behavior&lt;String&gt; create() {
    return Behaviors.setup(MyLoggingBehavior::new);
  }

  private MyLoggingBehavior(ActorContext&lt;String&gt; context) {
    super(context);
  }

  @Override
  public Receive&lt;String&gt; createReceive() {
    return newReceiveBuilder().onMessage(String.class, this::onReceive).build();
  }

  private Behavior&lt;String&gt; onReceive(String message) {
    getContext().getLog().info(&quot;Received message: {}&quot;, message);
    return this;
  }
}</code></pre></dd>
</dl>
<p>The <code>Logger</code> via the <code>ActorContext</code> will automatically have a name that corresponds to the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span> of the actor when the log is accessed the first time. The class name when using <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/AbstractBehavior.html" title="akka.actor.typed.javadsl.AbstractBehavior"><code>AbstractBehavior</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/AbstractBehavior.html" title="akka.actor.typed.scaladsl.AbstractBehavior"><code>AbstractBehavior</code></a></span> or the class <span class="group-scala">or object</span> name where the <code>Behavior</code> is defined when using the functional style. You can set a custom logger name with the <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html#setLoggerName(java.lang.String)" title="akka.actor.typed.javadsl.ActorContext"><code>setLoggerName</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html#setLoggerName(name:String):Unit" title="akka.actor.typed.scaladsl.ActorContext"><code>setLoggerName</code></a></span> of the <code>ActorContext</code>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L37-L45" target="_blank" title="Go to snippet source">source</a><code class="language-scala">Behaviors.setup[String] { context =&gt;
  context.setLoggerName(&quot;com.myservice.BackendManager&quot;)
  context.log.info(&quot;Starting up&quot;)

  Behaviors.receiveMessage { message =&gt;
    context.log.debug(&quot;Received message: {}&quot;, message)
    Behaviors.same
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L55-L79" target="_blank" title="Go to snippet source">source</a><code class="language-java">public class BackendManager extends AbstractBehavior&lt;String&gt; {

  public static Behavior&lt;String&gt; create() {
    return Behaviors.setup(
        context -&gt; {
          context.setLoggerName(BackendManager.class);
          context.getLog().info(&quot;Starting up&quot;);
          return new BackendManager(context);
        });
  }

  private BackendManager(ActorContext&lt;String&gt; context) {
    super(context);
  }

  @Override
  public Receive&lt;String&gt; createReceive() {
    return newReceiveBuilder().onMessage(String.class, this::onReceive).build();
  }

  private Behavior&lt;String&gt; onReceive(String message) {
    getContext().getLog().debug(&quot;Received message: {}&quot;, message);
    return this;
  }
}</code></pre></dd>
</dl>
<p>The convention is to use logger names like fully qualified class names. The parameter to <code>setLoggerName</code> can be a <code>String</code> or a <code>Class</code>, where the latter is convenience for the class name.</p>
<p>When logging via the <code>ActorContext</code> the path of the actor will automatically be added as <code>akkaSource</code> Mapped Diagnostic Context (MDC) value. MDC is typically implemented with a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ThreadLocal.html" title="java.lang.ThreadLocal"><code>ThreadLocal</code></a> by the SLF4J backend. To reduce performance impact, this MDC value is set when you access the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html#log:org.slf4j.Logger" title="akka.actor.typed.scaladsl.ActorContext"><code>log</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html#getLog()" title="akka.actor.typed.javadsl.ActorContext"><code>getLog()</code></a></span> method so you shouldn&rsquo;t cache the returned <code>Logger</code> in your own field. That is handled by <code>ActorContext</code> and retrieving the <code>Logger</code> repeatedly with the <span class="group-scala"><code>log</code></span><span class="group-java"><code>getLog</code></span> method has low overhead. The MDC is cleared automatically after processing of current message has finished.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The <code>Logger</code> is thread-safe but the <span class="group-scala"><code>log</code></span><span class="group-java"><code>getLog</code></span> method in <code>ActorContext</code> is not thread-safe and should not be accessed from threads other than the ordinary actor message processing thread, such as <span class="group-scala"><a href="http://www.scala-lang.org/api/2.13.11/scala/concurrent/Future.html" title="scala.concurrent.Future"><code>Future</code></a></span><span class="group-java"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="java.util.concurrent.CompletionStage"><code>CompletionStage</code></a></span> callbacks.</p></div>
<p>It&rsquo;s also perfectly fine to use a <a href="https://www.slf4j.org/api/org/slf4j/Logger.html">Logger</a> retrieved via <a href="https://www.slf4j.org/api/org/slf4j/LoggerFactory.html">org.slf4j.LoggerFactory</a>, but then the logging events will not include the <code>akkaSource</code> MDC value. This is the recommended way when logging outside of an actor, including logging from <span class="group-scala"><a href="http://www.scala-lang.org/api/2.13.11/scala/concurrent/Future.html" title="scala.concurrent.Future"><code>Future</code></a></span><span class="group-java"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="java.util.concurrent.CompletionStage"><code>CompletionStage</code></a></span> callbacks.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L49-L57" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val log = LoggerFactory.getLogger(&quot;com.myservice.BackendTask&quot;)

Future {
  // some work
  &quot;result&quot;
}.onComplete {
  case Success(result) =&gt; log.info(&quot;Task completed: {}&quot;, result)
  case Failure(exc)    =&gt; log.error(&quot;Task failed&quot;, exc)
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L83-L99" target="_blank" title="Go to snippet source">source</a><code class="language-java">class BackendTask {
  private final Logger log = LoggerFactory.getLogger(getClass());

  void run() {
    CompletableFuture&lt;String&gt; task =
        CompletableFuture.supplyAsync(
            () -&gt; {
              // some work
              return &quot;result&quot;;
            });
    task.whenComplete(
        (result, exc) -&gt; {
          if (exc == null) log.error(&quot;Task failed&quot;, exc);
          else log.info(&quot;Task completed: {}&quot;, result);
        });
  }
}</code></pre></dd>
</dl>
<h3><a href="#placeholder-arguments" name="placeholder-arguments" class="anchor"><span class="anchor-link"></span></a>Placeholder arguments</h3>
<p>The log message may contain argument placeholders <code>{}</code>, which will be substituted if the log level is enabled. Compared to constructing a full string for the log message this has the advantage of avoiding superfluous string concatenation and object allocations when the log level is disabled. Some logging backends may also use these message templates before argument substitution to group and filter logging events.</p>
<p>It can be good to know that 3 or more arguments will result in the relatively small cost of allocating an array (vararg parameter) also when the log level is disabled. The methods with 1 or 2 arguments don&rsquo;t allocate the vararg array.</p><div class="group-scala">
<p>When using the methods for 2 argument placeholders the compiler will often not be able to select the right method and report compiler error &ldquo;ambiguous reference to overloaded definition&rdquo;. To work around this problem you can use the <code>trace2</code>, <code>debug2</code>, <code>info2</code>, <code>warn2</code> or <code>error2</code> extension methods that are added by <code>import akka.actor.typed.scaladsl.LoggerOps</code> or <code>import akka.actor.typed.scaladsl._</code>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L64-L69" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.typed.scaladsl.LoggerOps

Behaviors.receive[String] { (context, message) =&gt;
  context.log.info2(&quot;{} received message: {}&quot;, context.self.path.name, message)
  Behaviors.same
}</code></pre></dd>
</dl>
<p>When using the methods for 3 or more argument placeholders, the compiler will not be able to convert the method parameters to the vararg array when they contain primitive values such as <code>Int</code>, and report compiler error &ldquo;overloaded method value info with alternatives&rdquo;. To work around this problem you can use the <code>traceN</code>, <code>debugN</code>, <code>infoN</code>, <code>warnN</code> or <code>errorN</code> extension methods that are added by the same <code>LoggerOps</code> import.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L73-L82" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.typed.scaladsl.LoggerOps

Behaviors.receive[String] { (context, message) =&gt;
  context.log.infoN(
    &quot;{} received message of size {} starting with: {}&quot;,
    context.self.path.name,
    message.length,
    message.take(10))
  Behaviors.same
}</code></pre></dd>
</dl>
<p>If you find it tedious to add the import of <code>LoggerOps</code> at many places you can make those additional methods available with a single implicit conversion placed in a root package object of your code:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/myapp/package.scala#L8-L17" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import scala.language.implicitConversions
import akka.actor.typed.scaladsl.LoggerOps
import org.slf4j.Logger

package object myapp {

  implicit def loggerOps(logger: Logger): LoggerOps =
    LoggerOps(logger)

}</code></pre></dd>
</dl></div>
<h3><a href="#behaviors-logmessages" name="behaviors-logmessages" class="anchor"><span class="anchor-link"></span></a>Behaviors.logMessages</h3>
<p>If you want very detailed logging of messages and signals you can decorate a <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span> with <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/Behaviors.html#logMessages(akka.actor.typed.LogOptions,akka.actor.typed.Behavior)" title="akka.actor.typed.javadsl.Behaviors"><code>Behaviors.logMessages</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/Behaviors$.html#logMessages[T](logOptions:akka.actor.typed.LogOptions,behavior:akka.actor.typed.Behavior[T]):akka.actor.typed.Behavior[T]" title="akka.actor.typed.scaladsl.Behaviors"><code>Behaviors.logMessages</code></a></span>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L89-L92" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.typed.LogOptions
import org.slf4j.event.Level

Behaviors.logMessages(LogOptions().withLevel(Level.TRACE), BackendManager())</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L20-L104" target="_blank" title="Go to snippet source">source</a><code class="language-java">import org.slf4j.event.Level;

Behaviors.logMessages(LogOptions.create().withLevel(Level.TRACE), BackendManager.create());</code></pre></dd>
</dl>
<h2><a href="#mdc" name="mdc" class="anchor"><span class="anchor-link"></span></a>MDC</h2>
<p><a href="https://logback.qos.ch/manual/mdc.html">MDC</a> allows for adding additional context dependent attributes to log entries. Out of the box, Akka will place the path of the actor in the the MDC attribute <code>akkaSource</code>.</p>
<p>One or more tags can also be added to the MDC using the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/ActorTags$.html" title="akka.actor.typed.ActorTags"><code>ActorTags</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/ActorTags.html" title="akka.actor.typed.ActorTags"><code>ActorTags</code></a></span> props. The tags will be rendered as a comma separated list and be put in the MDC attribute <code>akkaTags</code>. This can be used to categorize log entries from a set of different actors to allow easier filtering of logs:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L148" target="_blank" title="Go to snippet source">source</a><code class="language-scala">context.spawn(myBehavior, &quot;MyActor&quot;, ActorTags(&quot;processing&quot;))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L193" target="_blank" title="Go to snippet source">source</a><code class="language-java">context.spawn(myBehavior, &quot;MyActor&quot;, ActorTags.create(&quot;processing&quot;));</code></pre></dd>
</dl>
<p>In addition to these two built in MDC attributes you can also decorate a <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Behavior.html" title="akka.actor.typed.Behavior"><code>Behavior</code></a></span> with <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/Behaviors.html#withMdc(java.lang.Class,java.util.Map,akka.japi.function.Function,akka.actor.typed.Behavior)" title="akka.actor.typed.javadsl.Behaviors"><code>Behaviors.withMdc</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/Behaviors$.html#withMdc[T](staticMdc:Map[String,String],mdcForMessage:T=%3EMap[String,String])(behavior:akka.actor.typed.Behavior[T])(implicitevidence$4:scala.reflect.ClassTag[T]):akka.actor.typed.Behavior[T]" title="akka.actor.typed.scaladsl.Behaviors"><code>Behaviors.withMdc</code></a></span> or use the <a href="https://www.slf4j.org/api/org/slf4j/MDC.html">org.slf4j.MDC</a> API directly.</p>
<p>The <code>Behaviors.withMdc</code> decorator has two parts. A static <code>Map</code> of MDC attributes that are not changed, and a dynamic <code>Map</code> that can be constructed for each message.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/scala/docs/akka/typed/LoggingDocExamples.scala#L100-L106" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val staticMdc = Map(&quot;startTime&quot; -&gt; system.startTime.toString)
Behaviors.withMdc[BackendManager.Command](
  staticMdc,
  mdcForMessage =
    (msg: BackendManager.Command) =&gt; Map(&quot;identifier&quot; -&gt; msg.identifier, &quot;upTime&quot; -&gt; system.uptime.toString)) {
  BackendManager()
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/java/jdocs/akka/typed/LoggingDocExamples.java#L132-L144" target="_blank" title="Go to snippet source">source</a><code class="language-java">Map&lt;String, String&gt; staticMdc = new HashMap&lt;&gt;();
staticMdc.put(&quot;startTime&quot;, String.valueOf(system.startTime()));

Behaviors.withMdc(
    BackendManager2.Command.class,
    staticMdc,
    message -&gt; {
      Map&lt;String, String&gt; msgMdc = new HashMap&lt;&gt;();
      msgMdc.put(&quot;identifier&quot;, message.identifier());
      msgMdc.put(&quot;upTime&quot;, String.valueOf(system.uptime()));
      return msgMdc;
    },
    BackendManager2.create());</code></pre></dd>
</dl>
<p>If you use the MDC API directly, be aware that MDC is typically implemented with a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ThreadLocal.html" title="java.lang.ThreadLocal"><code>ThreadLocal</code></a> by the SLF4J backend. Akka clears the MDC if logging is performed via the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html#log:org.slf4j.Logger" title="akka.actor.typed.scaladsl.ActorContext"><code>log</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html#getLog()" title="akka.actor.typed.javadsl.ActorContext"><code>getLog()</code></a></span> of the <code>ActorContext</code> and it is cleared automatically after processing of current message has finished, but only if you accessed <span class="group-scala"><code>log</code></span><span class="group-java"><code>getLog()</code></span>. The entire MDC is cleared, including attributes that you add yourself to the MDC. MDC is not cleared automatically if you use a <a href="https://www.slf4j.org/api/org/slf4j/Logger.html">Logger</a> via <a href="https://www.slf4j.org/api/org/slf4j/LoggerFactory.html">LoggerFactory</a> or not touch <span class="group-scala"><code>log</code></span><span class="group-java"><code>getLog()</code></span> in the <code>ActorContext</code>.</p>
<h2><a href="#slf4j-backend" name="slf4j-backend" class="anchor"><span class="anchor-link"></span></a>SLF4J backend</h2>
<p>To ensure that logging has minimal performance impact it&rsquo;s important that you configure an asynchronous appender for the SLF4J backend. Logging generally means IO and locks, which can slow down the operations of your code if it was performed synchronously.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>For production the SLF4J backend should be configured with an asynchronous appender as described here. Otherwise there is a risk of reduced performance and thread starvation problems of the dispatchers that are running actors and other tasks.</p></div>
<h3><a href="#logback" name="logback" class="anchor"><span class="anchor-link"></span></a>Logback</h3>
<p><code>akka-actor-typed</code> includes a dependency to the <code>slf4j-api</code>. In your runtime, you also need a SLF4J backend. We recommend <a href="https://logback.qos.ch/">Logback</a>:</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "ch.qos.logback" % "logback-classic" % "1.2.12"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
    &lt;version&gt;1.2.12&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  implementation "ch.qos.logback:logback-classic:1.2.12"
}</code></pre></dd></dl>
<p>Logback has flexible configuration options and details can be found in the <a href="https://logback.qos.ch/manual/configuration.html">Logback manual</a> and other external resources.</p>
<p>One part that is important to highlight is the importance of configuring an <a href="https://logback.qos.ch/manual/appenders.html#AsyncAppender">AsyncAppender</a>, because it offloads rendering of logging events to a background thread, increasing performance. It doesn&rsquo;t block the threads of the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/ActorSystem.html" title="akka.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/ActorSystem.html" title="akka.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> while the underlying infrastructure writes the log messages to disk or other configured destination. It also contains a feature which will drop <code>INFO</code> and <code>DEBUG</code> messages if the logging load is high.</p>
<p>A starting point for configuration of <code>logback.xml</code> for production:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/resources/logback-doc-prod.xml" target="_blank" title="Go to snippet source">source</a><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;

    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;file&gt;myapp.log&lt;/file&gt;
        &lt;immediateFlush&gt;false&lt;/immediateFlush&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
            &lt;fileNamePattern&gt;myapp_%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
        &lt;/rollingPolicy&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;[%date{ISO8601}] [%level] [%logger] [%marker] [%thread] - %msg MDC: {%mdc}%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;ASYNC&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;
        &lt;queueSize&gt;8192&lt;/queueSize&gt;
        &lt;neverBlock&gt;true&lt;/neverBlock&gt;
        &lt;appender-ref ref=&quot;FILE&quot; /&gt;
    &lt;/appender&gt;

    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;ASYNC&quot;/&gt;
    &lt;/root&gt;
&lt;/configuration&gt;</code></pre>
<p>Note that the <a href="https://logback.qos.ch/apidocs/ch/qos/logback/classic/AsyncAppender.html">AsyncAppender</a> may drop log events if the queue becomes full, which may happen if the logging backend can&rsquo;t keep up with the throughput of produced log events. Dropping log events is necessary if you want to gracefully degrade your application if only your logging backend or filesystem is experiencing issues. </p>
<p>An alternative of the Logback <code>AsyncAppender</code> with better performance is the <a href="https://github.com/logstash/logstash-logback-encoder#async-appenders">Logstash async appender</a>.</p>
<p>The ELK-stack is commonly used as logging infrastructure for production:</p>
<ul>
  <li><a href="https://github.com/logstash/logstash-logback-encoder">Logstash Logback encoder</a></li>
  <li><a href="https://www.elastic.co/guide/en/logstash/current/index.html">Logstash</a></li>
  <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">Elasticsearch</a></li>
  <li><a href="https://www.elastic.co/guide/en/kibana/current/index.html">Kibana</a></li>
</ul>
<p>For development you might want to log to standard out, but also have all debug level logging to file, like in this example:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-actor-typed-tests/src/test/resources/logback-doc-dev.xml" target="_blank" title="Go to snippet source">source</a><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;

    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
            &lt;level&gt;INFO&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;[%date{ISO8601}] [%level] [%logger] [%marker] [%thread] - %msg MDC: {%mdc}%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;
        &lt;file&gt;target/myapp-dev.log&lt;/file&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;[%date{ISO8601}] [%level] [%logger] [%marker] [%thread] - %msg MDC: {%mdc}%n&lt;/pattern&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;root level=&quot;DEBUG&quot;&gt;
        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;
        &lt;appender-ref ref=&quot;FILE&quot;/&gt;
    &lt;/root&gt;
&lt;/configuration&gt;</code></pre>
<p>Place the <code>logback.xml</code> file in <code>src/main/resources/logback.xml</code>. For tests you can define different logging configuration in <code>src/test/resources/logback-test.xml</code>.</p>
<h4><a href="#mdc-values" name="mdc-values" class="anchor"><span class="anchor-link"></span></a>MDC values</h4>
<p>When logging via the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/scaladsl/ActorContext.html#log:org.slf4j.Logger" title="akka.actor.typed.scaladsl.ActorContext"><code>log</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/javadsl/ActorContext.html#getLog()" title="akka.actor.typed.javadsl.ActorContext"><code>getLog()</code></a></span> of the <code>ActorContext</code>, as described in <a href="logging.html#how-to-log">How to log</a>, Akka includes a few MDC properties:</p>
<ul>
  <li><code>akkaSource</code>: the actor&rsquo;s path</li>
  <li><code>akkaAddress</code>: the full address of the ActorSystem, including hostname and port if Cluster is enabled</li>
  <li><code>akkaTags</code>: tags defined in the <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/typed/Props.html" title="akka.actor.typed.Props"><code>Props</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/typed/Props.html" title="akka.actor.typed.Props"><code>Props</code></a></span> of the actor</li>
  <li><code>sourceActorSystem</code>: the name of the ActorSystem</li>
</ul>
<p>These MDC properties can be included in the Logback output with for example <code>%X{akkaSource}</code> specifier within the <a href="https://logback.qos.ch/manual/layouts.html#mdc">pattern layout configuration</a>:</p>
<pre><code>  &lt;encoder&gt;
    &lt;pattern&gt;%date{ISO8601} %-5level %logger{36} %X{akkaSource} - %msg%n&lt;/pattern&gt;
  &lt;/encoder&gt;
</code></pre>
<p>All MDC properties as key-value entries can be included with <code>%mdc</code>:</p>
<pre><code>  &lt;encoder&gt;
    &lt;pattern&gt;%date{ISO8601} %-5level %logger{36} - %msg MDC: {%mdc}%n&lt;/pattern&gt;
  &lt;/encoder&gt;
</code></pre>
<h2><a href="#internal-logging-by-akka" name="internal-logging-by-akka" class="anchor"><span class="anchor-link"></span></a>Internal logging by Akka</h2>
<h3><a href="#event-bus" name="event-bus" class="anchor"><span class="anchor-link"></span></a>Event bus</h3>
<p>For historical reasons logging by the Akka internals and by classic actors are performed asynchronously through an event bus. Such log events are processed by an event handler actor, which then emits them to SLF4J or directly to standard out.</p>
<p>When <code>akka-actor-typed</code> and <code>akka-slf4j</code> are on the classpath this event handler actor will emit the events to SLF4J. The <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/event/slf4j/Slf4jLogger.html" title="akka.event.slf4j.Slf4jLogger"><code>akka.event.slf4j.Slf4jLogger</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/event/slf4j/Slf4jLogger.html" title="akka.event.slf4j.Slf4jLogger"><code>akka.event.slf4j.Slf4jLogger</code></a></span> and <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/event/slf4j/Slf4jLoggingFilter.html" title="akka.event.slf4j.Slf4jLoggingFilter"><code>akka.event.slf4j.Slf4jLoggingFilter</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/event/slf4j/Slf4jLoggingFilter.html" title="akka.event.slf4j.Slf4jLoggingFilter"><code>akka.event.slf4j.Slf4jLoggingFilter</code></a></span> are enabled automatically without additional configuration. This can be disabled by <code>akka.use-slf4j=off</code> configuration property.</p>
<p>In other words, you don&rsquo;t have to do anything for the Akka internal logging to end up in your configured SLF4J backend.</p>
<h3><a href="#log-level" name="log-level" class="anchor"><span class="anchor-link"></span></a>Log level</h3>
<p>Ultimately the log level defined in the SLF4J backend is used. For the Akka internal logging it will also check the level defined by the SLF4J backend before constructing the final log message and emitting it to the event bus.</p>
<p>However, there is an additional <code>akka.loglevel</code> configuration property that defines if logging events with lower log level should be discarded immediately without consulting the SLF4J backend. By default this is at <code>INFO</code> level, which means that <code>DEBUG</code> level logging from the Akka internals will not reach the SLF4J backend even if <code>DEBUG</code> is enabled in the backend.</p>
<p>You can enable <code>DEBUG</code> level for <code>akka.loglevel</code> and control the actual level in the SLF4j backend without any significant overhead, also for production.</p>
<pre><code>akka.loglevel = &quot;DEBUG&quot;
</code></pre>
<p>To turn off all Akka internal logging (not recommended) you can configure the log levels to be <code>OFF</code> like this.</p>
<pre><code>akka {
  stdout-loglevel = &quot;OFF&quot;
  loglevel = &quot;OFF&quot;
}
</code></pre>
<p>The <code>stdout-loglevel</code> is only in effect during system startup and shutdown, and setting it to <code>OFF</code> as well, ensures that nothing gets logged during system startup or shutdown.</p>
<p>See <a href="logging.html#logger-names">Logger names</a> for configuration of log level in SLF4J backend for certain modules of Akka.</p>
<h3><a href="#logging-to-stdout-during-startup-and-shutdown" name="logging-to-stdout-during-startup-and-shutdown" class="anchor"><span class="anchor-link"></span></a>Logging to stdout during startup and shutdown</h3>
<p>When the actor system is starting up and shutting down the configured <code>loggers</code> are not used. Instead log messages are printed to stdout (System.out). The default log level for this stdout logger is <code>WARNING</code> and it can be silenced completely by setting <code>akka.stdout-loglevel=OFF</code>.</p>
<h3><a href="#logging-of-dead-letters" name="logging-of-dead-letters" class="anchor"><span class="anchor-link"></span></a>Logging of Dead Letters</h3>
<p>By default messages sent to dead letters are logged at info level. Existence of dead letters does not necessarily indicate a problem, but they are logged by default for the sake of caution. After a few messages this logging is turned off, to avoid flooding the logs. You can disable this logging completely or adjust how many dead letters are logged. During system shutdown it is likely that you see dead letters, since pending messages in the actor mailboxes are sent to dead letters. You can also disable logging of dead letters during shutdown.</p>
<pre><code>akka {
  log-dead-letters = 10
  log-dead-letters-during-shutdown = on
}
</code></pre>
<p>To customize the logging further or take other actions for dead letters you can subscribe to the <a href="../event-bus.html#event-stream">Event Stream</a>.</p>
<h3><a href="#auxiliary-logging-options" name="auxiliary-logging-options" class="anchor"><span class="anchor-link"></span></a>Auxiliary logging options</h3>
<p>Akka has a few configuration options for very low level debugging. These make more sense in development than in production.</p>
<p>You almost definitely need to have logging set to DEBUG to use any of the options below:</p>
<pre><code>akka {
  loglevel = &quot;DEBUG&quot;
}
</code></pre>
<p>This config option is very good if you want to know what config settings are loaded by Akka:</p>
<pre><code>akka {
  # Log the complete configuration at INFO level when the actor system is started.
  # This is useful when you are uncertain of what configuration is used.
  log-config-on-start = on
}
</code></pre>
<p>If you want unhandled messages logged at DEBUG:</p>
<pre><code>akka {
  actor {
    debug {
      # enable DEBUG logging of unhandled messages
      unhandled = on
    }
  }
}
</code></pre>
<p>If you want to monitor subscriptions (subscribe/unsubscribe) on the ActorSystem.eventStream:</p>
<pre><code>akka {
  actor {
    debug {
      # enable DEBUG logging of subscription changes on the eventStream
      event-stream = on
    }
  }
}
</code></pre>
<a id="logging-remote"></a>
<h3><a href="#auxiliary-remote-logging-options" name="auxiliary-remote-logging-options" class="anchor"><span class="anchor-link"></span></a>Auxiliary remote logging options</h3>
<p>If you want to see all messages that are sent through remoting at DEBUG log level, use the following config option. Note that this logs the messages as they are sent by the transport layer, not by an actor.</p>
<pre><code>akka.remote.artery {
  # If this is &quot;on&quot;, Akka will log all outbound messages at DEBUG level,
  # if off then they are not logged
  log-sent-messages = on
}
</code></pre>
<p>If you want to see all messages that are received through remoting at DEBUG log level, use the following config option. Note that this logs the messages as they are received by the transport layer, not by an actor.</p>
<pre><code>akka.remote.artery {
  # If this is &quot;on&quot;, Akka will log all inbound messages at DEBUG level,
  # if off then they are not logged
  log-received-messages = on
}
</code></pre>
<p>Logging of message types with payload size in bytes larger than the configured <code>log-frame-size-exceeding</code>.</p>
<pre><code>akka.remote.artery {
  log-frame-size-exceeding = 10000b
}
</code></pre>
<h3><a href="#mdc-values-from-akka-internal-logging" name="mdc-values-from-akka-internal-logging" class="anchor"><span class="anchor-link"></span></a>MDC values from Akka internal logging</h3>
<p>Since the logging is done asynchronously, the thread in which the logging was performed is captured in MDC with attribute name <code>sourceThread</code>.</p>
<p>The path of the actor in which the logging was performed is available in the MDC with attribute name <code>akkaSource</code>.</p>
<p>The actor system name in which the logging was performed is available in the MDC with attribute name <code>sourceActorSystem</code>, but that is typically also included in the <code>akkaSource</code> attribute.</p>
<p>The address of the actor system, containing host and port if the system is using cluster, is available through <code>akkaAddress</code>.</p>
<p>For typed actors the log event timestamp is taken when the log call was made but for Akka&rsquo;s <em>internal</em> logging as well as the classic actor logging is asynchronous which means that the timestamp of a log entry is taken from when the underlying logger implementation is called, which can be surprising at first. If you want to more accurately output the timestamp for such loggers, use the MDC attribute <code>akkaTimestamp</code>. Note that the MDC key will not have any value for a typed actor.</p>
<h3><a href="#markers" name="markers" class="anchor"><span class="anchor-link"></span></a>Markers</h3>
<p>Akka is logging some events with markers. Some of these events also include structured MDC properties. </p>
<ul>
  <li>The &ldquo;SECURITY&rdquo; marker is used for highlighting security related events or incidents.</li>
  <li>Akka Actor is using the markers defined in <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ActorLogMarker$.html" title="akka.actor.ActorLogMarker"><code>ActorLogMarker</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ActorLogMarker.html" title="akka.actor.ActorLogMarker"><code>ActorLogMarker</code></a></span>.</li>
  <li>Akka Cluster is using the markers defined in <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/cluster/ClusterLogMarker$.html" title="akka.cluster.ClusterLogMarker"><code>ClusterLogMarker</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/cluster/ClusterLogMarker.html" title="akka.cluster.ClusterLogMarker"><code>ClusterLogMarker</code></a></span>.</li>
  <li>Akka Remoting is using the markers defined in <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/remote/RemoteLogMarker$.html" title="akka.remote.RemoteLogMarker"><code>RemoteLogMarker</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/remote/RemoteLogMarker.html" title="akka.remote.RemoteLogMarker"><code>RemoteLogMarker</code></a></span>.</li>
  <li>Akka Cluster Sharding is using the markers defined in <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/cluster/sharding/ShardingLogMarker$.html" title="akka.cluster.sharding.ShardingLogMarker"><code>ShardingLogMarker</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/cluster/sharding/ShardingLogMarker.html" title="akka.cluster.sharding.ShardingLogMarker"><code>ShardingLogMarker</code></a></span>.</li>
</ul>
<p>Markers and MDC properties are automatically picked up by the <a href="https://github.com/logstash/logstash-logback-encoder">Logstash Logback encoder</a>.</p>
<p>The marker can be included in the Logback output with <code>%marker</code> and all MDC properties as key-value entries with <code>%mdc</code>.</p>
<pre><code>  &lt;encoder&gt;
    &lt;pattern&gt;[%date{ISO8601}] [%level] [%logger] [%marker] [%thread] - %msg MDC: {%mdc}%n&lt;/pattern&gt;
  &lt;/encoder&gt;
</code></pre>
<h3><a href="#logger-names" name="logger-names" class="anchor"><span class="anchor-link"></span></a>Logger names</h3>
<p>It can be useful to enable debug level or other SLF4J backend configuration for certain modules of Akka when troubleshooting. Those logger names are typically prefixed with the package name of the classes in that module. For example, in Logback the configuration may look like this to enable debug logging for Cluster Sharding: </p>
<pre><code>   &lt;logger name=&quot;akka.cluster.sharding&quot; level=&quot;DEBUG&quot; /&gt;

    &lt;root level=&quot;INFO&quot;&gt;
        &lt;appender-ref ref=&quot;ASYNC&quot;/&gt;
    &lt;/root&gt;
</code></pre>
<p>Other examples of logger names or prefixes:</p>
<pre><code>akka.cluster
akka.cluster.Cluster
akka.cluster.ClusterHeartbeat
akka.cluster.ClusterGossip
akka.cluster.ddata
akka.cluster.pubsub
akka.cluster.singleton
akka.cluster.sharding
akka.coordination.lease
akka.discovery
akka.persistence
akka.remote
</code></pre>
<h2><a href="#logging-in-tests" name="logging-in-tests" class="anchor"><span class="anchor-link"></span></a>Logging in tests</h2>
<p>Testing utilities are described in <a href="testing-async.html#test-of-logging">Testing</a>.</p>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../index-utilities.html"><i class="icon-prev"></i> <span class="link-prev">Utilities</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../common/circuitbreaker.html">Circuit Breaker <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka/tree/v2.9.0-M1/akka-docs/src/main/paradox/typed/logging.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../images/akka-icon.svg" />
<section class="copyright">
<div>Akka is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/groups.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/snippets.js"></script>
<script type="text/javascript" src="../js/magellan.js"></script>
<script type="text/javascript" src="../js/metadata-toggle.js"></script>
<script type="text/javascript" src="../js/lbHeader.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="../assets/js/warnOldDocs.js"></script>


</body>
</html>
