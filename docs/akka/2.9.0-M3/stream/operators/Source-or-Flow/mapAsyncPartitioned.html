<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>mapAsyncPartitioned &bull; Akka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/current/stream/operators/Source-or-Flow/mapAsyncPartitioned.html"/>
<script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../../../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../../../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/banner-2.css"/>
<link rel="shortcut icon" href="../../../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon-16x16.png"/>
<link rel="manifest" href="../../../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../../../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics NOTE this will stop processing data July 1st 2023. At which point this embed code can be removed-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>

<!-- Google Tag Manager: Updated May 17th 2023 - Cookie Compliance checks have been moved into Google Tag Manager -->
<script type="text/javascript">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>

</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="../../../images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../../../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.9.0-M3
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<select class="supergroup" name="BuildTool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-maven">Maven</option><option class="group" value="group-gradle">Gradle</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/index.html#module-info" class="header">Module info</a></li>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Akka Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a>
    <ul>
      <li><a href="../../../stream/operators/index.html#source-operators" class="header">Source operators</a></li>
      <li><a href="../../../stream/operators/index.html#sink-operators" class="header">Sink operators</a></li>
      <li><a href="../../../stream/operators/index.html#additional-sink-and-source-converters" class="header">Additional Sink and Source converters</a></li>
      <li><a href="../../../stream/operators/index.html#file-io-sinks-and-sources" class="header">File IO Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#simple-operators" class="header">Simple operators</a></li>
      <li><a href="../../../stream/operators/index.html#flow-operators-composed-of-sinks-and-sources" class="header">Flow operators composed of Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#asynchronous-operators" class="header">Asynchronous operators</a></li>
      <li><a href="../../../stream/operators/index.html#timer-driven-operators" class="header">Timer driven operators</a></li>
      <li><a href="../../../stream/operators/index.html#backpressure-aware-operators" class="header">Backpressure aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#nesting-and-flattening-operators" class="header">Nesting and flattening operators</a></li>
      <li><a href="../../../stream/operators/index.html#time-aware-operators" class="header">Time aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-in-operators" class="header">Fan-in operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-out-operators" class="header">Fan-out operators</a></li>
      <li><a href="../../../stream/operators/index.html#watching-status-operators" class="header">Watching status operators</a></li>
      <li><a href="../../../stream/operators/index.html#actor-interop-operators" class="header">Actor interop operators</a></li>
      <li><a href="../../../stream/operators/index.html#compression-operators" class="header">Compression operators</a></li>
      <li><a href="../../../stream/operators/index.html#error-handling" class="header">Error handling</a></li>
      <li><a href="../../../stream/operators/Source/actorRef.html" class="page">Source.actorRef</a></li>
      <li><a href="../../../stream/operators/Sink/actorRef.html" class="page">Sink.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRef.html" class="page">ActorSource.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRef.html" class="page">ActorSink.actorRef</a></li>
      <li><a href="../../../stream/operators/Source/actorRefWithBackpressure.html" class="page">Source.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Sink/actorRefWithBackpressure.html" class="page">Sink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRefWithBackpressure.html" class="page">ActorSource.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRefWithBackpressure.html" class="page">ActorSink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/aggregateWithBoundary.html" class="page">aggregateWithBoundary</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoTo.html" class="page">alsoTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoToAll.html" class="page">alsoToAll</a></li>
      <li><a href="../../../stream/operators/Flow/asFlowWithContext.html" class="page">Flow.asFlowWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asInputStream.html" class="page">StreamConverters.asInputStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asJavaStream.html" class="page">StreamConverters.asJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/ask.html" class="page">ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/ask.html" class="page">ActorFlow.ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatus.html" class="page">ActorFlow.askWithStatus</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatusAndContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asOutputStream.html" class="page">StreamConverters.asOutputStream</a></li>
      <li><a href="../../../stream/operators/Sink/asPublisher.html" class="page">Sink.asPublisher</a></li>
      <li><a href="../../../stream/operators/Source/asSourceWithContext.html" class="page">Source.asSourceWithContext</a></li>
      <li><a href="../../../stream/operators/Source/asSubscriber.html" class="page">Source.asSubscriber</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/backpressureTimeout.html" class="page">backpressureTimeout</a></li>
      <li><a href="../../../stream/operators/Balance.html" class="page">Balance</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batch.html" class="page">batch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batchWeighted.html" class="page">batchWeighted</a></li>
      <li><a href="../../../stream/operators/Broadcast.html" class="page">Broadcast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/buffer.html" class="page">buffer</a></li>
      <li><a href="../../../stream/operators/Sink/cancelled.html" class="page">Sink.cancelled</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collect.html" class="page">collect</a></li>
      <li><a href="../../../stream/operators/Sink/collect.html" class="page">Sink.collect</a></li>
      <li><a href="../../../stream/operators/Sink/collection.html" class="page">Sink.collection</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collectType.html" class="page">collectType</a></li>
      <li><a href="../../../stream/operators/Source/combine.html" class="page">Source.combine</a></li>
      <li><a href="../../../stream/operators/Sink/combine.html" class="page">Sink.combine</a></li>
      <li><a href="../../../stream/operators/Source/completionStage.html" class="page">Source.completionStage</a></li>
      <li><a href="../../../stream/operators/Flow/completionStageFlow.html" class="page">Flow.completionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/completionStageSink.html" class="page">Sink.completionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/completionStageSource.html" class="page">Source.completionStageSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/completionTimeout.html" class="page">completionTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concat.html" class="page">concat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatAllLazy.html" class="page">concatAllLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatLazy.html" class="page">concatLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflate.html" class="page">conflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflateWithSeed.html" class="page">conflateWithSeed</a></li>
      <li><a href="../../../stream/operators/Flow/contramap.html" class="page">contramap</a></li>
      <li><a href="../../../stream/operators/Source/cycle.html" class="page">Source.cycle</a></li>
      <li><a href="../../../stream/operators/Compression/deflate.html" class="page">Compression.deflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delay.html" class="page">delay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delayWith.html" class="page">delayWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/detach.html" class="page">detach</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/divertTo.html" class="page">divertTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/drop.html" class="page">drop</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWhile.html" class="page">dropWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWithin.html" class="page">dropWithin</a></li>
      <li><a href="../../../stream/operators/Source/empty.html" class="page">Source.empty</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/expand.html" class="page">expand</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/extrapolate.html" class="page">extrapolate</a></li>
      <li><a href="../../../stream/operators/Source/failed.html" class="page">Source.failed</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filter.html" class="page">filter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filterNot.html" class="page">filterNot</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapConcat.html" class="page">flatMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapMerge.html" class="page">flatMapMerge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapPrefix.html" class="page">flatMapPrefix</a></li>
      <li><a href="../../../stream/operators/Flow/flattenOptional.html" class="page">Flow.flattenOptional</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fold.html" class="page">fold</a></li>
      <li><a href="../../../stream/operators/Sink/fold.html" class="page">Sink.fold</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/foldAsync.html" class="page">foldAsync</a></li>
      <li><a href="../../../stream/operators/Sink/foreach.html" class="page">Sink.foreach</a></li>
      <li><a href="../../../stream/operators/Sink/foreachAsync.html" class="page">Sink.foreachAsync</a></li>
      <li><a href="../../../stream/operators/Source/from.html" class="page"><span class="group-scala">Source.apply</span><span class="group-java">Source.from</span></a></li>
      <li><a href="../../../stream/operators/Source/fromCompletionStage.html" class="page">Source.fromCompletionStage</a></li>
      <li><a href="../../../stream/operators/FileIO/fromFile.html" class="page">FileIO.fromFile</a></li>
      <li><a href="../../../stream/operators/Source/fromFuture.html" class="page">Source.fromFuture</a></li>
      <li><a href="../../../stream/operators/Source/fromFutureSource.html" class="page">Source.fromFutureSource</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromInputStream.html" class="page">StreamConverters.fromInputStream</a></li>
      <li><a href="../../../stream/operators/Source/fromIterator.html" class="page">Source.fromIterator</a></li>
      <li><a href="../../../stream/operators/Source/fromJavaStream.html" class="page">fromJavaStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromJavaStream.html" class="page">StreamConverters.fromJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fromMaterializer.html" class="page">fromMaterializer</a></li>
      <li><a href="../../../stream/operators/Sink/fromMaterializer.html" class="page">Sink.fromMaterializer</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromOutputStream.html" class="page">StreamConverters.fromOutputStream</a></li>
      <li><a href="../../../stream/operators/FileIO/fromPath.html" class="page">FileIO.fromPath</a></li>
      <li><a href="../../../stream/operators/Source/fromPublisher.html" class="page">Source.fromPublisher</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSource.html" class="page">Flow.fromSinkAndSource</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSourceCoupled.html" class="page">Flow.fromSinkAndSourceCoupled</a></li>
      <li><a href="../../../stream/operators/Source/fromSourceCompletionStage.html" class="page">Source.fromSourceCompletionStage</a></li>
      <li><a href="../../../stream/operators/Sink/fromSubscriber.html" class="page">Sink.fromSubscriber</a></li>
      <li><a href="../../../stream/operators/Source/future.html" class="page">Source.future</a></li>
      <li><a href="../../../stream/operators/Flow/futureFlow.html" class="page">Flow.futureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/futureSink.html" class="page">Sink.futureSink</a></li>
      <li><a href="../../../stream/operators/Source/futureSource.html" class="page">Source.futureSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupBy.html" class="page">groupBy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/grouped.html" class="page">grouped</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeighted.html" class="page">groupedWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeightedWithin.html" class="page">groupedWeightedWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWithin.html" class="page">groupedWithin</a></li>
      <li><a href="../../../stream/operators/Compression/gunzip.html" class="page">Compression.gunzip</a></li>
      <li><a href="../../../stream/operators/Compression/gzip.html" class="page">Compression.gzip</a></li>
      <li><a href="../../../stream/operators/Sink/head.html" class="page">Sink.head</a></li>
      <li><a href="../../../stream/operators/Sink/headOption.html" class="page">Sink.headOption</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/idleTimeout.html" class="page">idleTimeout</a></li>
      <li><a href="../../../stream/operators/Sink/ignore.html" class="page">Sink.ignore</a></li>
      <li><a href="../../../stream/operators/Compression/inflate.html" class="page">Compression.inflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialDelay.html" class="page">initialDelay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialTimeout.html" class="page">initialTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleave.html" class="page">interleave</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleaveAll.html" class="page">interleaveAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/intersperse.html" class="page">intersperse</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollector.html" class="page">StreamConverters.javaCollector</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollectorParallelUnordered.html" class="page">StreamConverters.javaCollectorParallelUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/keepAlive.html" class="page">keepAlive</a></li>
      <li><a href="../../../stream/operators/Sink/last.html" class="page">Sink.last</a></li>
      <li><a href="../../../stream/operators/Sink/lastOption.html" class="page">Sink.lastOption</a></li>
      <li><a href="../../../stream/operators/Source/lazily.html" class="page">Source.lazily</a></li>
      <li><a href="../../../stream/operators/Source/lazilyAsync.html" class="page">Source.lazilyAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStage.html" class="page">Source.lazyCompletionStage</a></li>
      <li><a href="../../../stream/operators/Flow/lazyCompletionStageFlow.html" class="page">Flow.lazyCompletionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyCompletionStageSink.html" class="page">Sink.lazyCompletionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStageSource.html" class="page">Source.lazyCompletionStageSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFlow.html" class="page">Flow.lazyFlow</a></li>
      <li><a href="../../../stream/operators/Source/lazyFuture.html" class="page">Source.lazyFuture</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFutureFlow.html" class="page">Flow.lazyFutureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyFutureSink.html" class="page">Sink.lazyFutureSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyFutureSource.html" class="page">Source.lazyFutureSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyInitAsync.html" class="page">Flow.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Sink/lazyInitAsync.html" class="page">Sink.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazySingle.html" class="page">Source.lazySingle</a></li>
      <li><a href="../../../stream/operators/Sink/lazySink.html" class="page">Sink.lazySink</a></li>
      <li><a href="../../../stream/operators/Source/lazySource.html" class="page">Source.lazySource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limit.html" class="page">limit</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limitWeighted.html" class="page">limitWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/log.html" class="page">log</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/logWithMarker.html" class="page">logWithMarker</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/map.html" class="page">map</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsync.html" class="page">mapAsync</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#mapasyncpartitioned" class="active page">mapAsyncPartitioned</a>
      <ul>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#signature" class="header">Signature</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#description" class="header">Description</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#examples" class="header">Examples</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
      </ul></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncUnordered.html" class="page">mapAsyncUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapConcat.html" class="page">mapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapError.html" class="page">mapError</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapWithResource.html" class="page">mapWithResource</a></li>
      <li><a href="../../../stream/operators/Source/maybe.html" class="page">Source.maybe</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/merge.html" class="page">merge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeAll.html" class="page">mergeAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeLatest.html" class="page">mergeLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePreferred.html" class="page">mergePreferred</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePrioritized.html" class="page">mergePrioritized</a></li>
      <li><a href="../../../stream/operators/Source/mergePrioritizedN.html" class="page">mergePrioritizedN</a></li>
      <li><a href="../../../stream/operators/MergeSequence.html" class="page">MergeSequence</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeSorted.html" class="page">mergeSorted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/monitor.html" class="page">monitor</a></li>
      <li><a href="../../../stream/operators/Source/never.html" class="page">never</a></li>
      <li><a href="../../../stream/operators/Sink/never.html" class="page">Sink.never</a></li>
      <li><a href="../../../stream/operators/Sink/onComplete.html" class="page">Sink.onComplete</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/onErrorComplete.html" class="page">onErrorComplete</a></li>
      <li><a href="../../../stream/operators/RestartSource/onFailuresWithBackoff.html" class="page">RestartSource.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/onFailuresWithBackoff.html" class="page">RestartFlow.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/orElse.html" class="page">orElse</a></li>
      <li><a href="../../../stream/operators/Partition.html" class="page">Partition</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prefixAndTail.html" class="page">prefixAndTail</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/preMaterialize.html" class="page">preMaterialize</a></li>
      <li><a href="../../../stream/operators/Sink/preMaterialize.html" class="page">Sink.preMaterialize</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prepend.html" class="page">prepend</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prependLazy.html" class="page">prependLazy</a></li>
      <li><a href="../../../stream/operators/Source/queue.html" class="page">Source.queue</a></li>
      <li><a href="../../../stream/operators/Sink/queue.html" class="page">Sink.queue</a></li>
      <li><a href="../../../stream/operators/Source/range.html" class="page">Source.range</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recover.html" class="page">recover</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWith.html" class="page">recoverWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWithRetries.html" class="page">recoverWithRetries</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/reduce.html" class="page">reduce</a></li>
      <li><a href="../../../stream/operators/Sink/reduce.html" class="page">Sink.reduce</a></li>
      <li><a href="../../../stream/operators/Source/repeat.html" class="page">Source.repeat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scan.html" class="page">scan</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scanAsync.html" class="page">scanAsync</a></li>
      <li><a href="../../../stream/operators/Sink/seq.html" class="page">Sink.seq</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/setup.html" class="page">setup</a></li>
      <li><a href="../../../stream/operators/Sink/setup.html" class="page">Sink.setup</a></li>
      <li><a href="../../../stream/operators/Source/single.html" class="page">Source.single</a></li>
      <li><a href="../../../stream/operators/PubSub/sink.html" class="page">PubSub.sink</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/sliding.html" class="page">sliding</a></li>
      <li><a href="../../../stream/operators/PubSub/source.html" class="page">PubSub.source</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitAfter.html" class="page">splitAfter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitWhen.html" class="page">splitWhen</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMap.html" class="page">statefulMap</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html" class="page">statefulMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/take.html" class="page">take</a></li>
      <li><a href="../../../stream/operators/Sink/takeLast.html" class="page">Sink.takeLast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWhile.html" class="page">takeWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWithin.html" class="page">takeWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/throttle.html" class="page">throttle</a></li>
      <li><a href="../../../stream/operators/Source/tick.html" class="page">Source.tick</a></li>
      <li><a href="../../../stream/operators/FileIO/toFile.html" class="page">FileIO.toFile</a></li>
      <li><a href="../../../stream/operators/FileIO/toPath.html" class="page">FileIO.toPath</a></li>
      <li><a href="../../../stream/operators/Source/unfold.html" class="page">Source.unfold</a></li>
      <li><a href="../../../stream/operators/Source/unfoldAsync.html" class="page">Source.unfoldAsync</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResource.html" class="page">Source.unfoldResource</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResourceAsync.html" class="page">Source.unfoldResourceAsync</a></li>
      <li><a href="../../../stream/operators/Unzip.html" class="page">Unzip</a></li>
      <li><a href="../../../stream/operators/UnzipWith.html" class="page">UnzipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watch.html" class="page">watch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watchTermination.html" class="page">watchTermination</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/wireTap.html" class="page">wireTap</a></li>
      <li><a href="../../../stream/operators/RestartSource/withBackoff.html" class="page">RestartSource.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/withBackoff.html" class="page">RestartFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartSink/withBackoff.html" class="page">RestartSink.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoff.html" class="page">RetryFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoffAndContext.html" class="page">RetryFlow.withBackoffAndContext</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zip.html" class="page">zip</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipAll.html" class="page">zipAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatest.html" class="page">zipLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatestWith.html" class="page">zipLatestWith</a></li>
      <li><a href="../../../stream/operators/Source/zipN.html" class="page">Source.zipN</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWith.html" class="page">zipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWithIndex.html" class="page">zipWithIndex</a></li>
      <li><a href="../../../stream/operators/Source/zipWithN.html" class="page">Source.zipWithN</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a></li>
  <li><a href="../../../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="../../../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.9.0-M3
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<select class="supergroup" name="BuildTool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-maven">Maven</option><option class="group" value="group-gradle">Gradle</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/index.html#module-info" class="header">Module info</a></li>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Akka Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a>
    <ul>
      <li><a href="../../../stream/operators/index.html#source-operators" class="header">Source operators</a></li>
      <li><a href="../../../stream/operators/index.html#sink-operators" class="header">Sink operators</a></li>
      <li><a href="../../../stream/operators/index.html#additional-sink-and-source-converters" class="header">Additional Sink and Source converters</a></li>
      <li><a href="../../../stream/operators/index.html#file-io-sinks-and-sources" class="header">File IO Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#simple-operators" class="header">Simple operators</a></li>
      <li><a href="../../../stream/operators/index.html#flow-operators-composed-of-sinks-and-sources" class="header">Flow operators composed of Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#asynchronous-operators" class="header">Asynchronous operators</a></li>
      <li><a href="../../../stream/operators/index.html#timer-driven-operators" class="header">Timer driven operators</a></li>
      <li><a href="../../../stream/operators/index.html#backpressure-aware-operators" class="header">Backpressure aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#nesting-and-flattening-operators" class="header">Nesting and flattening operators</a></li>
      <li><a href="../../../stream/operators/index.html#time-aware-operators" class="header">Time aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-in-operators" class="header">Fan-in operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-out-operators" class="header">Fan-out operators</a></li>
      <li><a href="../../../stream/operators/index.html#watching-status-operators" class="header">Watching status operators</a></li>
      <li><a href="../../../stream/operators/index.html#actor-interop-operators" class="header">Actor interop operators</a></li>
      <li><a href="../../../stream/operators/index.html#compression-operators" class="header">Compression operators</a></li>
      <li><a href="../../../stream/operators/index.html#error-handling" class="header">Error handling</a></li>
      <li><a href="../../../stream/operators/Source/actorRef.html" class="page">Source.actorRef</a></li>
      <li><a href="../../../stream/operators/Sink/actorRef.html" class="page">Sink.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRef.html" class="page">ActorSource.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRef.html" class="page">ActorSink.actorRef</a></li>
      <li><a href="../../../stream/operators/Source/actorRefWithBackpressure.html" class="page">Source.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Sink/actorRefWithBackpressure.html" class="page">Sink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRefWithBackpressure.html" class="page">ActorSource.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRefWithBackpressure.html" class="page">ActorSink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/aggregateWithBoundary.html" class="page">aggregateWithBoundary</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoTo.html" class="page">alsoTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoToAll.html" class="page">alsoToAll</a></li>
      <li><a href="../../../stream/operators/Flow/asFlowWithContext.html" class="page">Flow.asFlowWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asInputStream.html" class="page">StreamConverters.asInputStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asJavaStream.html" class="page">StreamConverters.asJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/ask.html" class="page">ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/ask.html" class="page">ActorFlow.ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatus.html" class="page">ActorFlow.askWithStatus</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatusAndContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asOutputStream.html" class="page">StreamConverters.asOutputStream</a></li>
      <li><a href="../../../stream/operators/Sink/asPublisher.html" class="page">Sink.asPublisher</a></li>
      <li><a href="../../../stream/operators/Source/asSourceWithContext.html" class="page">Source.asSourceWithContext</a></li>
      <li><a href="../../../stream/operators/Source/asSubscriber.html" class="page">Source.asSubscriber</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/backpressureTimeout.html" class="page">backpressureTimeout</a></li>
      <li><a href="../../../stream/operators/Balance.html" class="page">Balance</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batch.html" class="page">batch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batchWeighted.html" class="page">batchWeighted</a></li>
      <li><a href="../../../stream/operators/Broadcast.html" class="page">Broadcast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/buffer.html" class="page">buffer</a></li>
      <li><a href="../../../stream/operators/Sink/cancelled.html" class="page">Sink.cancelled</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collect.html" class="page">collect</a></li>
      <li><a href="../../../stream/operators/Sink/collect.html" class="page">Sink.collect</a></li>
      <li><a href="../../../stream/operators/Sink/collection.html" class="page">Sink.collection</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collectType.html" class="page">collectType</a></li>
      <li><a href="../../../stream/operators/Source/combine.html" class="page">Source.combine</a></li>
      <li><a href="../../../stream/operators/Sink/combine.html" class="page">Sink.combine</a></li>
      <li><a href="../../../stream/operators/Source/completionStage.html" class="page">Source.completionStage</a></li>
      <li><a href="../../../stream/operators/Flow/completionStageFlow.html" class="page">Flow.completionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/completionStageSink.html" class="page">Sink.completionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/completionStageSource.html" class="page">Source.completionStageSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/completionTimeout.html" class="page">completionTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concat.html" class="page">concat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatAllLazy.html" class="page">concatAllLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatLazy.html" class="page">concatLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflate.html" class="page">conflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflateWithSeed.html" class="page">conflateWithSeed</a></li>
      <li><a href="../../../stream/operators/Flow/contramap.html" class="page">contramap</a></li>
      <li><a href="../../../stream/operators/Source/cycle.html" class="page">Source.cycle</a></li>
      <li><a href="../../../stream/operators/Compression/deflate.html" class="page">Compression.deflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delay.html" class="page">delay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delayWith.html" class="page">delayWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/detach.html" class="page">detach</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/divertTo.html" class="page">divertTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/drop.html" class="page">drop</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWhile.html" class="page">dropWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWithin.html" class="page">dropWithin</a></li>
      <li><a href="../../../stream/operators/Source/empty.html" class="page">Source.empty</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/expand.html" class="page">expand</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/extrapolate.html" class="page">extrapolate</a></li>
      <li><a href="../../../stream/operators/Source/failed.html" class="page">Source.failed</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filter.html" class="page">filter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filterNot.html" class="page">filterNot</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapConcat.html" class="page">flatMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapMerge.html" class="page">flatMapMerge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapPrefix.html" class="page">flatMapPrefix</a></li>
      <li><a href="../../../stream/operators/Flow/flattenOptional.html" class="page">Flow.flattenOptional</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fold.html" class="page">fold</a></li>
      <li><a href="../../../stream/operators/Sink/fold.html" class="page">Sink.fold</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/foldAsync.html" class="page">foldAsync</a></li>
      <li><a href="../../../stream/operators/Sink/foreach.html" class="page">Sink.foreach</a></li>
      <li><a href="../../../stream/operators/Sink/foreachAsync.html" class="page">Sink.foreachAsync</a></li>
      <li><a href="../../../stream/operators/Source/from.html" class="page"><span class="group-scala">Source.apply</span><span class="group-java">Source.from</span></a></li>
      <li><a href="../../../stream/operators/Source/fromCompletionStage.html" class="page">Source.fromCompletionStage</a></li>
      <li><a href="../../../stream/operators/FileIO/fromFile.html" class="page">FileIO.fromFile</a></li>
      <li><a href="../../../stream/operators/Source/fromFuture.html" class="page">Source.fromFuture</a></li>
      <li><a href="../../../stream/operators/Source/fromFutureSource.html" class="page">Source.fromFutureSource</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromInputStream.html" class="page">StreamConverters.fromInputStream</a></li>
      <li><a href="../../../stream/operators/Source/fromIterator.html" class="page">Source.fromIterator</a></li>
      <li><a href="../../../stream/operators/Source/fromJavaStream.html" class="page">fromJavaStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromJavaStream.html" class="page">StreamConverters.fromJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fromMaterializer.html" class="page">fromMaterializer</a></li>
      <li><a href="../../../stream/operators/Sink/fromMaterializer.html" class="page">Sink.fromMaterializer</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromOutputStream.html" class="page">StreamConverters.fromOutputStream</a></li>
      <li><a href="../../../stream/operators/FileIO/fromPath.html" class="page">FileIO.fromPath</a></li>
      <li><a href="../../../stream/operators/Source/fromPublisher.html" class="page">Source.fromPublisher</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSource.html" class="page">Flow.fromSinkAndSource</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSourceCoupled.html" class="page">Flow.fromSinkAndSourceCoupled</a></li>
      <li><a href="../../../stream/operators/Source/fromSourceCompletionStage.html" class="page">Source.fromSourceCompletionStage</a></li>
      <li><a href="../../../stream/operators/Sink/fromSubscriber.html" class="page">Sink.fromSubscriber</a></li>
      <li><a href="../../../stream/operators/Source/future.html" class="page">Source.future</a></li>
      <li><a href="../../../stream/operators/Flow/futureFlow.html" class="page">Flow.futureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/futureSink.html" class="page">Sink.futureSink</a></li>
      <li><a href="../../../stream/operators/Source/futureSource.html" class="page">Source.futureSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupBy.html" class="page">groupBy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/grouped.html" class="page">grouped</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeighted.html" class="page">groupedWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeightedWithin.html" class="page">groupedWeightedWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWithin.html" class="page">groupedWithin</a></li>
      <li><a href="../../../stream/operators/Compression/gunzip.html" class="page">Compression.gunzip</a></li>
      <li><a href="../../../stream/operators/Compression/gzip.html" class="page">Compression.gzip</a></li>
      <li><a href="../../../stream/operators/Sink/head.html" class="page">Sink.head</a></li>
      <li><a href="../../../stream/operators/Sink/headOption.html" class="page">Sink.headOption</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/idleTimeout.html" class="page">idleTimeout</a></li>
      <li><a href="../../../stream/operators/Sink/ignore.html" class="page">Sink.ignore</a></li>
      <li><a href="../../../stream/operators/Compression/inflate.html" class="page">Compression.inflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialDelay.html" class="page">initialDelay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialTimeout.html" class="page">initialTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleave.html" class="page">interleave</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleaveAll.html" class="page">interleaveAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/intersperse.html" class="page">intersperse</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollector.html" class="page">StreamConverters.javaCollector</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollectorParallelUnordered.html" class="page">StreamConverters.javaCollectorParallelUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/keepAlive.html" class="page">keepAlive</a></li>
      <li><a href="../../../stream/operators/Sink/last.html" class="page">Sink.last</a></li>
      <li><a href="../../../stream/operators/Sink/lastOption.html" class="page">Sink.lastOption</a></li>
      <li><a href="../../../stream/operators/Source/lazily.html" class="page">Source.lazily</a></li>
      <li><a href="../../../stream/operators/Source/lazilyAsync.html" class="page">Source.lazilyAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStage.html" class="page">Source.lazyCompletionStage</a></li>
      <li><a href="../../../stream/operators/Flow/lazyCompletionStageFlow.html" class="page">Flow.lazyCompletionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyCompletionStageSink.html" class="page">Sink.lazyCompletionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStageSource.html" class="page">Source.lazyCompletionStageSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFlow.html" class="page">Flow.lazyFlow</a></li>
      <li><a href="../../../stream/operators/Source/lazyFuture.html" class="page">Source.lazyFuture</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFutureFlow.html" class="page">Flow.lazyFutureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyFutureSink.html" class="page">Sink.lazyFutureSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyFutureSource.html" class="page">Source.lazyFutureSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyInitAsync.html" class="page">Flow.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Sink/lazyInitAsync.html" class="page">Sink.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazySingle.html" class="page">Source.lazySingle</a></li>
      <li><a href="../../../stream/operators/Sink/lazySink.html" class="page">Sink.lazySink</a></li>
      <li><a href="../../../stream/operators/Source/lazySource.html" class="page">Source.lazySource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limit.html" class="page">limit</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limitWeighted.html" class="page">limitWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/log.html" class="page">log</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/logWithMarker.html" class="page">logWithMarker</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/map.html" class="page">map</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsync.html" class="page">mapAsync</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#mapasyncpartitioned" class="active page">mapAsyncPartitioned</a>
      <ul>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#signature" class="header">Signature</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#description" class="header">Description</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#examples" class="header">Examples</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
      </ul></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncUnordered.html" class="page">mapAsyncUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapConcat.html" class="page">mapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapError.html" class="page">mapError</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapWithResource.html" class="page">mapWithResource</a></li>
      <li><a href="../../../stream/operators/Source/maybe.html" class="page">Source.maybe</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/merge.html" class="page">merge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeAll.html" class="page">mergeAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeLatest.html" class="page">mergeLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePreferred.html" class="page">mergePreferred</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePrioritized.html" class="page">mergePrioritized</a></li>
      <li><a href="../../../stream/operators/Source/mergePrioritizedN.html" class="page">mergePrioritizedN</a></li>
      <li><a href="../../../stream/operators/MergeSequence.html" class="page">MergeSequence</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeSorted.html" class="page">mergeSorted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/monitor.html" class="page">monitor</a></li>
      <li><a href="../../../stream/operators/Source/never.html" class="page">never</a></li>
      <li><a href="../../../stream/operators/Sink/never.html" class="page">Sink.never</a></li>
      <li><a href="../../../stream/operators/Sink/onComplete.html" class="page">Sink.onComplete</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/onErrorComplete.html" class="page">onErrorComplete</a></li>
      <li><a href="../../../stream/operators/RestartSource/onFailuresWithBackoff.html" class="page">RestartSource.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/onFailuresWithBackoff.html" class="page">RestartFlow.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/orElse.html" class="page">orElse</a></li>
      <li><a href="../../../stream/operators/Partition.html" class="page">Partition</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prefixAndTail.html" class="page">prefixAndTail</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/preMaterialize.html" class="page">preMaterialize</a></li>
      <li><a href="../../../stream/operators/Sink/preMaterialize.html" class="page">Sink.preMaterialize</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prepend.html" class="page">prepend</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prependLazy.html" class="page">prependLazy</a></li>
      <li><a href="../../../stream/operators/Source/queue.html" class="page">Source.queue</a></li>
      <li><a href="../../../stream/operators/Sink/queue.html" class="page">Sink.queue</a></li>
      <li><a href="../../../stream/operators/Source/range.html" class="page">Source.range</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recover.html" class="page">recover</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWith.html" class="page">recoverWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWithRetries.html" class="page">recoverWithRetries</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/reduce.html" class="page">reduce</a></li>
      <li><a href="../../../stream/operators/Sink/reduce.html" class="page">Sink.reduce</a></li>
      <li><a href="../../../stream/operators/Source/repeat.html" class="page">Source.repeat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scan.html" class="page">scan</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scanAsync.html" class="page">scanAsync</a></li>
      <li><a href="../../../stream/operators/Sink/seq.html" class="page">Sink.seq</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/setup.html" class="page">setup</a></li>
      <li><a href="../../../stream/operators/Sink/setup.html" class="page">Sink.setup</a></li>
      <li><a href="../../../stream/operators/Source/single.html" class="page">Source.single</a></li>
      <li><a href="../../../stream/operators/PubSub/sink.html" class="page">PubSub.sink</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/sliding.html" class="page">sliding</a></li>
      <li><a href="../../../stream/operators/PubSub/source.html" class="page">PubSub.source</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitAfter.html" class="page">splitAfter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitWhen.html" class="page">splitWhen</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMap.html" class="page">statefulMap</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html" class="page">statefulMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/take.html" class="page">take</a></li>
      <li><a href="../../../stream/operators/Sink/takeLast.html" class="page">Sink.takeLast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWhile.html" class="page">takeWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWithin.html" class="page">takeWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/throttle.html" class="page">throttle</a></li>
      <li><a href="../../../stream/operators/Source/tick.html" class="page">Source.tick</a></li>
      <li><a href="../../../stream/operators/FileIO/toFile.html" class="page">FileIO.toFile</a></li>
      <li><a href="../../../stream/operators/FileIO/toPath.html" class="page">FileIO.toPath</a></li>
      <li><a href="../../../stream/operators/Source/unfold.html" class="page">Source.unfold</a></li>
      <li><a href="../../../stream/operators/Source/unfoldAsync.html" class="page">Source.unfoldAsync</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResource.html" class="page">Source.unfoldResource</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResourceAsync.html" class="page">Source.unfoldResourceAsync</a></li>
      <li><a href="../../../stream/operators/Unzip.html" class="page">Unzip</a></li>
      <li><a href="../../../stream/operators/UnzipWith.html" class="page">UnzipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watch.html" class="page">watch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watchTermination.html" class="page">watchTermination</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/wireTap.html" class="page">wireTap</a></li>
      <li><a href="../../../stream/operators/RestartSource/withBackoff.html" class="page">RestartSource.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/withBackoff.html" class="page">RestartFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartSink/withBackoff.html" class="page">RestartSink.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoff.html" class="page">RetryFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoffAndContext.html" class="page">RetryFlow.withBackoffAndContext</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zip.html" class="page">zip</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipAll.html" class="page">zipAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatest.html" class="page">zipLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatestWith.html" class="page">zipLatestWith</a></li>
      <li><a href="../../../stream/operators/Source/zipN.html" class="page">Source.zipN</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWith.html" class="page">zipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWithIndex.html" class="page">zipWithIndex</a></li>
      <li><a href="../../../stream/operators/Source/zipWithN.html" class="page">Source.zipWithN</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a></li>
  <li><a href="../../../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#mapasyncpartitioned" name="mapasyncpartitioned" class="anchor"><span class="anchor-link"></span></a>mapAsyncPartitioned</h1>
<p>Pass incoming elements to a function that extracts a partitioning key from the element, then to a function that returns a <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> result, bounding the number of incomplete <span class="group-scala">Futures</span> <span class="group-java">CompletionStages</span> per partitioning key.</p>
<p><a href="../index.html#asynchronous-operators">Asynchronous operators</a></p>
<h2><a href="#signature" name="signature" class="anchor"><span class="anchor-link"></span></a>Signature</h2>
<p><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/stream/javadsl/Source.html#mapAsyncPartitioned(int,int,akka.japi.function.Function,java.util.function.BiFunction" title="akka.stream.javadsl.Source"><code>Source.mapAsyncPartitioned</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/stream/scaladsl/Source.html#mapAsyncPartitioned[T,P](parallelism:Int,perPartition:Int)(partitioner:Out=%3EP)(f:(Out,P)=%3Escala.concurrent.Future[T]):FlowOps.this.Repr[T]" title="akka.stream.scaladsl.Source"><code>Source.mapAsyncPartitioned</code></a></span> <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/stream/javadsl/Flow.html#mapAsyncPartitioned(int,int,akka.japi.function.Function,java.util.function.BiFunction" title="akka.stream.javadsl.Flow"><code>Flow.mapAsyncPartitioned</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/stream/scaladsl/Flow.html#mapAsyncPartitioned[T,P](parallelism:Int,perPartition:Int)(partitioner:Out=%3EP)(f:(Out,P)=%3Escala.concurrent.Future[T]):FlowOps.this.Repr[T]" title="akka.stream.scaladsl.Flow"><code>Flow.mapAsyncPartitioned</code></a></span></p>
<h2><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h2>
<p>Pass incoming elements to a function that assigns a partitioning key, then to function that returns a <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> result. When the <span class="group-scala">Future</span> <span class="group-java">CompletionStage</span> completes successfully, the result is passed downstream.</p>
<p>Up to <code>parallelism</code> futures can be processed concurrently; additionally no more than <code>perPartition</code> <span class="group-scala">Futures</span> <span class="group-java">CompletionStages</span> with the same partitioning key will be incomplete at any time. When <code>perPartition</code> is limiting elements, the operator will still pull in and buffer up to a total <code>parallelism</code> of elements before it applies backpressure upstream.</p>
<p>Regardless of completion order, results will be emitted in order of the incoming elements which gave rise to the <span class="group-scala">future</span> <span class="group-java"><code>CompletionStage</code></span>.</p>
<p>If a <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> completes with <code>null</code>, that result is dropped and not emitted. If a <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> completes with failure, the stream&rsquo;s is failed.</p>
<p>If <code>parallelism</code> is 1 this stage is equivalent to <a href="mapAsyncUnordered.html"><code>mapAsyncUnordered</code></a> which should be preferred for such uses. It is not possible to specify a <code>perPartition</code> greater or equal to <code>parallelism</code>, for such scenarios with no limit per partition, instead use <a href="mapAsync.html"><code>mapAsync</code></a>.</p>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p>Imagine you are consuming messages from a broker (for instance, Apache Kafka via <a href="https://doc.akka.io/docs/alpakka-kafka/current/">Alpakka Kafka</a>). This broker&rsquo;s semantics are such that acknowledging one message implies an acknowledgement of all messages delivered before that message; this in turn means that in order to ensure at-least-once processing of messages from the broker, they must be acknowledged in the order they were received. These messages represent business events produced by some other service(s) and each concerns a particular entity. You may process messages for different entities simultaneously, but can only process one message for a given entity at a time:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M3/akka-docs/src/test/scala/docs/stream/operators/sourceorflow/MapAsyncs.scala#L173-L199" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val eventsForEntities: Source[EntityEvent, NotUsed] =
  Consumer.committableSource(settings, subscription).take(1000)

val partitioner: EntityEvent =&gt; Int = { event =&gt;
  val partition = event.entityId
  println(s&quot;Assigned event $event to partition $partition&quot;)
  partition
}

eventsForEntities.zipWithIndex
  .map {
    case (event, count) =&gt;
      println(s&quot;Received event $event at offset $count from message broker&quot;)
      event
  }
  .mapAsyncPartitioned(parallelism = 10, perPartition = 1)(partitioner) { (event, partition) =&gt;
    println(s&quot;Processing event $event from partition $partition&quot;)

    // processing result is &quot;partition-sequenceNr&quot;
    // val processEvent: (EntityEvent, Int) =&gt; Future[String]
    processEvent(event, partition).map { x =&gt;
      println(s&quot;Completed processing $x&quot;)
      x
    }
  }
  // for the purpose of this example, will print every element, prepended with &quot;`mapAsyncPartitioned` emitted &quot;
  .runWith(Committer.sink(commitSettings))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.9.0-M3/akka-docs/src/test/java/jdocs/stream/operators/sourceorflow/MapAsyncs.java#L113-L149" target="_blank" title="Go to snippet source">source</a><code class="language-java">Function&lt;EntityEvent, Integer&gt; partitioner =
    (event) -&gt; {
      Integer partition = Integer.valueOf(event.entityId);
      System.out.println(&quot;Assigned event &quot; + event + &quot; to partition &quot; + event.entityId);
      return partition;
    };

Consumer.committableSource(settings, subscription)
    .take(1000)
    .statefulMap(
        () -&gt; Integer.valueOf(0),
        (count, event) -&gt; {
          System.out.println(
              &quot;Received event &quot; + event + &quot; at offset &quot; + count + &quot; from message broker&quot;);
          return Pair.create(count + 1, event);
        },
        (count) -&gt; Optional.empty())
    .mapAsyncPartitioned(
        10, // parallelism
        1, // perPartition
        partitioner,
        (event, partition) -&gt; {
          System.out.println(&quot;Processing event &quot; + event + &quot; from partition &quot; + partition);

          // processing result is &quot;partition-sequenceNr&quot;
          // public CompletionStage&lt;String&gt; processEvent(EntityEvent event, Integer partition)
          CompletionStage&lt;String&gt; cs = processEvent(event, partition);

          return cs.thenApply(
              s -&gt; {
                System.out.println(&quot;Completed processing &quot; + s);
                return s;
              });
        })
    // for the purpose of this example, will print every element, prepended with
    // &quot;`mapAsyncPartitioned` emitted &quot;
    .runWith(Committer.sink(commitSettings), system);</code></pre></dd>
</dl>
<p>We can see from the (annotated) logs the order of consumption, processing, and emission:</p>
<pre><code>Received event EntityEvent(0,1) at offset 0 from message broker
Assigned event EntityEvent(0,1) to partition 0
Processing event EntityEvent(0,1) from partition 0
Received event EntityEvent(0,2) at offset 1 from message broker
Assigned event EntityEvent(0,2) to partition 0                   # see note 1
Received event EntityEvent(0,3) at offset 2 from message broker
Assigned event EntityEvent(0,3) to partition 0
Received event EntityEvent(3,1) at offset 3 from message broker
Assigned event EntityEvent(3,1) to partition 3
Processing event EntityEvent(3,1) from partition 3              # see note 2
Received event EntityEvent(3,2) at offset 4 from message broker
Assigned event EntityEvent(3,2) to partition 3
Received event EntityEvent(2,1) at offset 5 from message broker
Assigned event EntityEvent(2,1) to partition 2
Processing event EntityEvent(2,1) from partition 2
Received event EntityEvent(6,1) at offset 6 from message broker
Assigned event EntityEvent(6,1) to partition 6
Completed processing 3-1                                        # see note 3
Processing event EntityEvent(6,1) from partition 6
Received event EntityEvent(1,1) at offset 7 from message broker
Assigned event EntityEvent(1,1) to partition 1
Processing event EntityEvent(1,1) from partition 1
Received event EntityEvent(1,2) at offset 8 from message broker
Assigned event EntityEvent(1,2) to partition 1
Received event EntityEvent(5,1) at offset 9 from message broker
Assigned event EntityEvent(5,1) to partition 5
Processing event EntityEvent(5,1) from partition 5
Completed processing 5-1
Processing event EntityEvent(3,2) from partition 3
Completed processing 2-1
Completed processing 0-1
Processing event EntityEvent(0,2) from partition 0                # see note 4
`mapAsyncPartitioned` emitted 0-1                                 # see note 5
Received event EntityEvent(3,3) at offset 10 from message broker
Assigned event EntityEvent(3,3) to partition 3
Completed processing 0-2
Processing event EntityEvent(0,3) from partition 0
`mapAsyncPartitioned` emitted 0-2                                 # see note 6
Received event EntityEvent(0,4) at offset 11 from message broker
Assigned event EntityEvent(0,4) to partition 0
Completed processing 3-2
Processing event EntityEvent(3,3) from partition 3
Completed processing 3-3
Completed processing 1-1
Processing event EntityEvent(1,2) from partition 1
Completed processing 1-2
Completed processing 6-1
Completed processing 0-3
Processing event EntityEvent(0,4) from partition 0
Completed processing 0-4
`mapAsyncPartitioned` emitted 0-3
`mapAsyncPartitioned` emitted 3-1                                # see note 7
Received event EntityEvent(4,1) at offset 12 from message broker
Assigned event EntityEvent(4,1) to partition 4
Processing event EntityEvent(4,1) from partition 4
`mapAsyncPartitioned` emitted 3-2
Received event EntityEvent(8,1) at offset 13 from message broker
Assigned event EntityEvent(8,1) to partition 8
Processing event EntityEvent(8,1) from partition 8
`mapAsyncPartitioned` emitted 2-1
Completed processing 8-1
Received event EntityEvent(9,1) at offset 14 from message broker
Assigned event EntityEvent(9,1) to partition 9
Processing event EntityEvent(9,1) from partition 9
`mapAsyncPartitioned` emitted 6-1
Received event EntityEvent(1,3) at offset 15 from message broker
</code></pre>
<p>Notes:</p>
<ol>
  <li>The second (offset 1) message received is for the same entity as the earlier (offset 0) message. Because that earlier message&rsquo;s processing has not yet completed, processing of this message (beyond assigning it to a partition corresponding to the entity, which always happens immediately in <code>mapAsyncPartitioned</code>) has not started.</li>
  <li>The fourth (offset 3) message received is for a different entity from the previous messages. It therefore starts processing immediately, even though the messages at offsets 1 and 2 are waiting to start processing.</li>
  <li>That fourth message completes processing before any other message, but its result will not be emitted until all earlier results are emitted.</li>
  <li>Once the first message is completed, processing of the next message in its partition (in this case, from offset 1) can begin.</li>
  <li>The first result emitted arose from the first message received, which allows the 11th message (offset 10) to be consumed from the message broker, ensuring that no more than 10 messages are being processed asynchronously at any given time.</li>
  <li>The second result emitted arose from the second message received.</li>
  <li>Immediately after the result of processing the third message received is emitted, the result of processing the fourth message is emitted.</li>
</ol>
<h2><a href="#reactive-streams-semantics" name="reactive-streams-semantics" class="anchor"><span class="anchor-link"></span></a>Reactive Streams semantics</h2><div class="callout">
<p><strong>emits</strong> when the next in order <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> returned by the provided function completes successfully</p>
<p><strong>backpressures</strong> when downstream backgpressures and completed and incomplete <span class="group-scala"><code>Future</code></span> <span class="group-java"><code>CompletionStage</code></span> has reached the configured <code>parallelism</code></p>
<p><strong>completes</strong> when upstream completes and all <span class="group-scala">Futures</span> <span class="group-java">CompletionStages</span> have completed and all results have been emitted</p></div>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../../../stream/operators/Source-or-Flow/mapAsync.html"><i class="icon-prev"></i> <span class="link-prev">mapAsync</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../../../stream/operators/Source-or-Flow/mapAsyncUnordered.html">mapAsyncUnordered <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka/tree/v2.9.0-M3/akka-docs/src/main/paradox/stream/operators/Source-or-Flow/mapAsyncPartitioned.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../../../images/akka-icon.svg" />
<section class="copyright">
<div>Akka is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="../../../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../../js/groups.js"></script>
<script type="text/javascript" src="../../../js/page.js"></script>
<script type="text/javascript" src="../../../js/snippets.js"></script>
<script type="text/javascript" src="../../../js/magellan.js"></script>
<script type="text/javascript" src="../../../js/metadata-toggle.js"></script>
<script type="text/javascript" src="../../../js/lbHeader.js"></script>

<style type="text/css">@import "../../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="../../../assets/js/warnOldDocs.js"></script>


</body>
</html>
