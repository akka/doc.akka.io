<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>statefulMapConcat &bull; Akka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/current/stream/operators/Source-or-Flow/statefulMapConcat.html"/>
<script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../../../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../../../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/banner-2.css"/>
<link rel="shortcut icon" href="../../../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon-16x16.png"/>
<link rel="manifest" href="../../../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../../../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics NOTE this will stop processing data July 1st 2023. At which point this embed code can be removed-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>

<!-- Google Tag Manager: Updated May 17th 2023 - Cookie Compliance checks have been moved into Google Tag Manager -->
<script type="text/javascript">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>

</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="../../../images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../../../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.5
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/index.html#module-info" class="header">Module info</a></li>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Akka Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a>
    <ul>
      <li><a href="../../../stream/operators/index.html#source-operators" class="header">Source operators</a></li>
      <li><a href="../../../stream/operators/index.html#sink-operators" class="header">Sink operators</a></li>
      <li><a href="../../../stream/operators/index.html#additional-sink-and-source-converters" class="header">Additional Sink and Source converters</a></li>
      <li><a href="../../../stream/operators/index.html#file-io-sinks-and-sources" class="header">File IO Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#simple-operators" class="header">Simple operators</a></li>
      <li><a href="../../../stream/operators/index.html#flow-operators-composed-of-sinks-and-sources" class="header">Flow operators composed of Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#asynchronous-operators" class="header">Asynchronous operators</a></li>
      <li><a href="../../../stream/operators/index.html#timer-driven-operators" class="header">Timer driven operators</a></li>
      <li><a href="../../../stream/operators/index.html#backpressure-aware-operators" class="header">Backpressure aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#nesting-and-flattening-operators" class="header">Nesting and flattening operators</a></li>
      <li><a href="../../../stream/operators/index.html#time-aware-operators" class="header">Time aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-in-operators" class="header">Fan-in operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-out-operators" class="header">Fan-out operators</a></li>
      <li><a href="../../../stream/operators/index.html#watching-status-operators" class="header">Watching status operators</a></li>
      <li><a href="../../../stream/operators/index.html#actor-interop-operators" class="header">Actor interop operators</a></li>
      <li><a href="../../../stream/operators/index.html#compression-operators" class="header">Compression operators</a></li>
      <li><a href="../../../stream/operators/index.html#error-handling" class="header">Error handling</a></li>
      <li><a href="../../../stream/operators/Source/actorRef.html" class="page">Source.actorRef</a></li>
      <li><a href="../../../stream/operators/Sink/actorRef.html" class="page">Sink.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRef.html" class="page">ActorSource.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRef.html" class="page">ActorSink.actorRef</a></li>
      <li><a href="../../../stream/operators/Source/actorRefWithBackpressure.html" class="page">Source.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Sink/actorRefWithBackpressure.html" class="page">Sink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRefWithBackpressure.html" class="page">ActorSource.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRefWithBackpressure.html" class="page">ActorSink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/aggregateWithBoundary.html" class="page">aggregateWithBoundary</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoTo.html" class="page">alsoTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoToAll.html" class="page">alsoToAll</a></li>
      <li><a href="../../../stream/operators/Flow/asFlowWithContext.html" class="page">Flow.asFlowWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asInputStream.html" class="page">StreamConverters.asInputStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asJavaStream.html" class="page">StreamConverters.asJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/ask.html" class="page">ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/ask.html" class="page">ActorFlow.ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatus.html" class="page">ActorFlow.askWithStatus</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatusAndContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asOutputStream.html" class="page">StreamConverters.asOutputStream</a></li>
      <li><a href="../../../stream/operators/Sink/asPublisher.html" class="page">Sink.asPublisher</a></li>
      <li><a href="../../../stream/operators/Source/asSourceWithContext.html" class="page">Source.asSourceWithContext</a></li>
      <li><a href="../../../stream/operators/Source/asSubscriber.html" class="page">Source.asSubscriber</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/backpressureTimeout.html" class="page">backpressureTimeout</a></li>
      <li><a href="../../../stream/operators/Balance.html" class="page">Balance</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batch.html" class="page">batch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batchWeighted.html" class="page">batchWeighted</a></li>
      <li><a href="../../../stream/operators/Broadcast.html" class="page">Broadcast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/buffer.html" class="page">buffer</a></li>
      <li><a href="../../../stream/operators/Sink/cancelled.html" class="page">Sink.cancelled</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collect.html" class="page">collect</a></li>
      <li><a href="../../../stream/operators/Sink/collect.html" class="page">Sink.collect</a></li>
      <li><a href="../../../stream/operators/Sink/collection.html" class="page">Sink.collection</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collectType.html" class="page">collectType</a></li>
      <li><a href="../../../stream/operators/Source/combine.html" class="page">Source.combine</a></li>
      <li><a href="../../../stream/operators/Sink/combine.html" class="page">Sink.combine</a></li>
      <li><a href="../../../stream/operators/Source/completionStage.html" class="page">Source.completionStage</a></li>
      <li><a href="../../../stream/operators/Flow/completionStageFlow.html" class="page">Flow.completionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/completionStageSink.html" class="page">Sink.completionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/completionStageSource.html" class="page">Source.completionStageSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/completionTimeout.html" class="page">completionTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concat.html" class="page">concat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatAllLazy.html" class="page">concatAllLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatLazy.html" class="page">concatLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflate.html" class="page">conflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflateWithSeed.html" class="page">conflateWithSeed</a></li>
      <li><a href="../../../stream/operators/Flow/contramap.html" class="page">contramap</a></li>
      <li><a href="../../../stream/operators/Source/cycle.html" class="page">Source.cycle</a></li>
      <li><a href="../../../stream/operators/Compression/deflate.html" class="page">Compression.deflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delay.html" class="page">delay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delayWith.html" class="page">delayWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/detach.html" class="page">detach</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/divertTo.html" class="page">divertTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/drop.html" class="page">drop</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWhile.html" class="page">dropWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWithin.html" class="page">dropWithin</a></li>
      <li><a href="../../../stream/operators/Source/empty.html" class="page">Source.empty</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/expand.html" class="page">expand</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/extrapolate.html" class="page">extrapolate</a></li>
      <li><a href="../../../stream/operators/Source/failed.html" class="page">Source.failed</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filter.html" class="page">filter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filterNot.html" class="page">filterNot</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapConcat.html" class="page">flatMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapMerge.html" class="page">flatMapMerge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapPrefix.html" class="page">flatMapPrefix</a></li>
      <li><a href="../../../stream/operators/Flow/flattenOptional.html" class="page">Flow.flattenOptional</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fold.html" class="page">fold</a></li>
      <li><a href="../../../stream/operators/Sink/fold.html" class="page">Sink.fold</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/foldAsync.html" class="page">foldAsync</a></li>
      <li><a href="../../../stream/operators/Sink/foreach.html" class="page">Sink.foreach</a></li>
      <li><a href="../../../stream/operators/Sink/foreachAsync.html" class="page">Sink.foreachAsync</a></li>
      <li><a href="../../../stream/operators/Source/from.html" class="page"><span class="group-scala">Source.apply</span><span class="group-java">Source.from</span></a></li>
      <li><a href="../../../stream/operators/Source/fromCompletionStage.html" class="page">Source.fromCompletionStage</a></li>
      <li><a href="../../../stream/operators/FileIO/fromFile.html" class="page">FileIO.fromFile</a></li>
      <li><a href="../../../stream/operators/Source/fromFuture.html" class="page">Source.fromFuture</a></li>
      <li><a href="../../../stream/operators/Source/fromFutureSource.html" class="page">Source.fromFutureSource</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromInputStream.html" class="page">StreamConverters.fromInputStream</a></li>
      <li><a href="../../../stream/operators/Source/fromIterator.html" class="page">Source.fromIterator</a></li>
      <li><a href="../../../stream/operators/Source/fromJavaStream.html" class="page">fromJavaStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromJavaStream.html" class="page">StreamConverters.fromJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fromMaterializer.html" class="page">fromMaterializer</a></li>
      <li><a href="../../../stream/operators/Sink/fromMaterializer.html" class="page">Sink.fromMaterializer</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromOutputStream.html" class="page">StreamConverters.fromOutputStream</a></li>
      <li><a href="../../../stream/operators/FileIO/fromPath.html" class="page">FileIO.fromPath</a></li>
      <li><a href="../../../stream/operators/Source/fromPublisher.html" class="page">Source.fromPublisher</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSource.html" class="page">Flow.fromSinkAndSource</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSourceCoupled.html" class="page">Flow.fromSinkAndSourceCoupled</a></li>
      <li><a href="../../../stream/operators/Source/fromSourceCompletionStage.html" class="page">Source.fromSourceCompletionStage</a></li>
      <li><a href="../../../stream/operators/Sink/fromSubscriber.html" class="page">Sink.fromSubscriber</a></li>
      <li><a href="../../../stream/operators/Source/future.html" class="page">Source.future</a></li>
      <li><a href="../../../stream/operators/Flow/futureFlow.html" class="page">Flow.futureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/futureSink.html" class="page">Sink.futureSink</a></li>
      <li><a href="../../../stream/operators/Source/futureSource.html" class="page">Source.futureSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupBy.html" class="page">groupBy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/grouped.html" class="page">grouped</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeighted.html" class="page">groupedWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeightedWithin.html" class="page">groupedWeightedWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWithin.html" class="page">groupedWithin</a></li>
      <li><a href="../../../stream/operators/Compression/gunzip.html" class="page">Compression.gunzip</a></li>
      <li><a href="../../../stream/operators/Compression/gzip.html" class="page">Compression.gzip</a></li>
      <li><a href="../../../stream/operators/Sink/head.html" class="page">Sink.head</a></li>
      <li><a href="../../../stream/operators/Sink/headOption.html" class="page">Sink.headOption</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/idleTimeout.html" class="page">idleTimeout</a></li>
      <li><a href="../../../stream/operators/Sink/ignore.html" class="page">Sink.ignore</a></li>
      <li><a href="../../../stream/operators/Compression/inflate.html" class="page">Compression.inflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialDelay.html" class="page">initialDelay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialTimeout.html" class="page">initialTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleave.html" class="page">interleave</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleaveAll.html" class="page">interleaveAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/intersperse.html" class="page">intersperse</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollector.html" class="page">StreamConverters.javaCollector</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollectorParallelUnordered.html" class="page">StreamConverters.javaCollectorParallelUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/keepAlive.html" class="page">keepAlive</a></li>
      <li><a href="../../../stream/operators/Sink/last.html" class="page">Sink.last</a></li>
      <li><a href="../../../stream/operators/Sink/lastOption.html" class="page">Sink.lastOption</a></li>
      <li><a href="../../../stream/operators/Source/lazily.html" class="page">Source.lazily</a></li>
      <li><a href="../../../stream/operators/Source/lazilyAsync.html" class="page">Source.lazilyAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStage.html" class="page">Source.lazyCompletionStage</a></li>
      <li><a href="../../../stream/operators/Flow/lazyCompletionStageFlow.html" class="page">Flow.lazyCompletionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyCompletionStageSink.html" class="page">Sink.lazyCompletionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStageSource.html" class="page">Source.lazyCompletionStageSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFlow.html" class="page">Flow.lazyFlow</a></li>
      <li><a href="../../../stream/operators/Source/lazyFuture.html" class="page">Source.lazyFuture</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFutureFlow.html" class="page">Flow.lazyFutureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyFutureSink.html" class="page">Sink.lazyFutureSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyFutureSource.html" class="page">Source.lazyFutureSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyInitAsync.html" class="page">Flow.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Sink/lazyInitAsync.html" class="page">Sink.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazySingle.html" class="page">Source.lazySingle</a></li>
      <li><a href="../../../stream/operators/Sink/lazySink.html" class="page">Sink.lazySink</a></li>
      <li><a href="../../../stream/operators/Source/lazySource.html" class="page">Source.lazySource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limit.html" class="page">limit</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limitWeighted.html" class="page">limitWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/log.html" class="page">log</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/logWithMarker.html" class="page">logWithMarker</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/map.html" class="page">map</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsync.html" class="page">mapAsync</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html" class="page">mapAsyncPartitioned</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncUnordered.html" class="page">mapAsyncUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapConcat.html" class="page">mapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapError.html" class="page">mapError</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapWithResource.html" class="page">mapWithResource</a></li>
      <li><a href="../../../stream/operators/Source/maybe.html" class="page">Source.maybe</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/merge.html" class="page">merge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeAll.html" class="page">mergeAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeLatest.html" class="page">mergeLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePreferred.html" class="page">mergePreferred</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePrioritized.html" class="page">mergePrioritized</a></li>
      <li><a href="../../../stream/operators/Source/mergePrioritizedN.html" class="page">mergePrioritizedN</a></li>
      <li><a href="../../../stream/operators/MergeSequence.html" class="page">MergeSequence</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeSorted.html" class="page">mergeSorted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/monitor.html" class="page">monitor</a></li>
      <li><a href="../../../stream/operators/Source/never.html" class="page">never</a></li>
      <li><a href="../../../stream/operators/Sink/never.html" class="page">Sink.never</a></li>
      <li><a href="../../../stream/operators/Sink/onComplete.html" class="page">Sink.onComplete</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/onErrorComplete.html" class="page">onErrorComplete</a></li>
      <li><a href="../../../stream/operators/RestartSource/onFailuresWithBackoff.html" class="page">RestartSource.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/onFailuresWithBackoff.html" class="page">RestartFlow.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/orElse.html" class="page">orElse</a></li>
      <li><a href="../../../stream/operators/Partition.html" class="page">Partition</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prefixAndTail.html" class="page">prefixAndTail</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/preMaterialize.html" class="page">preMaterialize</a></li>
      <li><a href="../../../stream/operators/Sink/preMaterialize.html" class="page">Sink.preMaterialize</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prepend.html" class="page">prepend</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prependLazy.html" class="page">prependLazy</a></li>
      <li><a href="../../../stream/operators/Source/queue.html" class="page">Source.queue</a></li>
      <li><a href="../../../stream/operators/Sink/queue.html" class="page">Sink.queue</a></li>
      <li><a href="../../../stream/operators/Source/range.html" class="page">Source.range</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recover.html" class="page">recover</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWith.html" class="page">recoverWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWithRetries.html" class="page">recoverWithRetries</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/reduce.html" class="page">reduce</a></li>
      <li><a href="../../../stream/operators/Sink/reduce.html" class="page">Sink.reduce</a></li>
      <li><a href="../../../stream/operators/Source/repeat.html" class="page">Source.repeat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scan.html" class="page">scan</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scanAsync.html" class="page">scanAsync</a></li>
      <li><a href="../../../stream/operators/Sink/seq.html" class="page">Sink.seq</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/setup.html" class="page">setup</a></li>
      <li><a href="../../../stream/operators/Sink/setup.html" class="page">Sink.setup</a></li>
      <li><a href="../../../stream/operators/Source/single.html" class="page">Source.single</a></li>
      <li><a href="../../../stream/operators/PubSub/sink.html" class="page">PubSub.sink</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/sliding.html" class="page">sliding</a></li>
      <li><a href="../../../stream/operators/PubSub/source.html" class="page">PubSub.source</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitAfter.html" class="page">splitAfter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitWhen.html" class="page">splitWhen</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMap.html" class="page">statefulMap</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#statefulmapconcat" class="active page">statefulMapConcat</a>
      <ul>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#signature" class="header">Signature</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#description" class="header">Description</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#examples" class="header">Examples</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
      </ul></li>
      <li><a href="../../../stream/operators/Source-or-Flow/take.html" class="page">take</a></li>
      <li><a href="../../../stream/operators/Sink/takeLast.html" class="page">Sink.takeLast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWhile.html" class="page">takeWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWithin.html" class="page">takeWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/throttle.html" class="page">throttle</a></li>
      <li><a href="../../../stream/operators/Source/tick.html" class="page">Source.tick</a></li>
      <li><a href="../../../stream/operators/FileIO/toFile.html" class="page">FileIO.toFile</a></li>
      <li><a href="../../../stream/operators/FileIO/toPath.html" class="page">FileIO.toPath</a></li>
      <li><a href="../../../stream/operators/Source/unfold.html" class="page">Source.unfold</a></li>
      <li><a href="../../../stream/operators/Source/unfoldAsync.html" class="page">Source.unfoldAsync</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResource.html" class="page">Source.unfoldResource</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResourceAsync.html" class="page">Source.unfoldResourceAsync</a></li>
      <li><a href="../../../stream/operators/Unzip.html" class="page">Unzip</a></li>
      <li><a href="../../../stream/operators/UnzipWith.html" class="page">UnzipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watch.html" class="page">watch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watchTermination.html" class="page">watchTermination</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/wireTap.html" class="page">wireTap</a></li>
      <li><a href="../../../stream/operators/RestartSource/withBackoff.html" class="page">RestartSource.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/withBackoff.html" class="page">RestartFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartSink/withBackoff.html" class="page">RestartSink.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoff.html" class="page">RetryFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoffAndContext.html" class="page">RetryFlow.withBackoffAndContext</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zip.html" class="page">zip</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipAll.html" class="page">zipAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatest.html" class="page">zipLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatestWith.html" class="page">zipLatestWith</a></li>
      <li><a href="../../../stream/operators/Source/zipN.html" class="page">Source.zipN</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWith.html" class="page">zipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWithIndex.html" class="page">zipWithIndex</a></li>
      <li><a href="../../../stream/operators/Source/zipWithN.html" class="page">Source.zipWithN</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a></li>
  <li><a href="../../../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="../../../index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.5
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/index.html#module-info" class="header">Module info</a></li>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Akka Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a>
    <ul>
      <li><a href="../../../stream/operators/index.html#source-operators" class="header">Source operators</a></li>
      <li><a href="../../../stream/operators/index.html#sink-operators" class="header">Sink operators</a></li>
      <li><a href="../../../stream/operators/index.html#additional-sink-and-source-converters" class="header">Additional Sink and Source converters</a></li>
      <li><a href="../../../stream/operators/index.html#file-io-sinks-and-sources" class="header">File IO Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#simple-operators" class="header">Simple operators</a></li>
      <li><a href="../../../stream/operators/index.html#flow-operators-composed-of-sinks-and-sources" class="header">Flow operators composed of Sinks and Sources</a></li>
      <li><a href="../../../stream/operators/index.html#asynchronous-operators" class="header">Asynchronous operators</a></li>
      <li><a href="../../../stream/operators/index.html#timer-driven-operators" class="header">Timer driven operators</a></li>
      <li><a href="../../../stream/operators/index.html#backpressure-aware-operators" class="header">Backpressure aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#nesting-and-flattening-operators" class="header">Nesting and flattening operators</a></li>
      <li><a href="../../../stream/operators/index.html#time-aware-operators" class="header">Time aware operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-in-operators" class="header">Fan-in operators</a></li>
      <li><a href="../../../stream/operators/index.html#fan-out-operators" class="header">Fan-out operators</a></li>
      <li><a href="../../../stream/operators/index.html#watching-status-operators" class="header">Watching status operators</a></li>
      <li><a href="../../../stream/operators/index.html#actor-interop-operators" class="header">Actor interop operators</a></li>
      <li><a href="../../../stream/operators/index.html#compression-operators" class="header">Compression operators</a></li>
      <li><a href="../../../stream/operators/index.html#error-handling" class="header">Error handling</a></li>
      <li><a href="../../../stream/operators/Source/actorRef.html" class="page">Source.actorRef</a></li>
      <li><a href="../../../stream/operators/Sink/actorRef.html" class="page">Sink.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRef.html" class="page">ActorSource.actorRef</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRef.html" class="page">ActorSink.actorRef</a></li>
      <li><a href="../../../stream/operators/Source/actorRefWithBackpressure.html" class="page">Source.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Sink/actorRefWithBackpressure.html" class="page">Sink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSource/actorRefWithBackpressure.html" class="page">ActorSource.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/ActorSink/actorRefWithBackpressure.html" class="page">ActorSink.actorRefWithBackpressure</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/aggregateWithBoundary.html" class="page">aggregateWithBoundary</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoTo.html" class="page">alsoTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/alsoToAll.html" class="page">alsoToAll</a></li>
      <li><a href="../../../stream/operators/Flow/asFlowWithContext.html" class="page">Flow.asFlowWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asInputStream.html" class="page">StreamConverters.asInputStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asJavaStream.html" class="page">StreamConverters.asJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/ask.html" class="page">ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/ask.html" class="page">ActorFlow.ask</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatus.html" class="page">ActorFlow.askWithStatus</a></li>
      <li><a href="../../../stream/operators/ActorFlow/askWithStatusAndContext.html" class="page">ActorFlow.askWithContext</a></li>
      <li><a href="../../../stream/operators/StreamConverters/asOutputStream.html" class="page">StreamConverters.asOutputStream</a></li>
      <li><a href="../../../stream/operators/Sink/asPublisher.html" class="page">Sink.asPublisher</a></li>
      <li><a href="../../../stream/operators/Source/asSourceWithContext.html" class="page">Source.asSourceWithContext</a></li>
      <li><a href="../../../stream/operators/Source/asSubscriber.html" class="page">Source.asSubscriber</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/backpressureTimeout.html" class="page">backpressureTimeout</a></li>
      <li><a href="../../../stream/operators/Balance.html" class="page">Balance</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batch.html" class="page">batch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/batchWeighted.html" class="page">batchWeighted</a></li>
      <li><a href="../../../stream/operators/Broadcast.html" class="page">Broadcast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/buffer.html" class="page">buffer</a></li>
      <li><a href="../../../stream/operators/Sink/cancelled.html" class="page">Sink.cancelled</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collect.html" class="page">collect</a></li>
      <li><a href="../../../stream/operators/Sink/collect.html" class="page">Sink.collect</a></li>
      <li><a href="../../../stream/operators/Sink/collection.html" class="page">Sink.collection</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/collectType.html" class="page">collectType</a></li>
      <li><a href="../../../stream/operators/Source/combine.html" class="page">Source.combine</a></li>
      <li><a href="../../../stream/operators/Sink/combine.html" class="page">Sink.combine</a></li>
      <li><a href="../../../stream/operators/Source/completionStage.html" class="page">Source.completionStage</a></li>
      <li><a href="../../../stream/operators/Flow/completionStageFlow.html" class="page">Flow.completionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/completionStageSink.html" class="page">Sink.completionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/completionStageSource.html" class="page">Source.completionStageSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/completionTimeout.html" class="page">completionTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concat.html" class="page">concat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatAllLazy.html" class="page">concatAllLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/concatLazy.html" class="page">concatLazy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflate.html" class="page">conflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/conflateWithSeed.html" class="page">conflateWithSeed</a></li>
      <li><a href="../../../stream/operators/Flow/contramap.html" class="page">contramap</a></li>
      <li><a href="../../../stream/operators/Source/cycle.html" class="page">Source.cycle</a></li>
      <li><a href="../../../stream/operators/Compression/deflate.html" class="page">Compression.deflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delay.html" class="page">delay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/delayWith.html" class="page">delayWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/detach.html" class="page">detach</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/divertTo.html" class="page">divertTo</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/drop.html" class="page">drop</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWhile.html" class="page">dropWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/dropWithin.html" class="page">dropWithin</a></li>
      <li><a href="../../../stream/operators/Source/empty.html" class="page">Source.empty</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/expand.html" class="page">expand</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/extrapolate.html" class="page">extrapolate</a></li>
      <li><a href="../../../stream/operators/Source/failed.html" class="page">Source.failed</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filter.html" class="page">filter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/filterNot.html" class="page">filterNot</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapConcat.html" class="page">flatMapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapMerge.html" class="page">flatMapMerge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/flatMapPrefix.html" class="page">flatMapPrefix</a></li>
      <li><a href="../../../stream/operators/Flow/flattenOptional.html" class="page">Flow.flattenOptional</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fold.html" class="page">fold</a></li>
      <li><a href="../../../stream/operators/Sink/fold.html" class="page">Sink.fold</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/foldAsync.html" class="page">foldAsync</a></li>
      <li><a href="../../../stream/operators/Sink/foreach.html" class="page">Sink.foreach</a></li>
      <li><a href="../../../stream/operators/Sink/foreachAsync.html" class="page">Sink.foreachAsync</a></li>
      <li><a href="../../../stream/operators/Source/from.html" class="page"><span class="group-scala">Source.apply</span><span class="group-java">Source.from</span></a></li>
      <li><a href="../../../stream/operators/Source/fromCompletionStage.html" class="page">Source.fromCompletionStage</a></li>
      <li><a href="../../../stream/operators/FileIO/fromFile.html" class="page">FileIO.fromFile</a></li>
      <li><a href="../../../stream/operators/Source/fromFuture.html" class="page">Source.fromFuture</a></li>
      <li><a href="../../../stream/operators/Source/fromFutureSource.html" class="page">Source.fromFutureSource</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromInputStream.html" class="page">StreamConverters.fromInputStream</a></li>
      <li><a href="../../../stream/operators/Source/fromIterator.html" class="page">Source.fromIterator</a></li>
      <li><a href="../../../stream/operators/Source/fromJavaStream.html" class="page">fromJavaStream</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromJavaStream.html" class="page">StreamConverters.fromJavaStream</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/fromMaterializer.html" class="page">fromMaterializer</a></li>
      <li><a href="../../../stream/operators/Sink/fromMaterializer.html" class="page">Sink.fromMaterializer</a></li>
      <li><a href="../../../stream/operators/StreamConverters/fromOutputStream.html" class="page">StreamConverters.fromOutputStream</a></li>
      <li><a href="../../../stream/operators/FileIO/fromPath.html" class="page">FileIO.fromPath</a></li>
      <li><a href="../../../stream/operators/Source/fromPublisher.html" class="page">Source.fromPublisher</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSource.html" class="page">Flow.fromSinkAndSource</a></li>
      <li><a href="../../../stream/operators/Flow/fromSinkAndSourceCoupled.html" class="page">Flow.fromSinkAndSourceCoupled</a></li>
      <li><a href="../../../stream/operators/Source/fromSourceCompletionStage.html" class="page">Source.fromSourceCompletionStage</a></li>
      <li><a href="../../../stream/operators/Sink/fromSubscriber.html" class="page">Sink.fromSubscriber</a></li>
      <li><a href="../../../stream/operators/Source/future.html" class="page">Source.future</a></li>
      <li><a href="../../../stream/operators/Flow/futureFlow.html" class="page">Flow.futureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/futureSink.html" class="page">Sink.futureSink</a></li>
      <li><a href="../../../stream/operators/Source/futureSource.html" class="page">Source.futureSource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupBy.html" class="page">groupBy</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/grouped.html" class="page">grouped</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeighted.html" class="page">groupedWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWeightedWithin.html" class="page">groupedWeightedWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/groupedWithin.html" class="page">groupedWithin</a></li>
      <li><a href="../../../stream/operators/Compression/gunzip.html" class="page">Compression.gunzip</a></li>
      <li><a href="../../../stream/operators/Compression/gzip.html" class="page">Compression.gzip</a></li>
      <li><a href="../../../stream/operators/Sink/head.html" class="page">Sink.head</a></li>
      <li><a href="../../../stream/operators/Sink/headOption.html" class="page">Sink.headOption</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/idleTimeout.html" class="page">idleTimeout</a></li>
      <li><a href="../../../stream/operators/Sink/ignore.html" class="page">Sink.ignore</a></li>
      <li><a href="../../../stream/operators/Compression/inflate.html" class="page">Compression.inflate</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialDelay.html" class="page">initialDelay</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/initialTimeout.html" class="page">initialTimeout</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleave.html" class="page">interleave</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/interleaveAll.html" class="page">interleaveAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/intersperse.html" class="page">intersperse</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollector.html" class="page">StreamConverters.javaCollector</a></li>
      <li><a href="../../../stream/operators/StreamConverters/javaCollectorParallelUnordered.html" class="page">StreamConverters.javaCollectorParallelUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/keepAlive.html" class="page">keepAlive</a></li>
      <li><a href="../../../stream/operators/Sink/last.html" class="page">Sink.last</a></li>
      <li><a href="../../../stream/operators/Sink/lastOption.html" class="page">Sink.lastOption</a></li>
      <li><a href="../../../stream/operators/Source/lazily.html" class="page">Source.lazily</a></li>
      <li><a href="../../../stream/operators/Source/lazilyAsync.html" class="page">Source.lazilyAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStage.html" class="page">Source.lazyCompletionStage</a></li>
      <li><a href="../../../stream/operators/Flow/lazyCompletionStageFlow.html" class="page">Flow.lazyCompletionStageFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyCompletionStageSink.html" class="page">Sink.lazyCompletionStageSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyCompletionStageSource.html" class="page">Source.lazyCompletionStageSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFlow.html" class="page">Flow.lazyFlow</a></li>
      <li><a href="../../../stream/operators/Source/lazyFuture.html" class="page">Source.lazyFuture</a></li>
      <li><a href="../../../stream/operators/Flow/lazyFutureFlow.html" class="page">Flow.lazyFutureFlow</a></li>
      <li><a href="../../../stream/operators/Sink/lazyFutureSink.html" class="page">Sink.lazyFutureSink</a></li>
      <li><a href="../../../stream/operators/Source/lazyFutureSource.html" class="page">Source.lazyFutureSource</a></li>
      <li><a href="../../../stream/operators/Flow/lazyInitAsync.html" class="page">Flow.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Sink/lazyInitAsync.html" class="page">Sink.lazyInitAsync</a></li>
      <li><a href="../../../stream/operators/Source/lazySingle.html" class="page">Source.lazySingle</a></li>
      <li><a href="../../../stream/operators/Sink/lazySink.html" class="page">Sink.lazySink</a></li>
      <li><a href="../../../stream/operators/Source/lazySource.html" class="page">Source.lazySource</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limit.html" class="page">limit</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/limitWeighted.html" class="page">limitWeighted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/log.html" class="page">log</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/logWithMarker.html" class="page">logWithMarker</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/map.html" class="page">map</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsync.html" class="page">mapAsync</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncPartitioned.html" class="page">mapAsyncPartitioned</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapAsyncUnordered.html" class="page">mapAsyncUnordered</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapConcat.html" class="page">mapConcat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapError.html" class="page">mapError</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mapWithResource.html" class="page">mapWithResource</a></li>
      <li><a href="../../../stream/operators/Source/maybe.html" class="page">Source.maybe</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/merge.html" class="page">merge</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeAll.html" class="page">mergeAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeLatest.html" class="page">mergeLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePreferred.html" class="page">mergePreferred</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergePrioritized.html" class="page">mergePrioritized</a></li>
      <li><a href="../../../stream/operators/Source/mergePrioritizedN.html" class="page">mergePrioritizedN</a></li>
      <li><a href="../../../stream/operators/MergeSequence.html" class="page">MergeSequence</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/mergeSorted.html" class="page">mergeSorted</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/monitor.html" class="page">monitor</a></li>
      <li><a href="../../../stream/operators/Source/never.html" class="page">never</a></li>
      <li><a href="../../../stream/operators/Sink/never.html" class="page">Sink.never</a></li>
      <li><a href="../../../stream/operators/Sink/onComplete.html" class="page">Sink.onComplete</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/onErrorComplete.html" class="page">onErrorComplete</a></li>
      <li><a href="../../../stream/operators/RestartSource/onFailuresWithBackoff.html" class="page">RestartSource.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/onFailuresWithBackoff.html" class="page">RestartFlow.onFailuresWithBackoff</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/orElse.html" class="page">orElse</a></li>
      <li><a href="../../../stream/operators/Partition.html" class="page">Partition</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prefixAndTail.html" class="page">prefixAndTail</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/preMaterialize.html" class="page">preMaterialize</a></li>
      <li><a href="../../../stream/operators/Sink/preMaterialize.html" class="page">Sink.preMaterialize</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prepend.html" class="page">prepend</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/prependLazy.html" class="page">prependLazy</a></li>
      <li><a href="../../../stream/operators/Source/queue.html" class="page">Source.queue</a></li>
      <li><a href="../../../stream/operators/Sink/queue.html" class="page">Sink.queue</a></li>
      <li><a href="../../../stream/operators/Source/range.html" class="page">Source.range</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recover.html" class="page">recover</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWith.html" class="page">recoverWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/recoverWithRetries.html" class="page">recoverWithRetries</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/reduce.html" class="page">reduce</a></li>
      <li><a href="../../../stream/operators/Sink/reduce.html" class="page">Sink.reduce</a></li>
      <li><a href="../../../stream/operators/Source/repeat.html" class="page">Source.repeat</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scan.html" class="page">scan</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/scanAsync.html" class="page">scanAsync</a></li>
      <li><a href="../../../stream/operators/Sink/seq.html" class="page">Sink.seq</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/setup.html" class="page">setup</a></li>
      <li><a href="../../../stream/operators/Sink/setup.html" class="page">Sink.setup</a></li>
      <li><a href="../../../stream/operators/Source/single.html" class="page">Source.single</a></li>
      <li><a href="../../../stream/operators/PubSub/sink.html" class="page">PubSub.sink</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/sliding.html" class="page">sliding</a></li>
      <li><a href="../../../stream/operators/PubSub/source.html" class="page">PubSub.source</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitAfter.html" class="page">splitAfter</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/splitWhen.html" class="page">splitWhen</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMap.html" class="page">statefulMap</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#statefulmapconcat" class="active page">statefulMapConcat</a>
      <ul>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#signature" class="header">Signature</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#description" class="header">Description</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#examples" class="header">Examples</a></li>
        <li><a href="../../../stream/operators/Source-or-Flow/statefulMapConcat.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
      </ul></li>
      <li><a href="../../../stream/operators/Source-or-Flow/take.html" class="page">take</a></li>
      <li><a href="../../../stream/operators/Sink/takeLast.html" class="page">Sink.takeLast</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWhile.html" class="page">takeWhile</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/takeWithin.html" class="page">takeWithin</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/throttle.html" class="page">throttle</a></li>
      <li><a href="../../../stream/operators/Source/tick.html" class="page">Source.tick</a></li>
      <li><a href="../../../stream/operators/FileIO/toFile.html" class="page">FileIO.toFile</a></li>
      <li><a href="../../../stream/operators/FileIO/toPath.html" class="page">FileIO.toPath</a></li>
      <li><a href="../../../stream/operators/Source/unfold.html" class="page">Source.unfold</a></li>
      <li><a href="../../../stream/operators/Source/unfoldAsync.html" class="page">Source.unfoldAsync</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResource.html" class="page">Source.unfoldResource</a></li>
      <li><a href="../../../stream/operators/Source/unfoldResourceAsync.html" class="page">Source.unfoldResourceAsync</a></li>
      <li><a href="../../../stream/operators/Unzip.html" class="page">Unzip</a></li>
      <li><a href="../../../stream/operators/UnzipWith.html" class="page">UnzipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watch.html" class="page">watch</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/watchTermination.html" class="page">watchTermination</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/wireTap.html" class="page">wireTap</a></li>
      <li><a href="../../../stream/operators/RestartSource/withBackoff.html" class="page">RestartSource.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartFlow/withBackoff.html" class="page">RestartFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RestartSink/withBackoff.html" class="page">RestartSink.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoff.html" class="page">RetryFlow.withBackoff</a></li>
      <li><a href="../../../stream/operators/RetryFlow/withBackoffAndContext.html" class="page">RetryFlow.withBackoffAndContext</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zip.html" class="page">zip</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipAll.html" class="page">zipAll</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatest.html" class="page">zipLatest</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipLatestWith.html" class="page">zipLatestWith</a></li>
      <li><a href="../../../stream/operators/Source/zipN.html" class="page">Source.zipN</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWith.html" class="page">zipWith</a></li>
      <li><a href="../../../stream/operators/Source-or-Flow/zipWithIndex.html" class="page">zipWithIndex</a></li>
      <li><a href="../../../stream/operators/Source/zipWithN.html" class="page">Source.zipWithN</a></li>
    </ul></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a></li>
  <li><a href="../../../index-classic.html" class="page">Akka Classic</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#statefulmapconcat" name="statefulmapconcat" class="anchor"><span class="anchor-link"></span></a>statefulMapConcat</h1>
<p>Transform each element into zero or more elements that are individually passed downstream.</p>
<p><a href="../index.html#simple-operators">Simple operators</a></p>
<h2><a href="#signature" name="signature" class="anchor"><span class="anchor-link"></span></a>Signature</h2>
<p><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/stream/javadsl/Flow.html#statefulMapConcat(akka.japi.function.Creator)" title="akka.stream.javadsl.Flow"><code>Flow.statefulMapConcat</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/stream/scaladsl/Flow.html#statefulMapConcat[T](f:()=&gt;Out=&gt;scala.collection.immutable.Iterable[T]):FlowOps.this.Repr[T]" title="akka.stream.scaladsl.Flow"><code>Flow.statefulMapConcat</code></a></span> </p>
<h2><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h2>
<p>Transform each element into zero or more elements that are individually passed downstream. The difference to <code>mapConcat</code> is that the transformation function is created from a factory for every materialization of the flow. This makes it possible to create and use mutable state for the operation, each new materialization of the stream will have its own state.</p>
<p>For cases where no state is needed but only a way to emit zero or more elements for every incoming element you can use <a href="mapConcat.html">mapConcat</a></p>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p>In this first sample we keep a counter, and combine each element with an id that is unique for the stream materialization (replicating the <a href="zipWithIndex.html">zipWithIndex</a> operator):</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/scala/docs/stream/operators/flow/StatefulMapConcat.scala#L17-L34" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val letterAndIndex = Source(&quot;a&quot; :: &quot;b&quot; :: &quot;c&quot; :: &quot;d&quot; :: Nil).statefulMapConcat { () =&gt;
  var index = 0L

  // we return the function that will be invoked for each element
  { element =&gt;
    val zipped = (element, index)
    index += 1
    // we return an iterable with the single element
    zipped :: Nil
  }
}

letterAndIndex.runForeach(println)
// prints
// (a,0)
// (b,1)
// (c,2)
// (d,3)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/java/jdocs/stream/operators/flow/StatefulMapConcat.java#L20-L42" target="_blank" title="Go to snippet source">source</a><code class="language-java">Source&lt;Pair&lt;String, Long&gt;, NotUsed&gt; letterAndIndex =
    Source.from(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;))
        .statefulMapConcat(
            () -&gt; {
              // variables we close over with lambdas must be final, so we use a container,
              // a 1 element array, for the actual value.
              final long[] index = {0L};

              // we return the function that will be invoked for each element
              return (element) -&gt; {
                final Pair&lt;String, Long&gt; zipped = new Pair&lt;&gt;(element, index[0]);
                index[0] += 1;
                // we return an iterable with the single element
                return Collections.singletonList(zipped);
              };
            });

letterAndIndex.runForeach(System.out::println, system);
// prints
// Pair(a,0)
// Pair(b,1)
// Pair(c,2)
// Pair(d,3)</code></pre></dd>
</dl>
<p>In this sample we let the value of the elements have an effect on the following elements, if an element starts with <code>deny:word</code> we add it to a deny list and filter out any subsequent entries of <code>word</code>:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/scala/docs/stream/operators/flow/StatefulMapConcat.scala#L40-L63" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val fruitsAndDeniedCommands = Source(
  &quot;banana&quot; :: &quot;pear&quot; :: &quot;orange&quot; :: &quot;deny:banana&quot; :: &quot;banana&quot; :: &quot;pear&quot; :: &quot;banana&quot; :: Nil)

val denyFilterFlow = Flow[String].statefulMapConcat { () =&gt;
  var denyList = Set.empty[String]

  { element =&gt;
    if (element.startsWith(&quot;deny:&quot;)) {
      denyList += element.drop(&quot;deny:&quot;.size)
      Nil // no element downstream when adding a deny listed keyword
    } else if (denyList(element)) {
      Nil // no element downstream if element is deny listed
    } else {
      element :: Nil
    }
  }
}

fruitsAndDeniedCommands.via(denyFilterFlow).runForeach(println)
// prints
// banana
// pear
// orange
// pear</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/java/jdocs/stream/operators/flow/StatefulMapConcat.java#L48-L77" target="_blank" title="Go to snippet source">source</a><code class="language-java">Source&lt;String, NotUsed&gt; fruitsAndDenyCommands =
    Source.from(
        Arrays.asList(&quot;banana&quot;, &quot;pear&quot;, &quot;orange&quot;, &quot;deny:banana&quot;, &quot;banana&quot;, &quot;pear&quot;, &quot;banana&quot;));

Flow&lt;String, String, NotUsed&gt; denyFilterFlow =
    Flow.of(String.class)
        .statefulMapConcat(
            () -&gt; {
              Set&lt;String&gt; denyList = new HashSet&lt;&gt;();

              return (element) -&gt; {
                if (element.startsWith(&quot;deny:&quot;)) {
                  denyList.add(element.substring(&quot;deny:&quot;.length()));
                  return Collections
                      .emptyList(); // no element downstream when adding a deny listed keyword
                } else if (denyList.contains(element)) {
                  return Collections
                      .emptyList(); // no element downstream if element is deny listed
                } else {
                  return Collections.singletonList(element);
                }
              };
            });

fruitsAndDenyCommands.via(denyFilterFlow).runForeach(System.out::println, system);
// prints
// banana
// pear
// orange
// pear</code></pre></dd>
</dl>
<p>For cases where there is a need to emit elements based on the state when the stream ends, it is possible to add an extra element signalling the end of the stream before the <code>statefulMapConcat</code> operator.</p>
<p>In this sample we collect all elements starting with the letter <code>b</code> and emit those once we have reached the end of the stream using a special end element. The end element is a special string to keep the sample concise, in a real application it may make sense to use types instead.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/scala/docs/stream/operators/flow/StatefulMapConcat.scala#L69-L96" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val words = Source(&quot;baboon&quot; :: &quot;crocodile&quot; :: &quot;bat&quot; :: &quot;flamingo&quot; :: &quot;hedgehog&quot; :: &quot;beaver&quot; :: Nil)

val bWordsLast = Flow[String].concat(Source.single(&quot;-end-&quot;)).statefulMapConcat { () =&gt;
  var stashedBWords: List[String] = Nil

  { element =&gt;
    if (element.startsWith(&quot;b&quot;)) {
      // prepend to stash and emit no element
      stashedBWords = element :: stashedBWords
      Nil
    } else if (element.equals(&quot;-end-&quot;)) {
      // return in the stashed words in the order they got stashed
      stashedBWords.reverse
    } else {
      // emit the element as is
      element :: Nil
    }
  }
}

words.via(bWordsLast).runForeach(println)
// prints
// crocodile
// flamingo
// hedgehog
// baboon
// bat
// beaver</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/test/java/jdocs/stream/operators/flow/StatefulMapConcat.java#L83-L115" target="_blank" title="Go to snippet source">source</a><code class="language-java">Source&lt;String, NotUsed&gt; words =
    Source.from(Arrays.asList(&quot;baboon&quot;, &quot;crocodile&quot;, &quot;bat&quot;, &quot;flamingo&quot;, &quot;hedgehog&quot;, &quot;beaver&quot;));

Flow&lt;String, String, NotUsed&gt; bWordsLast =
    Flow.of(String.class)
        .concat(Source.single(&quot;-end-&quot;))
        .statefulMapConcat(
            () -&gt; {
              List&lt;String&gt; stashedBWords = new ArrayList&lt;&gt;();

              return (element) -&gt; {
                if (element.startsWith(&quot;b&quot;)) {
                  // add to stash and emit no element
                  stashedBWords.add(element);
                  return Collections.emptyList();
                } else if (element.equals(&quot;-end-&quot;)) {
                  // return in the stashed words in the order they got stashed
                  return stashedBWords;
                } else {
                  // emit the element as is
                  return Collections.singletonList(element);
                }
              };
            });

words.via(bWordsLast).runForeach(System.out::println, system);
// prints
// crocodile
// flamingo
// hedgehog
// baboon
// bat
// beaver</code></pre></dd>
</dl>
<p>When defining aggregates like this you should consider if it is safe to let the state grow without bounds or if you should rather drop elements or throw an exception if the collected set of elements grows too big.</p>
<p>For even more fine grained capabilities than can be achieved with <code>statefulMapConcat</code> take a look at <a href="../../stream-customize.html">stream customization</a>.</p>
<h2><a href="#reactive-streams-semantics" name="reactive-streams-semantics" class="anchor"><span class="anchor-link"></span></a>Reactive Streams semantics</h2><div class="callout">
<p><strong>emits</strong> when the mapping function returns an element or there are still remaining elements from the previously calculated collection</p>
<p><strong>backpressures</strong> when downstream backpressures or there are still available elements from the previously calculated collection</p>
<p><strong>completes</strong> when upstream completes and all remaining elements has been emitted</p></div>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../../../stream/operators/Source-or-Flow/statefulMap.html"><i class="icon-prev"></i> <span class="link-prev">statefulMap</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../../../stream/operators/Source-or-Flow/take.html">take <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka/tree/v2.8.5/akka-docs/src/main/paradox/stream/operators/Source-or-Flow/statefulMapConcat.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../../../images/akka-icon.svg" />
<section class="copyright">
<div>Akka is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="../../../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../../js/groups.js"></script>
<script type="text/javascript" src="../../../js/page.js"></script>
<script type="text/javascript" src="../../../js/snippets.js"></script>
<script type="text/javascript" src="../../../js/magellan.js"></script>
<script type="text/javascript" src="../../../js/metadata-toggle.js"></script>
<script type="text/javascript" src="../../../js/lbHeader.js"></script>

<style type="text/css">@import "../../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
appId: 'XUXZ6LW9B1',
apiKey: '5b6260148e92f7c5e38338fcf7eaa3e0',
indexName: 'akka_docs',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="../../../assets/js/warnOldDocs.js"></script>
<script type="text/javascript" src="../../../assets/js/scalafiddle.js"></script>


</body>
</html>
