<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Classic Akka Extensions &bull; Akka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="How to extend Akka with Akka Extensions."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/current/extending-akka.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-2.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend is Changing its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> is Changing its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.0-M2
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="security/index.html" class="page">Security Announcements</a></li>
  <li><a href="typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="general/index.html" class="page">General Concepts</a></li>
  <li><a href="typed/index.html" class="page">Actors</a></li>
  <li><a href="typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="stream/index.html" class="page">Streams</a></li>
  <li><a href="discovery/index.html" class="page">Discovery</a></li>
  <li><a href="index-utilities.html" class="page">Utilities</a></li>
  <li><a href="common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="project/index.html" class="page">Project Information</a></li>
  <li><a href="index-classic.html" class="page">Akka Classic</a>
  <ul>
    <li><a href="index-actors.html" class="page">Classic Actors</a></li>
    <li><a href="index-cluster.html" class="page">Classic Clustering</a></li>
    <li><a href="index-network.html" class="page">Classic Networking</a></li>
    <li><a href="index-utilities-classic.html" class="page">Classic Utilities</a>
    <ul>
      <li><a href="index-utilities-classic.html#dependency" class="header">Dependency</a></li>
      <li><a href="event-bus.html" class="page">Classic Event Bus</a></li>
      <li><a href="logging.html" class="page">Classic Logging</a></li>
      <li><a href="scheduler.html" class="page">Classic Scheduler</a></li>
      <li><a href="extending-akka.html#classic-akka-extensions" class="active page">Classic Akka Extensions</a>
      <ul>
        <li><a href="extending-akka.html#building-an-extension" class="header">Building an Extension</a></li>
        <li><a href="extending-akka.html#loading-from-configuration" class="header">Loading from Configuration</a></li>
        <li><a href="extending-akka.html#applicability" class="header">Applicability</a></li>
        <li><a href="extending-akka.html#library-extensions" class="header">Library extensions</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 2.8.0-M2
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="security/index.html" class="page">Security Announcements</a></li>
  <li><a href="typed/guide/index.html" class="page">Getting Started Guide</a></li>
  <li><a href="general/index.html" class="page">General Concepts</a></li>
  <li><a href="typed/index.html" class="page">Actors</a></li>
  <li><a href="typed/index-cluster.html" class="page">Cluster</a></li>
  <li><a href="typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
  <li><a href="typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
  <li><a href="stream/index.html" class="page">Streams</a></li>
  <li><a href="discovery/index.html" class="page">Discovery</a></li>
  <li><a href="index-utilities.html" class="page">Utilities</a></li>
  <li><a href="common/other-modules.html" class="page">Other Akka modules</a></li>
  <li><a href="additional/deploy.html" class="page">Package, Deploy and Run</a></li>
  <li><a href="project/index.html" class="page">Project Information</a></li>
  <li><a href="index-classic.html" class="page">Akka Classic</a>
  <ul>
    <li><a href="index-actors.html" class="page">Classic Actors</a></li>
    <li><a href="index-cluster.html" class="page">Classic Clustering</a></li>
    <li><a href="index-network.html" class="page">Classic Networking</a></li>
    <li><a href="index-utilities-classic.html" class="page">Classic Utilities</a>
    <ul>
      <li><a href="index-utilities-classic.html#dependency" class="header">Dependency</a></li>
      <li><a href="event-bus.html" class="page">Classic Event Bus</a></li>
      <li><a href="logging.html" class="page">Classic Logging</a></li>
      <li><a href="scheduler.html" class="page">Classic Scheduler</a></li>
      <li><a href="extending-akka.html#classic-akka-extensions" class="active page">Classic Akka Extensions</a>
      <ul>
        <li><a href="extending-akka.html#building-an-extension" class="header">Building an Extension</a></li>
        <li><a href="extending-akka.html#loading-from-configuration" class="header">Loading from Configuration</a></li>
        <li><a href="extending-akka.html#applicability" class="header">Applicability</a></li>
        <li><a href="extending-akka.html#library-extensions" class="header">Library extensions</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#classic-akka-extensions" name="classic-akka-extensions" class="anchor"><span class="anchor-link"></span></a>Classic Akka Extensions</h1>
<p>If you want to add features to Akka, there is a very elegant, but powerful mechanism for doing so. It&rsquo;s called Akka Extensions and comprises 2 basic components: an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span> and an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span>.</p>
<p>Extensions will only be loaded once per <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span>, which will be managed by Akka. You can choose to have your Extension loaded on-demand or at <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span> creation time through the Akka configuration. Details on how to make that happens are below, in the <a href="extending-akka.html#loading">Loading from Configuration</a> section.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>Since an extension is a way to hook into Akka itself, the implementor of the extension needs to ensure the thread safety of his/her extension.</p></div>
<h2><a href="#building-an-extension" name="building-an-extension" class="anchor"><span class="anchor-link"></span></a>Building an Extension</h2>
<p>So let&rsquo;s create a sample extension that lets us count the number of times something has happened.</p>
<p>First, we define what our <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span> should do:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L14-L23" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.Extension

class CountExtensionImpl extends Extension {
  //Since this Extension is a shared instance
  // per ActorSystem we need to be threadsafe
  private val counter = new AtomicLong(0)

  //This is the operation this Extension provides
  def increment() = counter.incrementAndGet()
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/ExtensionDocTest.java#L8-L10" target="_blank" title="Go to snippet source">source</a><code class="language-java">import akka.actor.*;
import java.util.concurrent.atomic.AtomicLong;

static class CountExtensionImpl implements Extension {
  // Since this Extension is a shared instance
  // per ActorSystem we need to be threadsafe
  private final AtomicLong counter = new AtomicLong(0);

  // This is the operation this Extension provides
  public long increment() {
    return counter.incrementAndGet();
  }
}
</code></pre></dd>
</dl>
<p>Then we need to create an <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span> for our extension so we can grab a hold of it.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L27-L48" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.ActorSystem
import akka.actor.ExtensionId
import akka.actor.ExtensionIdProvider
import akka.actor.ExtendedActorSystem

object CountExtension extends ExtensionId[CountExtensionImpl] with ExtensionIdProvider {
  //The lookup method is required by ExtensionIdProvider,
  // so we return ourselves here, this allows us
  // to configure our extension to be loaded when
  // the ActorSystem starts up
  override def lookup = CountExtension

  //This method will be called by Akka
  // to instantiate our Extension
  override def createExtension(system: ExtendedActorSystem) = new CountExtensionImpl

  /**
   * Java API: retrieve the Count extension for the given system.
   */
  override def get(system: ActorSystem): CountExtensionImpl = super.get(system)
  override def get(system: ClassicActorSystemProvider): CountExtensionImpl = super.get(system)
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/ExtensionDocTest.java#L8-L10" target="_blank" title="Go to snippet source">source</a><code class="language-java">import akka.actor.*;
import java.util.concurrent.atomic.AtomicLong;

static class CountExtension extends AbstractExtensionId&lt;CountExtensionImpl&gt;
    implements ExtensionIdProvider {
  // This will be the identifier of our CountExtension
  public static final CountExtension CountExtensionProvider = new CountExtension();

  private CountExtension() {}

  // The lookup method is required by ExtensionIdProvider,
  // so we return ourselves here, this allows us
  // to configure our extension to be loaded when
  // the ActorSystem starts up
  public CountExtension lookup() {
    return CountExtension.CountExtensionProvider; // The public static final
  }

  // This method will be called by Akka
  // to instantiate our Extension
  public CountExtensionImpl createExtension(ExtendedActorSystem system) {
    return new CountExtensionImpl();
  }
}
</code></pre></dd>
</dl>
<p>Wicked! Now all we need to do is to actually use it:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L88" target="_blank" title="Go to snippet source">source</a><code class="language-scala">CountExtension(system).increment()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/ExtensionDocTest.java#L82-L84" target="_blank" title="Go to snippet source">source</a><code class="language-java">// typically you would use static import of the
// CountExtension.CountExtensionProvider field
CountExtension.CountExtensionProvider.get(system).increment();</code></pre></dd>
</dl>
<p>Or from inside of an Akka Actor:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L62-L68" target="_blank" title="Go to snippet source">source</a><code class="language-scala"><br/>class MyActor extends Actor {
  def receive = {
    case someMessage =&gt;
      CountExtension(context.system).increment()
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/ExtensionDocTest.java#L61-L74" target="_blank" title="Go to snippet source">source</a><code class="language-java">static class MyActor extends AbstractActor {
  @Override
  public Receive createReceive() {
    return receiveBuilder()
        .matchAny(
            msg -&gt; {
              // typically you would use static import of the
              // CountExtension.CountExtensionProvider field
              CountExtension.CountExtensionProvider.get(getContext().getSystem()).increment();
            })
        .build();
  }
}
</code></pre></dd>
</dl><div class="group-scala">
<p>You can also hide extension behind traits:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L72-L80" target="_blank" title="Go to snippet source">source</a><code class="language-scala"><br/>trait Counting { self: Actor =&gt;
  def increment() = CountExtension(context.system).increment()
}
class MyCounterActor extends Actor with Counting {
  def receive = {
    case someMessage =&gt; increment()
  }
}</code></pre></div>
<p>That&rsquo;s all there is to it!</p>
<a id="loading"></a>
<h2><a href="#loading-from-configuration" name="loading-from-configuration" class="anchor"><span class="anchor-link"></span></a>Loading from Configuration</h2>
<p>To be able to load extensions from your Akka configuration you must add FQCNs of implementations of either <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ExtensionId.html" title="akka.actor.ExtensionId"><code>ExtensionId</code></a></span> or <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ExtensionIdProvider.html" title="akka.actor.ExtensionIdProvider"><code>ExtensionIdProvider</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ExtensionIdProvider.html" title="akka.actor.ExtensionIdProvider"><code>ExtensionIdProvider</code></a></span> in the <code>akka.extensions</code> section of the config you provide to your <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/ActorSystem.html" title="akka.actor.ActorSystem"><code>ActorSystem</code></a></span>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/ExtensionDocSpec.scala#L55-L57" target="_blank" title="Go to snippet source">source</a><code class="language-scala">akka {
  extensions = [&quot;docs.extension.CountExtension&quot;]
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre><code>akka {
  extensions = [&quot;docs.extension.ExtensionDocTest.CountExtension&quot;]
}
</code></pre></dd>
</dl>
<h2><a href="#applicability" name="applicability" class="anchor"><span class="anchor-link"></span></a>Applicability</h2>
<p>The sky is the limit! By the way, did you know that Akka <a href="cluster-usage.html">Cluster</a>, <a href="serialization.html">Serialization</a> and other features are implemented as Akka Extensions?</p>
<a id="extending-akka-settings"></a>
<h3><a href="#application-specific-settings" name="application-specific-settings" class="anchor"><span class="anchor-link"></span></a>Application specific settings</h3>
<p>The <a href="general/configuration.html">configuration</a> can be used for application specific settings. A good practice is to place those settings in an Extension.</p>
<p>Sample configuration:</p>
<pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/SettingsExtensionDocSpec.scala#L53-L60" target="_blank" title="Go to snippet source">source</a><code class="language-scala">myapp {
  db {
    uri = &quot;mongodb://example1.com:27017,example2.com:27017&quot;
  }
  circuit-breaker {
    timeout = 30 seconds
  }
}</code></pre>
<p>The <span class="group-scala"><a href="https://doc.akka.io/api/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span><span class="group-java"><a href="https://doc.akka.io/japi/akka/2.8/akka/actor/Extension.html" title="akka.actor.Extension"><code>Extension</code></a></span>:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/SettingsExtensionDocSpec.scala#L8-L19" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import akka.actor.ActorSystem
import akka.actor.Extension
import akka.actor.ExtensionId
import akka.actor.ExtensionIdProvider
import akka.actor.ExtendedActorSystem

import scala.concurrent.duration.Duration
import com.typesafe.config.Config
import java.util.concurrent.TimeUnit

import akka.actor.ClassicActorSystemProvider

class SettingsImpl(config: Config) extends Extension {
  val DbUri: String = config.getString(&quot;myapp.db.uri&quot;)
  val CircuitBreakerTimeout: Duration =
    Duration(config.getDuration(&quot;myapp.circuit-breaker.timeout&quot;, TimeUnit.MILLISECONDS), TimeUnit.MILLISECONDS)
}
object Settings extends ExtensionId[SettingsImpl] with ExtensionIdProvider {

  override def lookup = Settings

  override def createExtension(system: ExtendedActorSystem) =
    new SettingsImpl(system.settings.config)

  /**
   * Java API: retrieve the Settings extension for the given system.
   */
  override def get(system: ActorSystem): SettingsImpl = super.get(system)
  override def get(system: ClassicActorSystemProvider): SettingsImpl = super.get(system)
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/SettingsExtensionDocTest.java#L8-L16" target="_blank" title="Go to snippet source">source</a><code class="language-java">import akka.actor.Extension;
import akka.actor.AbstractExtensionId;
import akka.actor.ExtensionIdProvider;
import akka.actor.ActorSystem;
import akka.actor.ExtendedActorSystem;
import com.typesafe.config.Config;
import java.util.concurrent.TimeUnit;
import java.time.Duration;

static class SettingsImpl implements Extension {

  public final String DB_URI;
  public final Duration CIRCUIT_BREAKER_TIMEOUT;

  public SettingsImpl(Config config) {
    DB_URI = config.getString(&quot;myapp.db.uri&quot;);
    CIRCUIT_BREAKER_TIMEOUT =
        Duration.ofMillis(
            config.getDuration(&quot;myapp.circuit-breaker.timeout&quot;, TimeUnit.MILLISECONDS));
  }
}

static class Settings extends AbstractExtensionId&lt;SettingsImpl&gt; implements ExtensionIdProvider {
  public static final Settings SettingsProvider = new Settings();

  private Settings() {}

  public Settings lookup() {
    return Settings.SettingsProvider;
  }

  public SettingsImpl createExtension(ExtendedActorSystem system) {
    return new SettingsImpl(system.settings().config());
  }
}
</code></pre></dd>
</dl>
<p>Use it:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/scala/docs/extension/SettingsExtensionDocSpec.scala#L65-L69" target="_blank" title="Go to snippet source">source</a><code class="language-scala"><br/>class MyActor extends Actor {
  val settings = Settings(context.system)
  val connection = connect(settings.DbUri, settings.CircuitBreakerTimeout)
</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/test/java/jdocs/extension/SettingsExtensionDocTest.java#L62-L78" target="_blank" title="Go to snippet source">source</a><code class="language-java">static class MyActor extends AbstractActor {
  // typically you would use static import of the Settings.SettingsProvider field
  final SettingsImpl settings = Settings.SettingsProvider.get(getContext().getSystem());
  Connection connection = connect(settings.DB_URI, settings.CIRCUIT_BREAKER_TIMEOUT);

}</code></pre></dd>
</dl>
<h2><a href="#library-extensions" name="library-extensions" class="anchor"><span class="anchor-link"></span></a>Library extensions</h2>
<p>A third part library may register its extension for auto-loading on actor system startup by appending it to <code>akka.library-extensions</code> in its <code>reference.conf</code>.</p>
<pre><code>akka.library-extensions += &quot;docs.extension.ExampleExtension&quot;
</code></pre>
<p>As there is no way to selectively remove such extensions, it should be used with care and only when there is no case where the user would ever want it disabled or have specific support for disabling such sub-features. One example where this could be important is in tests.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>The<code>akka.library-extensions</code> must never be assigned (<code>= [&quot;Extension&quot;]</code>) instead of appending as this will break the library-extension mechanism and make behavior depend on class path ordering.</p></div>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="scheduler.html"><i class="icon-prev"></i> <span class="link-prev">Classic Scheduler</span></a>
</div>
<div class="nav-next small-6 column clearfix">
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka/tree/v2.8.0-M2/akka-docs/src/main/paradox/extending-akka.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2022 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/snippets.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>
<script type="text/javascript" src="js/lbHeader.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
apiKey: '543bad5ad786495d9ccd445ed34ed082',
indexName: 'akka_io',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
apiKey: '543bad5ad786495d9ccd445ed34ed082',
indexName: 'akka_io',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="assets/js/warnOldDocs.js"></script>
<script type="text/javascript" src="assets/js/scalafiddle.js"></script>


</body>
</html>
