<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Akka Management &bull; Akka Management</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka Management is a suite of tools for operating Akka Clusters."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-management/current/akka-management.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-1.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="wrapper">
<div class="brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com?r=oss-banner-akka" target="_blank">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="nav">
<a class="banner-btn oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Enhance your Akka systems with Akka Platform [Button] - Akka Banner" href="https://www.lightbend.com/akka-platform?r=oss-banner-akka" target="_blank">
<span>Enhance your Akka systems with</span>
<img class="akka-platform-reverse-logo" src="images/banner-logos/akka-platform-reverse.svg" alt="Akka Platform" title="Akka Platform">
</a>
<div class="drop-down">
<svg class="svg-chevon-circle-down" version="1.1" id="Chevron_circled_down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path fill="#ffffff" d="M12.505,8.698L10,11L7.494,8.698c-0.198-0.196-0.518-0.196-0.718,0c-0.197,0.196-0.197,0.515,0,0.71l2.864,2.807
c0.199,0.196,0.52,0.196,0.717,0l2.864-2.807c0.199-0.195,0.198-0.514,0-0.71C13.024,8.502,12.704,8.502,12.505,8.698z M10,0.4
c-5.302,0-9.6,4.298-9.6,9.6c0,5.303,4.298,9.6,9.6,9.6s9.6-4.297,9.6-9.6C19.6,4.698,15.302,0.4,10,0.4z M10,18.354
c-4.615,0-8.354-3.74-8.354-8.354c0-4.614,3.739-8.354,8.354-8.354c4.613,0,8.354,3.74,8.354,8.354
C18.354,14.614,14.613,18.354,10,18.354z" />
</svg>
<div class="drop-down-content">
<div class="lightbend-family">
<a href="https://cloudflow.io" class="cloudflow oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Cloudflow - Logo Tag Line - Akka Banner">
<img class="cloudflow-full-color-logo" src="images/banner-logos/cloudflow-full-color.svg" alt="Cloudflow by Lightbend" title="Cloudflow by Lightbend">
</a>
<a href="https://cloudstate.io" class="cloudstate oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Cloudstate - Logo Tag Line - Akka Banner">
<img class="cloudstate-full-color-logo" src="images/banner-logos/cloudstate-full-color.svg" alt="Cloudstate by Lightbend" title="Cloudstate by Lightbend">
</a>
<a href="https://www.lagomframework.com" class="lagom oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lagom - Logo Tag Line - Akka Banner">
<img class="lagom-full-color-logo" src="images/banner-logos/lagom-full-color.svg" alt="Lagom Framework by Lightbend" title="Lagom Framework by Lightbend">
</a>
<a href="https://www.playframework.com" class="play oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Play - Logo Tag Line - Akka Banner">
<img class="play-full-color-logo" src="images/banner-logos/play-full-color.svg" alt="Play Framework by Lightbend" title="Play Framework by Lightbend">
</a>
<a href="https://www.scala-lang.org" class="scala oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Scala - Logo Tag Line - Akka Banner">
<img class="scala-full-color-logo" src="images/banner-logos/scala-full-color.svg" alt="Scala by Lightbend" title="Scala by Lightbend">
</a>
<div class="akka current">
<img class="akka-full-color-logo" src="images/banner-logos/akka-full-color.svg" alt="Akka by Lightbend" title="Akka by Lightbend">
<span>From the creators of <strong>Akka</strong>, get technology enhancements, monitoring, and expert support with Akka Platform from Lightbend.</span>
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Learn More [Button] - Akka Banner" href="https://www.lightbend.com/akka-platform?r=oss-banner-akka" target="_blank">Learn More</a>
</div>
</div>
<div class="title">The Lightbend Family</div>
</div>      
</div>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.1.1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html#akka-management" class="active page">Akka Management</a>
  <ul>
    <li><a href="akka-management.html#project-info" class="header">Project Info</a></li>
    <li><a href="akka-management.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="akka-management.html#basic-usage" class="header">Basic Usage</a></li>
    <li><a href="akka-management.html#basic-configuration" class="header">Basic Configuration</a></li>
    <li><a href="akka-management.html#read-only-routes" class="header">Read only routes</a></li>
    <li><a href="akka-management.html#configuring-security" class="header">Configuring Security</a></li>
    <li><a href="akka-management.html#stopping-akka-management" class="header">Stopping Akka Management</a></li>
    <li><a href="akka-management.html#developing-extensions" class="header">Developing Extensions</a></li>
  </ul></li>
  <li><a href="migration.html" class="page">Migration guide</a></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="cluster-http-management.html" class="page">Cluster HTTP Management</a></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.1.1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html#akka-management" class="active page">Akka Management</a>
  <ul>
    <li><a href="akka-management.html#project-info" class="header">Project Info</a></li>
    <li><a href="akka-management.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="akka-management.html#basic-usage" class="header">Basic Usage</a></li>
    <li><a href="akka-management.html#basic-configuration" class="header">Basic Configuration</a></li>
    <li><a href="akka-management.html#read-only-routes" class="header">Read only routes</a></li>
    <li><a href="akka-management.html#configuring-security" class="header">Configuring Security</a></li>
    <li><a href="akka-management.html#stopping-akka-management" class="header">Stopping Akka Management</a></li>
    <li><a href="akka-management.html#developing-extensions" class="header">Developing Extensions</a></li>
  </ul></li>
  <li><a href="migration.html" class="page">Migration guide</a></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="cluster-http-management.html" class="page">Cluster HTTP Management</a></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#akka-management" name="akka-management" class="anchor"><span class="anchor-link"></span></a>Akka Management</h1>
<p>Akka Management is the core module of the management utilities which provides a central HTTP endpoint for Akka management extensions.</p>
<h2><a href="#project-info" name="project-info" class="anchor"><span class="anchor-link"></span></a>Project Info</h2>
<table class="project-info">
<tr><th colspan="2">Project Info: Akka Management</th></tr>
  <tr><th>Artifact</th><td><div>com.lightbend.akka.management</div>
  <div>akka-management</div>
  <div>1.1.1</div>
  <div><a href="https://doc.akka.io/docs/akka-management/snapshot/index.html" target="_blank" rel="noopener noreferrer">Snapshots are available</a></div>
  </td></tr>
  <tr><th>JDK versions</th><td><div>Adopt OpenJDK 8 with Hotspot</div><div>Adopt OpenJDK 11 with Hotspot</div></td></tr>
  <tr><th>Scala versions</th><td>2.12.13, 2.13.5</td></tr>
  <tr><th>License</th><td><div><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">Apache-2.0</a></div>
  </td></tr>
  <tr><th>Readiness level</th><td><div class="readiness-level"><a href="https://developer.lightbend.com/docs/introduction/getting-help/support-terminology.html#supported" target="_blank" rel="noopener">Supported</a>, <a href="https://www.lightbend.com/lightbend-subscription" target="_blank" rel="noopener">Lightbend Subscription</a> provides support</div>
  <div>Since 1.0.0, 2019-03-15</div>
  </td></tr>
  <tr><th>Home page</th><td><a href="https://akka.io/">https://akka.io/</a></td></tr>
  <tr><th>API documentation</th><td>
  <div><a href="https://doc.akka.io/api/akka-management/1.1.1/akka/index.html" target="_blank" rel="noopener noreferrer">API (Scaladoc)</a></div>
  </td></tr>
  <tr><th>Forums</th><td>
  <div><a href="https://discuss.lightbend.com/c/akka/" target="_blank" rel="noopener noreferrer">Lightbend Discuss</a></div>
  <div><a href="https://gitter.im/akka/akka" target="_blank" rel="noopener noreferrer">akka/akka Gitter channel</a></div>
  </td></tr>
  <tr><th>Release notes</th><td><a href="https://github.com/akka/akka-management/releases" target="_blank" rel="noopener noreferrer">GitHub releases</a></td></tr>
  <tr><th>Issues</th><td><a href="https://github.com/akka/akka-management/issues" target="_blank" rel="noopener noreferrer">GitHub issues</a></td></tr>
  <tr><th>Sources</th><td><a href="https://github.com/akka/akka-management" target="_blank" rel="noopener noreferrer">https://github.com/akka/akka-management</a></td></tr>
</table>

<h2><a href="#dependencies" name="dependencies" class="anchor"><span class="anchor-link"></span></a>Dependencies</h2>

<p>The main Akka Management dependency is called <code>akka-management</code>. By itself however it does not provide any capabilities, and you have to combine it with the management extension libraries that you want to make use of (e.g. cluster http management, or cluster bootstrap). This design choice enables users to include only the minimal set of features they actually want to use (and load) in their project.</p>
<dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaManagementVersion = "1.1.1"
libraryDependencies += "com.lightbend.akka.management" %% "akka-management" % AkkaManagementVersion</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  AkkaManagementVersion: "1.1.1",
  ScalaBinary: "2.13"
]
dependencies {
  implementation "com.lightbend.akka.management:akka-management_${versions.ScalaBinary}:${versions.AkkaManagementVersion}"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;akka.management.version&gt;1.1.1&lt;/akka.management.version&gt;
  &lt;scala.binary.version&gt;2.13&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.management&lt;/groupId&gt;
    &lt;artifactId&gt;akka-management_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.management.version}&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<p>And in addition to that, include all of the dependencies for the features you&rsquo;d like to use, like <code>akka-management-bootstrap</code> etc. Refer to each extensions documentation page to learn about how to configure and use it.</p>
<p>Akka Management can be used with Akka 2.6.14 or later. You have to override the following Akka dependencies by defining them explicitly in your build and define the Akka version to the one that you are using. Latest patch version of Akka is recommended and a later version than 2.6.14 can be used.</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaVersion = "2.6.14"
libraryDependencies += "com.typesafe.akka" %% "akka-stream" % AkkaVersion</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  AkkaVersion: "2.6.14",
  ScalaBinary: "2.13"
]
dependencies {
  implementation "com.typesafe.akka:akka-stream_${versions.ScalaBinary}:${versions.AkkaVersion}"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;akka.version&gt;2.6.14&lt;/akka.version&gt;
  &lt;scala.binary.version&gt;2.13&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-stream_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.version}&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<h2><a href="#basic-usage" name="basic-usage" class="anchor"><span class="anchor-link"></span></a>Basic Usage</h2>
<p>Remember that Akka Management does not start automatically and the routes will only be exposed once you trigger:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/integration-test/kubernetes-api/src/main/scala/akka/cluster/bootstrap/DemoApp.scala#L15-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.management.scaladsl.AkkaManagement

AkkaManagement(system).start()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/integration-test/kubernetes-api-java/src/main/java/akka/cluster/bootstrap/demo/DemoApp.java#L15-L32" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.management.javadsl.AkkaManagement;

AkkaManagement.get(system).start();</code></pre></dd>
</dl>
<p>This allows users to prepare anything further before exposing routes for the bootstrap joining process and other purposes.</p>
<p>Remember to call <code>stop</code> method preferably in <a href="https://doc.akka.io/docs/akka/current/coordinated-shutdown.html">Coordinated Shutdown</a>. See <a href="https://github.com/lagom/lagom/blob/50ecfbf2e0d51fe24fdf6ad71157e1dff97106b9/akka-management/core/src/main/scala/com/lightbend/lagom/internal/akka/management/AkkaManagementTrigger.scala#L73">the Lagom example</a>.</p>
<h2><a href="#basic-configuration" name="basic-configuration" class="anchor"><span class="anchor-link"></span></a>Basic Configuration</h2>
<p>You can configure hostname and port to use for the HTTP Cluster management by overriding the following:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/scala/akka/management/AkkaManagementHttpEndpointSpec.scala#L76-L77" target="_blank" title="Go to snippet source"></a><code class="language-scala">akka.management.http.hostname = &quot;127.0.0.1&quot;
akka.management.http.port = 8558</code></pre>
<p>Note that the default value for hostname is <code>InetAddress.getLocalHost.getHostAddress</code>, which may or may not evaluate to <code>127.0.0.1</code>.</p>
<p>When running Akka nodes behind NATs or inside docker containers in bridge mode, it is necessary to set different hostname and port number to bind for the HTTP Server for Http Cluster Management:</p>
<dl>
  <dt>application.conf
  </dt>
  <dd>
  <pre class="prettyprint"><code class="language-hocon">  # Get hostname from environmental variable HOST
  akka.management.http.hostname = ${HOST}
  # Use port 8558 by default, but use environment variable PORT_8558 if it is defined
  akka.management.http.port = 8558
  akka.management.http.port = ${?PORT_8558}
  # Bind to 0.0.0.0:8558 &#39;internally&#39;: 
  akka.management.http.bind-hostname = 0.0.0.0
  akka.management.http.bind-port = 8558
</code></pre></dd>
</dl>
<p>It is also possible to modify the base path of the API, by setting the appropriate value in application.conf:</p>
<dl>
  <dt>application.conf
  </dt>
  <dd>
  <pre class="prettyprint"><code class="language-hocon">akka.management.http.base-path = &quot;myClusterName&quot;
</code></pre></dd>
</dl>
<p>In this example, with this configuration, then the Akka Management routes will will be exposed at under the <code>/myClusterName/...</code>, base path. For example, when using Akka Cluster Management routes the members information would then be available under <code>/myClusterName/shards/{name}</code> etc.</p>
<h2><a href="#read-only-routes" name="read-only-routes" class="anchor"><span class="anchor-link"></span></a>Read only routes</h2>
<p>By default extensions to Akka Management should only provide read only routes. This can be changed via setting <code>akka.management.http.route-providers-read-only</code> to <code>false</code>. Each extension can access the value of this property via <code>ManagementRouteProviderSettings.readOnly</code> to decide which routes to expose.</p>
<p>For example the <code>cluster-http</code> extension only provides read only access to Cluster membership but if <code>route-provider-read-only</code> is set to <code>false</code> additional endpoints for managing the cluster are exposed e.g. downing members.</p>
<h2><a href="#configuring-security" name="configuring-security" class="anchor"><span class="anchor-link"></span></a>Configuring Security</h2><div class="callout note "><div class="callout-title">Note</div>
<p>HTTPS is not enabled by default, as additional configuration from the developer is required. This module does not provide security by default. It is the developer&rsquo;s choice to add security to this API, and when. If enabled, it is generally advisable not to expose management endpoints publicly.</p></div>
<p>The non-secured usage of the module is as follows:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/integration-test/kubernetes-api/src/main/scala/akka/cluster/bootstrap/DemoApp.scala#L15-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.management.scaladsl.AkkaManagement

AkkaManagement(system).start()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/integration-test/kubernetes-api-java/src/main/java/akka/cluster/bootstrap/demo/DemoApp.java#L15-L32" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.management.javadsl.AkkaManagement;

AkkaManagement.get(system).start();</code></pre></dd>
</dl>
<h3><a href="#enabling-tls-ssl-https-for-cluster-http-management" name="enabling-tls-ssl-https-for-cluster-http-management" class="anchor"><span class="anchor-link"></span></a>Enabling TLS/SSL (HTTPS) for Cluster HTTP Management</h3>
<p>To enable SSL you need to provide an <code>SSLContext</code>. You can find more information about it in <a href="https://doc.akka.io/docs/akka-http/10.2/server-side/server-https-support.html">Server HTTPS Support</a>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/scala/akka/management/AkkaManagementHttpEndpointSpec.scala#L197-L201" target="_blank" title="Go to snippet source"></a><code class="language-scala">val management = AkkaManagement(system)

val httpsServer: HttpsConnectionContext = ConnectionContext.httpsServer(sslContext)

val started = management.start(_.withHttpsConnectionContext(httpsServer))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/java/akka/management/CodeExamples.java#L26-L29" target="_blank" title="Go to snippet source"></a><code class="language-java">AkkaManagement management = AkkaManagement.get(system);

HttpsConnectionContext https = ConnectionContext.https(sslContext);
management.start(settings -&gt; settings.withHttpsConnectionContext(https));</code></pre></dd>
</dl>
<p>You can also refer to <a href="https://github.com/akka/akka-management/blob/119ad1871c3907c2ca528720361b8ccb20234c55/management/src/test/scala/akka/management/AkkaManagementHttpEndpointSpec.scala#L124-L148">AkkaManagementHttpEndpointSpec</a> where a full example configuring the HTTPS context is shown.</p>
<h3><a href="#enabling-basic-authentication" name="enabling-basic-authentication" class="anchor"><span class="anchor-link"></span></a>Enabling Basic Authentication</h3>
<p>To enable Basic Authentication you need to provide an authenticator object before starting the management extension. You can find more information in <a href="https://doc.akka.io/docs/akka-http/10.2/routing-dsl/directives/security-directives/authenticateBasicAsync.html">Authenticate Basic Async directive</a></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/scala/akka/management/CompileOnly.scala#L17-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">def myUserPassAuthenticator(credentials: Credentials): Future[Option[String]] =
  credentials match {
    case p @ Credentials.Provided(id) =&gt;
      Future {
        // potentially
        if (p.verify(&quot;p4ssw0rd&quot;)) Some(id)
        else None
      }
    case _ =&gt; Future.successful(None)
  }
// ...
val management = AkkaManagement(system)
management.start(_.withAuth(myUserPassAuthenticator))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/java/akka/management/CodeExamples.java#L37-L46" target="_blank" title="Go to snippet source"></a><code class="language-java">final Function&lt;Optional&lt;SecurityDirectives.ProvidedCredentials&gt;, CompletionStage&lt;Optional&lt;String&gt;&gt;&gt;
  myUserPassAuthenticator = opt -&gt; {
  if (opt.filter(c -&gt; (c != null) &amp;&amp; c.verify(&quot;p4ssw0rd&quot;)).isPresent()) {
    return CompletableFuture.completedFuture(Optional.of(opt.get().identifier()));
  } else {
    return CompletableFuture.completedFuture(Optional.empty());
  }
};
// ...
management.start(settings -&gt; settings.withAuth(myUserPassAuthenticator));</code></pre></dd>
</dl>
<p>You can combine the two security options in order to enable HTTPS as well as basic authentication. In order to do this, invoke <code>start(transformSettings)</code> where <code>transformSettings</code> is a function to amend the <code>ManagementRouteProviderSettings</code>. Use <code>.withAuth</code> and <code>.withHttpsConnectionContext</code> if the <code>ManagementRouteProviderSettings</code> to enable authentication and HTTPS respectively.</p>
<h2><a href="#stopping-akka-management" name="stopping-akka-management" class="anchor"><span class="anchor-link"></span></a>Stopping Akka Management</h2>
<p>In a dynamic environment you might stop instances of Akka Management, for example if you want to free up resources taken by the HTTP server serving the Management routes.</p>
<p>You can do so by calling <code>stop()</code> on <a href="/api/akka-management/1.1.1/akka/management/scaladsl/AkkaManagement.html" title="akka.management.scaladsl.AkkaManagement"><code>AkkaManagement</code></a>. This method return a <code>Future[Done]</code> to inform when the server has been stopped.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/scala/akka/management/CompileOnly.scala#L34-L40" target="_blank" title="Go to snippet source"></a><code class="language-scala">val management = AkkaManagement(system)
management.start()
//...
val bindingFuture = management.stop()
bindingFuture.onComplete { _ =&gt;
  println(&quot;It&#39;s stopped&quot;)
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-management/tree/v1.1.1/management/src/test/scala/akka/management/CompileOnly.scala#L34-L40" target="_blank" title="Go to snippet source"></a><code class="language-scala">val management = AkkaManagement(system)
management.start()
//...
val bindingFuture = management.stop()
bindingFuture.onComplete { _ =&gt;
  println(&quot;It&#39;s stopped&quot;)
}</code></pre></dd>
</dl>
<h2><a href="#developing-extensions" name="developing-extensions" class="anchor"><span class="anchor-link"></span></a>Developing Extensions</h2>
<p>This project provides a set of management extensions. To write third-party extensions to Akka Management, here are few pointers about how it all works together.</p>
<p>The <code>akka-management</code> module provides the central HTTP endpoint to which extensions can register themselves.</p>
<p>An extension can contribute to the exposed HTTP routes by defining named route providers in the <code>akka.management.http.routes</code> configuration section in its own <code>reference.conf</code>. The core <code>AkkaManagement</code> extension collects all the routes and serves them together under the Management HTTP server. This enables easy extension of management capabilities (such as health-checks or cluster information etc) without the boilerplate and overhead to start separate HTTP servers for each extension.</p>
<p>For example, the &ldquo;Cluster HTTP Management&rdquo; module exposes HTTP routes that can be used to monitor, and even trigger joining/leaving/downing decisions via HTTP calls to these routes. The routes and logic for these are implemented inside the <code>akka-management-cluster-http</code>.</p>
<p>Management route providers should be regular extensions that additionally extend the <code>akka.management.scaladsl.ManagementRoutesProvider</code> or <code>akka.management.javadsl.ManagementRoutesProvider</code> interface.</p>
<p>Libraries may register routes into the management routes by defining entries to this setting the library <code>reference.conf</code>:</p>
<pre><code>akka.management.http.routes {
  name = &quot;FQCN&quot;
}
</code></pre>
<p>Where the <code>name</code> of the entry should be unique to allow different route providers to be registered by different libraries and applications.</p>
<p>The FQCN is the fully qualified class name of the <code>ManagementRoutesProvider</code>.</p>
<p>Route providers included by a library (from reference.conf) can be excluded by an application by using <code>&quot;&quot;</code> or <code>null</code> as the FQCN of the named entry, for example:</p>
<pre><code>akka.management.http.routes {
  cluster-management = &quot;&quot;
}
</code></pre>
<p>As a best practice, Management extensions that do something proactively should not be started automatically, but rather manually by the user. One example of that is Cluster Bootstrap. It contributes routes to Akka Management, but the bootstrapping process does not start unless <code>ClusterBootstrap().start()</code> is invoked. Thus, the user can decide when exactly the application is ready to start joining an existing cluster. When cluster bootstrap is autostarted through configuration there is no control over this and the extension is started with the actor system.</p>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="kubernetes-deployment/deploying.html"><i class="icon-prev"></i> <span class="link-prev">Deploying</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="migration.html">Migration guide <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-management/tree/v1.1.1/docs/src/main/paradox/akka-management.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka Management is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2021 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '1.1.1', 'https://doc.akka.io/docs/akka-management/current/')});
//]]></script>


</body>
</html>
