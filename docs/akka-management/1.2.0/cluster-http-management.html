<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Cluster HTTP Management &bull; Akka Management</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka Management is a suite of tools for operating Akka Clusters."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-management/current/cluster-http-management.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-2.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend is Changing its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> is Changing its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.2.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html" class="page">Akka Management</a></li>
  <li><a href="migration.html" class="page">Migration guide</a></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="cluster-http-management.html#cluster-http-management" class="active page">Cluster HTTP Management</a>
  <ul>
    <li><a href="cluster-http-management.html#project-info" class="header">Project Info</a></li>
    <li><a href="cluster-http-management.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="cluster-http-management.html#running" class="header">Running</a></li>
    <li><a href="cluster-http-management.html#api-definition" class="header">API Definition</a></li>
    <li><a href="cluster-http-management.html#hosting-the-routes-in-an-existing-akka-http-server" class="header">Hosting the routes in an existing Akka HTTP server</a></li>
    <li><a href="cluster-http-management.html#disable-routes" class="header">Disable routes</a></li>
    <li><a href="cluster-http-management.html#health-checks" class="header">Health checks</a></li>
  </ul></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels/index.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.2.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html" class="page">Akka Management</a></li>
  <li><a href="migration.html" class="page">Migration guide</a></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="cluster-http-management.html#cluster-http-management" class="active page">Cluster HTTP Management</a>
  <ul>
    <li><a href="cluster-http-management.html#project-info" class="header">Project Info</a></li>
    <li><a href="cluster-http-management.html#dependencies" class="header">Dependencies</a></li>
    <li><a href="cluster-http-management.html#running" class="header">Running</a></li>
    <li><a href="cluster-http-management.html#api-definition" class="header">API Definition</a></li>
    <li><a href="cluster-http-management.html#hosting-the-routes-in-an-existing-akka-http-server" class="header">Hosting the routes in an existing Akka HTTP server</a></li>
    <li><a href="cluster-http-management.html#disable-routes" class="header">Disable routes</a></li>
    <li><a href="cluster-http-management.html#health-checks" class="header">Health checks</a></li>
  </ul></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels/index.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<a id="http-cluster-management"></a>
<h1><a href="#cluster-http-management" name="cluster-http-management" class="anchor"><span class="anchor-link"></span></a>Cluster HTTP Management</h1>
<p>Akka Management Cluster HTTP is a Management extension that allows interaction with an <code>akka-cluster</code> through an HTTP interface. This management extension exposes different operations to manage nodes in a cluster as well as health checks based on the cluster state.</p>
<p>The operations exposed are comparable to the Command Line Management tool or the JMX interface <code>akka-cluster</code> provides.</p>
<h2><a href="#project-info" name="project-info" class="anchor"><span class="anchor-link"></span></a>Project Info</h2>
<table class="project-info">
<tr><th colspan="2">Project Info: Akka Management Cluster HTTP</th></tr>
  <tr><th>Artifact</th><td><div>com.lightbend.akka.management</div>
  <div>akka-management-cluster-http</div>
  <div>1.2.0</div>
  <div><a href="https://oss.sonatype.org/content/repositories/snapshots/com/lightbend/akka/management/" target="_blank" rel="noopener noreferrer">Snapshots are available</a></div>
  </td></tr>
  <tr><th>JDK versions</th><td><div>Adopt OpenJDK 8 with Hotspot</div><div>Adopt OpenJDK 11 with Hotspot</div></td></tr>
  <tr><th>Scala versions</th><td>2.13.10, 2.12.17</td></tr>
  <tr><th>License</th><td><div><a href="https://raw.githubusercontent.com/akka/akka-management/main/LICENSE" target="_blank" rel="noopener noreferrer">BUSL-1.1</a></div>
  </td></tr>
  <tr><th>Readiness level</th><td><div class="readiness-level"><a href="https://developer.lightbend.com/docs/introduction/getting-help/support-terminology.html#supported" target="_blank" rel="noopener">Supported</a>, <a href="https://www.lightbend.com/lightbend-subscription" target="_blank" rel="noopener">Lightbend Subscription</a> provides support</div>
  <div>Since 1.0.0, 2019-03-15</div>
  </td></tr>
  <tr><th>Home page</th><td><a href="https://akka.io/">https://akka.io/</a></td></tr>
  <tr><th>API documentation</th><td>
  <div><a href="https://doc.akka.io/api/akka-management/1.2.0/akka/index.html" target="_blank" rel="noopener noreferrer">API (Scaladoc)</a></div>
  </td></tr>
  <tr><th>Forums</th><td>
  <div><a href="https://discuss.lightbend.com/c/akka/" target="_blank" rel="noopener noreferrer">Lightbend Discuss</a></div>
  <div><a href="https://gitter.im/akka/akka" target="_blank" rel="noopener noreferrer">akka/akka Gitter channel</a></div>
  </td></tr>
  <tr><th>Release notes</th><td><a href="https://github.com/akka/akka-management/releases" target="_blank" rel="noopener noreferrer">GitHub releases</a></td></tr>
  <tr><th>Issues</th><td><a href="https://github.com/akka/akka-management/issues" target="_blank" rel="noopener noreferrer">GitHub issues</a></td></tr>
  <tr><th>Sources</th><td><a href="https://github.com/akka/akka-management" target="_blank" rel="noopener noreferrer">https://github.com/akka/akka-management</a></td></tr>
</table>

<h2><a href="#dependencies" name="dependencies" class="anchor"><span class="anchor-link"></span></a>Dependencies</h2>

<p>The Akka Cluster HTTP Management is a separate jar file. Make sure to include it along with the core akka-management library in your project:</p>
<dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaManagementVersion = "1.2.0"
libraryDependencies ++= Seq(
  "com.lightbend.akka.management" %% "akka-management" % AkkaManagementVersion,
  "com.lightbend.akka.management" %% "akka-management-cluster-http" % AkkaManagementVersion
)</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  AkkaManagementVersion: "1.2.0",
  ScalaBinary: "2.12"
]
dependencies {
  implementation "com.lightbend.akka.management:akka-management_${versions.ScalaBinary}:${versions.AkkaManagementVersion}"
  implementation "com.lightbend.akka.management:akka-management-cluster-http_${versions.ScalaBinary}:${versions.AkkaManagementVersion}"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;akka.management.version&gt;1.2.0&lt;/akka.management.version&gt;
  &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.management&lt;/groupId&gt;
    &lt;artifactId&gt;akka-management_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.management.version}&lt;/version&gt;
  &lt;/dependency&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.management&lt;/groupId&gt;
    &lt;artifactId&gt;akka-management-cluster-http_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.management.version}&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<p>Akka Cluster HTTP Management can be used with Akka 2.7.0 or later. You have to override the following Akka dependencies by defining them explicitly in your build and define the Akka version to the one that you are using. Latest patch version of Akka is recommended and a later version than 2.7.0 can be used.</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaVersion = "2.7.0"
libraryDependencies ++= Seq(
  "com.typesafe.akka" %% "akka-cluster-sharding" % AkkaVersion,
  "com.typesafe.akka" %% "akka-discovery" % AkkaVersion
)</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  AkkaVersion: "2.7.0",
  ScalaBinary: "2.12"
]
dependencies {
  implementation "com.typesafe.akka:akka-cluster-sharding_${versions.ScalaBinary}:${versions.AkkaVersion}"
  implementation "com.typesafe.akka:akka-discovery_${versions.ScalaBinary}:${versions.AkkaVersion}"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;akka.version&gt;2.7.0&lt;/akka.version&gt;
  &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-cluster-sharding_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.version}&lt;/version&gt;
  &lt;/dependency&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.version}&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<h2><a href="#running" name="running" class="anchor"><span class="anchor-link"></span></a>Running</h2>
<p>To make sure the Akka Cluster HTTP Management is running, register it with Akka Management:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/scala/doc/akka/cluster/http/management/CompileOnlySpec.scala#L16-L18" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val system = ActorSystem()
// Automatically loads Cluster Http Routes
AkkaManagement(system).start()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/java/jdoc/akka/cluster/http/management/CompileOnlyTest.java#L18-L19" target="_blank" title="Go to snippet source">source</a><code class="language-java">ActorSystem system = ActorSystem.create();
AkkaManagement.get(system).start();</code></pre></dd>
</dl>
<h2><a href="#api-definition" name="api-definition" class="anchor"><span class="anchor-link"></span></a>API Definition</h2>
<p>The following table describes the usage of the API. All <code>GET</code> operations are exposed by default. <code>POST</code>, <code>PUT</code> and <code>DELETE</code> operations are only enabled if <code>akka.management.http.route-providers-read-only</code> is set to <code>false</code>.</p>
<table>
  <thead>
    <tr>
      <th>Path </th>
      <th>HTTP method </th>
      <th>Required form fields </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>/cluster/</code> </td>
      <td>PUT </td>
      <td>operation: Prepare-for-full-shutdown </td>
      <td>Executes a prepare for full shutdown operation in cluster.</td>
    </tr>
    <tr>
      <td><code>/cluster/domain-events</code> </td>
      <td>GET </td>
      <td>None </td>
      <td>Returns cluster domain events as they occur, in JSON-encoded SSE format.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/</code> </td>
      <td>GET </td>
      <td>None </td>
      <td>Returns the status of the Cluster in JSON format.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/</code> </td>
      <td>POST </td>
      <td>address: <code>{address}</code> </td>
      <td>Executes join operation in cluster for the provided <code>{address}</code>.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/{address}</code> </td>
      <td>GET </td>
      <td>None </td>
      <td>Returns the status of <code>{address}</code> in the Cluster in JSON format.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/{address}</code> </td>
      <td>DELETE </td>
      <td>None </td>
      <td>Executes leave operation in cluster for provided <code>{address}</code>.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/{address}</code> </td>
      <td>PUT </td>
      <td>operation: Down </td>
      <td>Executes down operation in cluster for provided <code>{address}</code>.</td>
    </tr>
    <tr>
      <td><code>/cluster/members/{address}</code> </td>
      <td>PUT </td>
      <td>operation: Leave </td>
      <td>Executes leave operation in cluster for provided <code>{address}</code>.</td>
    </tr>
    <tr>
      <td><code>/cluster/shards/{name}</code> </td>
      <td>GET </td>
      <td>None </td>
      <td>Returns shard info for the shard region with the provided <code>{name}</code></td>
    </tr>
  </tbody>
</table>
<p>The expected format of <code>address</code> follows the Cluster URI convention. Example: <code>akka://Main@myhostname.com:3311</code></p>
<p>In the paths <code>address</code> is also allowed to be provided without the protocol prefix. Example: <code>Main@myhostname.com:3311</code></p>
<h3><a href="#get-cluster-domain-events-request-query-parameters" name="get-cluster-domain-events-request-query-parameters" class="anchor"><span class="anchor-link"></span></a>Get /cluster/domain-events request query parameters</h3>
<table>
  <thead>
    <tr>
      <th>Query Parameter </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>type </td>
      <td>Optional. Specify event type(s) to include in response (see table). If not specified, all event types are included.</td>
    </tr>
  </tbody>
</table>
<table>
  <thead>
    <tr>
      <th>Event Type </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ClusterDomainEvent </td>
      <td>cluster domain event (parent)</td>
    </tr>
    <tr>
      <td>MemberEvent </td>
      <td>membership event (parent)</td>
    </tr>
    <tr>
      <td>MemberJoined </td>
      <td>membership event - joined</td>
    </tr>
    <tr>
      <td>MemberWeaklyUp </td>
      <td>membership event - transitioned to WeaklyUp</td>
    </tr>
    <tr>
      <td>MemberUp </td>
      <td>membership event - transitioned to Up</td>
    </tr>
    <tr>
      <td>MemberLeft </td>
      <td>membership event - left</td>
    </tr>
    <tr>
      <td>MemberExited </td>
      <td>membership event - exited</td>
    </tr>
    <tr>
      <td>MemberDowned </td>
      <td>membership event - downed</td>
    </tr>
    <tr>
      <td>MemberRemoved </td>
      <td>membership event - removed</td>
    </tr>
    <tr>
      <td>LeaderChanged </td>
      <td>cluster&rsquo;s leader has changed</td>
    </tr>
    <tr>
      <td>RoleLeaderChanged </td>
      <td>cluster&rsquo;s role leader has changed</td>
    </tr>
    <tr>
      <td>ClusterShuttingDown </td>
      <td>cluster is shutting down</td>
    </tr>
    <tr>
      <td>ReachabilityEvent </td>
      <td>reachability event (parent)</td>
    </tr>
    <tr>
      <td>UnreachableMember </td>
      <td>reachability event - member now unreachable</td>
    </tr>
    <tr>
      <td>ReachableMember </td>
      <td>reachability event - member now reachable</td>
    </tr>
    <tr>
      <td>DataCenterReachabilityEvent </td>
      <td>DC reachability event (parent)</td>
    </tr>
    <tr>
      <td>UnreachableDataCenter </td>
      <td>DC reachability event - DC now unreachable</td>
    </tr>
    <tr>
      <td>ReachableDataCenter </td>
      <td>DC reachability event - DC now reachable</td>
    </tr>
  </tbody>
</table>
<p>Example request:</p>
<pre><code>GET /cluster/domain-events?type=MemberUp&amp;type=LeaderChanged HTTP/1.1
Host: 192.168.1.23:8558
</code></pre>
<p>Example response:</p>
<pre><code>HTTP/1.1 200 OK
Server: akka-http/10.2.2
Date: Mon, 11 Jan 2021 21:02:37 GMT
Transfer-Encoding: chunked
Content-Type: text/event-stream

data:{&quot;member&quot;:{&quot;dataCenter&quot;:&quot;default&quot;,&quot;roles&quot;:[&quot;dc-default&quot;],&quot;status&quot;:&quot;Up&quot;,&quot;uniqueAddress&quot;:{&quot;address&quot;:&quot;akka://default@127.0.0.1:2551&quot;,&quot;longUid&quot;:-2440990093160003086}},&quot;type&quot;:&quot;MemberUp&quot;}
event:MemberUp

data:{&quot;address&quot;:&quot;akka://default@127.0.0.1:2551&quot;,&quot;type&quot;:&quot;LeaderChanged&quot;}
event:LeaderChanged
</code></pre>
<h3><a href="#get-cluster-domain-events-responses" name="get-cluster-domain-events-responses" class="anchor"><span class="anchor-link"></span></a>Get /cluster/domain-events responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Cluster events in Server-Sent-Event format (JSON)</td>
    </tr>
    <tr>
      <td>500 </td>
      <td>Something went wrong.</td>
    </tr>
  </tbody>
</table>
<h3><a href="#get-cluster-members-responses" name="get-cluster-members-responses" class="anchor"><span class="anchor-link"></span></a>Get /cluster/members responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Status of cluster in JSON format</td>
    </tr>
    <tr>
      <td>500 </td>
      <td>Something went wrong. Cluster might be shutdown.</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code> {
   &quot;selfNode&quot;: &quot;akka.tcp://test@10.10.10.10:1111&quot;,
   &quot;members&quot;: [
     {
       &quot;node&quot;: &quot;akka.tcp://test@10.10.10.10:1111&quot;,
       &quot;nodeUid&quot;: &quot;1116964444&quot;,
       &quot;status&quot;: &quot;Up&quot;,
       &quot;roles&quot;: []
     }
   ],
   &quot;unreachable&quot;: [],
   &quot;leader: &quot;akka.tcp://test@10.10.10.10:1111&quot;,
   &quot;oldest: &quot;akka.tcp://test@10.10.10.10:1111&quot;
 }
</code></pre>
<p>Where <code>oldest</code> is the oldest node in the current datacenter.</p>
<h3><a href="#post-cluster-members-responses" name="post-cluster-members-responses" class="anchor"><span class="anchor-link"></span></a>Post /cluster/members responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Executing join operation.</td>
    </tr>
    <tr>
      <td>500 </td>
      <td>Something went wrong. Cluster might be shutdown.</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code>Joining akka.tcp://test@10.10.10.10:111
</code></pre>
<h3><a href="#get-cluster-members-address-responses" name="get-cluster-members-address-responses" class="anchor"><span class="anchor-link"></span></a>Get /cluster/members/{address} responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Status of cluster in JSON format</td>
    </tr>
    <tr>
      <td>404 </td>
      <td>No member was found in the cluster for the given <code>{address}</code>.</td>
    </tr>
    <tr>
      <td>500 </td>
      <td>Something went wrong. Cluster might be shutdown.</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code>{
  &quot;node&quot;: &quot;akka.tcp://test@10.10.10.10:1111&quot;,
  &quot;nodeUid&quot;: &quot;-169203556&quot;,
  &quot;status&quot;: &quot;Up&quot;,
  &quot;roles&quot;: []
}
</code></pre>
<h3><a href="#delete-cluster-members-address-responses" name="delete-cluster-members-address-responses" class="anchor"><span class="anchor-link"></span></a>Delete /cluster/members/{address} responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Executing leave operation.</td>
    </tr>
    <tr>
      <td>404 </td>
      <td>No member was found in the cluster for the given <code>{address}</code>.</td>
    </tr>
    <tr>
      <td>500 </td>
      <td>Something went wrong. Cluster might be shutdown.</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code>Leaving akka.tcp://test@10.10.10.10:111
</code></pre>
<h3><a href="#put-cluster-members-address-responses" name="put-cluster-members-address-responses" class="anchor"><span class="anchor-link"></span></a>Put /cluster/members/{address} responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Operation </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Down </td>
      <td>Executing down operation.</td>
    </tr>
    <tr>
      <td>200 </td>
      <td>Leave </td>
      <td>Executing leave operation.</td>
    </tr>
    <tr>
      <td>400 </td>
      <td> </td>
      <td>Operation supplied in <code>operation</code> form field is not supported.</td>
    </tr>
    <tr>
      <td>404 </td>
      <td> </td>
      <td>No member was found in the cluster for the given <code>{address}</code></td>
    </tr>
    <tr>
      <td>500 </td>
      <td> </td>
      <td>Something went wrong. Cluster might be shutdown.</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code>Downing akka.tcp://test@10.10.10.10:111
</code></pre>
<h3><a href="#get-cluster-shard-responses" name="get-cluster-shard-responses" class="anchor"><span class="anchor-link"></span></a>Get /cluster/shard responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Shard entity type keys in JSON format</td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<p>{  &ldquo;entityTypeKeys&rdquo;: [&ldquo;ShoppingCart&rdquo;] }</p>
<h3><a href="#get-cluster-shards-name-responses" name="get-cluster-shards-name-responses" class="anchor"><span class="anchor-link"></span></a>Get /cluster/shards/{name} responses</h3>
<table>
  <thead>
    <tr>
      <th>Response code </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200 </td>
      <td>Shard region information in JSON format</td>
    </tr>
    <tr>
      <td>404 </td>
      <td>No shard region was found on the node for the given <code>{name}</code></td>
    </tr>
  </tbody>
</table>
<p>Example response:</p>
<pre><code> {
   &quot;regions&quot;: [
     {
       &quot;shardId&quot;: &quot;1234&quot;,
       &quot;numEntities&quot;: 30
     }
   ]
 }
</code></pre>
<h2><a href="#hosting-the-routes-in-an-existing-akka-http-server" name="hosting-the-routes-in-an-existing-akka-http-server" class="anchor"><span class="anchor-link"></span></a>Hosting the routes in an existing Akka HTTP server</h2>
<p>Starting <code>AkkaMangement</code> starts an Akka HTTP server and hosts the Cluster HTTP Routes. The routes can also be added to an existing Akka HTTP server. To access all the routes:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/scala/doc/akka/cluster/http/management/CompileOnlySpec.scala#L22-L23" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val cluster = Cluster(system)
val allRoutes: Route = ClusterHttpManagementRoutes(cluster)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/java/jdoc/akka/cluster/http/management/CompileOnlyTest.java#L24-L25" target="_blank" title="Go to snippet source">source</a><code class="language-java">Cluster cluster = Cluster.get(system);
Route allRoutes = ClusterHttpManagementRoutes.all(cluster);</code></pre></dd>
</dl>
<p>Just the read only routes can be accessed:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/scala/doc/akka/cluster/http/management/CompileOnlySpec.scala#L27" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val readOnlyRoutes: Route = ClusterHttpManagementRoutes.readOnly(cluster)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka-management/tree/v1.2.0/cluster-http/src/test/java/jdoc/akka/cluster/http/management/CompileOnlyTest.java#L29" target="_blank" title="Go to snippet source">source</a><code class="language-java">Route readOnlyRoutes = ClusterHttpManagementRoutes.readOnly(cluster);</code></pre></dd>
</dl>
<h2><a href="#disable-routes" name="disable-routes" class="anchor"><span class="anchor-link"></span></a>Disable routes</h2>
<p>The Cluster HTTP Routes are included by default when this module is used. It can be disabled with the following configuration, for example if the cluster membership health checks are to be included but not the other Cluster HTTP Routes.</p>
<pre><code>akka.management.http.routes {
  cluster-management = &quot;&quot;
}
</code></pre>
<h2><a href="#health-checks" name="health-checks" class="anchor"><span class="anchor-link"></span></a>Health checks</h2>
<p>A cluster membership <a href="healthchecks.html">health check</a> is included that is designed to be used as a readiness check.</p>
<p>By default the health check returns <code>true</code> when a node is either <code>Up</code> or <code>WeaklyUp</code>. Can be configured with <code>akka.management.cluster.health-checks.ready-states</code>.</p>
<p>The cluster membership readiness check can be disabled with configuration:</p>
<pre><code>akka.management.health-checks.readiness-checks {
  cluster-membership = &quot;&quot;
}
</code></pre>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="discovery/aws.html"><i class="icon-prev"></i> <span class="link-prev">AWS API</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="cluster-jmx-management.html">Built-in JMX Management <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-management/tree/v1.2.0/docs/src/main/paradox/cluster-http-management.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka Management is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2021 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/snippets.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>
<script type="text/javascript" src="js/lbHeader.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '1.2.0', 'https://doc.akka.io/docs/akka-management/current/')});
//]]></script>


</body>
</html>
