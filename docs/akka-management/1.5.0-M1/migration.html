<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Migration guide &bull; Akka Management</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka Management is a suite of tools for operating Akka Clusters."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-management/current/migration.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-2.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics NOTE this will stop processing data July 1st 2023. At which point this embed code can be removed-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>

<!-- Google Tag Manager: Updated May 17th 2023 - Cookie Compliance checks have been moved into Google Tag Manager -->
<script type="text/javascript">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>

</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.5.0-M1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html" class="page">Akka Management</a></li>
  <li><a href="migration.html#migration-guide" class="active page">Migration guide</a>
  <ul>
    <li><a href="migration.html#1-0" class="header">1.0</a></li>
  </ul></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="rolling-updates.html" class="page">Rolling Updates</a></li>
  <li><a href="cluster-http-management.html" class="page">Cluster HTTP Management</a></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels/index.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Management</a></h1>
</div>
<div class="nav-header-version">
Version 1.5.0-M1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="index.html#overview" class="header">Overview</a></li>
  <li><a href="kubernetes-deployment/index.html" class="page">Deploying Akka Cluster to Kubernetes</a></li>
  <li><a href="akka-management.html" class="page">Akka Management</a></li>
  <li><a href="migration.html#migration-guide" class="active page">Migration guide</a>
  <ul>
    <li><a href="migration.html#1-0" class="header">1.0</a></li>
  </ul></li>
  <li><a href="healthchecks.html" class="page">Health checks</a></li>
  <li><a href="bootstrap/index.html" class="page">Akka Cluster Bootstrap</a></li>
  <li><a href="discovery/index.html" class="page">Akka Discovery Methods</a></li>
  <li><a href="rolling-updates.html" class="page">Rolling Updates</a></li>
  <li><a href="cluster-http-management.html" class="page">Cluster HTTP Management</a></li>
  <li><a href="cluster-jmx-management.html" class="page">Built-in JMX Management</a></li>
  <li><a href="loglevels/index.html" class="page">Dynamic Log Levels</a></li>
  <li><a href="kubernetes-lease.html" class="page">Kubernetes Lease</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#migration-guide" name="migration-guide" class="anchor"><span class="anchor-link"></span></a>Migration guide</h1>
<h2><a href="#1-0" name="1-0" class="anchor"><span class="anchor-link"></span></a>1.0</h2>
<p>Version requirements:</p>
<ul>
  <li>Akka 2.5.19 or later</li>
  <li>Akka HTTP 10.1.7 or later</li>
</ul>
<h3><a href="#source-changes" name="source-changes" class="anchor"><span class="anchor-link"></span></a>Source changes</h3>
<ul>
  <li><code>AkkaManagement</code> moved to package <code>akka.management.scaladsl.AkkaManagement</code>, if using from Java use <code>akka.management.javadsl.AkkaManagement</code></li>
  <li>If implementing custom ManagementRouteProvider the package changed to <code>akka.management.scaladsl.ManagementRouteProvider</code>/<code>akka.management.javadsl.ManagementRouteProvider</code></li>
  <li><code>AkkaManagement.start</code> and <code>AkkaManagement.routes</code> may throw IllegalArgumentException instead of returning Try</li>
  <li>Auth and HTTPS has changed by using overloaded methods of <code>AkkaManagement.start</code> and <code>AkkaManagement.routes</code>, see the <a href="akka-management.html#enabling-basic-authentication">docs for more details</a></li>
</ul>
<h3><a href="#configuration-changes" name="configuration-changes" class="anchor"><span class="anchor-link"></span></a>Configuration changes</h3>
<ul>
  <li><code>akka.management.cluster.http.healthcheck.ready-states</code> moved to <code>akka.management.cluster.health-check.ready-states</code></li>
  <li><code>akka.management.cluster.bootstrap.form-new-cluster</code> renamed to <code>akka.management.cluster.bootstrap.new-cluster-enabled</code></li>
</ul>
<h4><a href="#route-providers" name="route-providers" class="anchor"><span class="anchor-link"></span></a>route-providers</h4>
<p><code>akka.management.cluster.route-providers</code> changed from being a list of fully qualified class names to a configuration object <code>akka.management.cluster.routes</code> with named route providers. The reason for the change was to be able to exclude a route provider that was included by a library (from reference.conf) by using <code>&quot;&quot;</code> or <code>null</code> as the FQCN of the named entry, for example:</p>
<pre><code>akka.management.http.routes {
  health-checks = &quot;&quot;
}
</code></pre>
<p>By default the <code>akka.management.HealthCheckRoutes</code> is enabled.</p>
<h3><a href="#akka-discovery" name="akka-discovery" class="anchor"><span class="anchor-link"></span></a>Akka Discovery</h3>
<p>For Akka Management version 1.0 Service Discovery as well as the config, DNS and aggregate discovery methods were made core Akka module. The following steps are required when upgrading to 1.0 of Akka Management.</p>
<p>Remove dependencies for:</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies ++= Seq(
  "com.lightbend.akka.discovery" % "akka-discovery" % "old_akka_management_version",
  "com.lightbend.akka.discovery" % "akka-discovery-dns" % "old_akka_management_version",
  "com.lightbend.akka.discovery" % "akka-discovery-config" % "old_akka_management_version",
  "com.lightbend.akka.discovery" % "akka-discovery-aggregate" % "old_akka_management_version"
)</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  implementation "com.lightbend.akka.discovery:akka-discovery:old_akka_management_version"
  implementation "com.lightbend.akka.discovery:akka-discovery-dns:old_akka_management_version"
  implementation "com.lightbend.akka.discovery:akka-discovery-config:old_akka_management_version"
  implementation "com.lightbend.akka.discovery:akka-discovery-aggregate:old_akka_management_version"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.discovery&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery&lt;/artifactId&gt;
    &lt;version&gt;old_akka_management_version&lt;/version&gt;
  &lt;/dependency&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.discovery&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery-dns&lt;/artifactId&gt;
    &lt;version&gt;old_akka_management_version&lt;/version&gt;
  &lt;/dependency&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.discovery&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery-config&lt;/artifactId&gt;
    &lt;version&gt;old_akka_management_version&lt;/version&gt;
  &lt;/dependency&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka.discovery&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery-aggregate&lt;/artifactId&gt;
    &lt;version&gt;old_akka_management_version&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<p>If using Cluster Bootstrap the new dependency will be brought in automatically. If using Service Discovery directly add the following dependency:</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.typesafe.akka" % "akka-discovery" % "latest_akka_version"</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  implementation "com.typesafe.akka:akka-discovery:latest_akka_version"
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery&lt;/artifactId&gt;
    &lt;version&gt;latest_akka_version&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd></dl>
<p>Setting the service discovery method now has to be the unqualified name e.g <code>kubernetes-api</code> rather than <code>akka.discovery.kubernets-api</code>. If using a custom discovery method the configuration for the discovery method must live under <code>akka.discovery</code>. </p>
<p>For bootstrap it is recommended to set the service discovery method via <code>akka.management.cluster.bootstrap.contact-point-discovery.discovery-method</code> rather then overriding the global service discovery mechanism with <code>akka.discovery.method</code> </p>
<h3><a href="#dns" name="dns" class="anchor"><span class="anchor-link"></span></a>DNS</h3>
<p>If using DNS service discovery it is no longer required to override the global Akka DNS resolver. Remove <code>akka.io.dns.resolver = async-dns</code> from your configuration to avoid setting the <code>async-dns</code> as the global DNS resolver as it still lacks some features. The DNS discovery mechanism now uses an isolated resolver internally to support SRV records. </p>
<h3><a href="#kubernetes" name="kubernetes" class="anchor"><span class="anchor-link"></span></a>Kubernetes</h3>
<p>Kubernetes service discovery now automatically picks up the namespace at runtime. If previously hard coded or an environment variable used this can be removed from configuration and the deployment.</p>
<p>Unless used for something other than service discovery / bootstrap the following can be removed from your deployment </p>
<pre><code>- name: NAMESPACE	
   valueFrom:	
     fieldRef:	
       fieldPath: metadata.namespace
</code></pre>
<p>If <code>pod-namespace</code> is set remove from your configuration as it will be automatically picked up from the <code>/var/run/secrets/kubernetes.io/serviceaccount/namespace</code> file that is mounted to each Kubernetes container. The namespace can be overridden with <code>pod-namespace</code> if this isn&rsquo;t the desired behavior.</p>
<h3><a href="#cluster-http" name="cluster-http" class="anchor"><span class="anchor-link"></span></a>Cluster HTTP</h3>
<p>The <code>cluster-http</code> module now only exposes read only routes by default. To enable destructive operations such as downing members set <code>akka.management.http.route-providers-read-only</code> to `false.</p>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="akka-management.html"><i class="icon-prev"></i> <span class="link-prev">Akka Management</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="healthchecks.html">Health checks <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-management/tree/v1.5.0-M1/docs/src/main/paradox/migration.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka Management is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/snippets.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>
<script type="text/javascript" src="js/lbHeader.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '1.5.0-M1', 'https://doc.akka.io/docs/akka-management/current/')});
//]]></script>


</body>
</html>
