<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Gradle &bull; Akka gRPC</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka gRPC - Support for building streaming gRPC servers and clients on top of Akka Streams."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-grpc/current/buildtools/gradle.html"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="../css/banner-2.css"/>
<link rel="shortcut icon" href="../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png"/>
<link rel="manifest" href="../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="../images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Akka Serverless Open Beta - Keep the data. Lose the database. Try now for free. [Learn More] - Akka Banner" href="https://www.lightbend.com/akka-serverless">
<strong>Akka Serverless Open Beta</strong> - Keep the data. Lose the database. Try now for free. <span class="akka-btn">Learn More</span>
</a>
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Using AWS or GCP? Simplify deployments with Akka Cloud Platform [Learn More] - Akka Banner" href="https://www.lightbend.com/akka-cloud-platform">
<strong>Using AWS or GCP?</strong>&nbsp;&nbsp;Simplify deployments with Akka Cloud Platform. <span class="akka-btn">Learn More</span>
</a>
</nav>
</div>
</div>
</div>
<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka gRPC</a></h1>
</div>
<div class="nav-header-version">
Version 2.1.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
<select class="supergroup" name="Buildtool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-gradle">Gradle</option><option class="group" value="group-maven">Maven</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../whygrpc.html" class="page">Why gRPC?</a></li>
  <li><a href="../getting-started.html" class="page">Getting started</a></li>
  <li><a href="../proto.html" class="page">Protobuf Service Descriptors</a></li>
  <li><a href="../server/index.html" class="page">Providing Services (Server)</a></li>
  <li><a href="../client/index.html" class="page">Consuming Services (Client)</a></li>
  <li><a href="../buildtools/index.html" class="page">Build Tool Support</a>
  <ul>
    <li><a href="../buildtools/sbt.html" class="page">sbt</a></li>
    <li><a href="../buildtools/gradle.html#gradle" class="active page">Gradle</a>
    <ul>
      <li><a href="../buildtools/gradle.html#configuring-plugin" class="header">Configuring plugin</a></li>
      <li><a href="../buildtools/gradle.html#protoc-version" class="header">Protoc version</a></li>
      <li><a href="../buildtools/gradle.html#proto-source-directory" class="header">Proto source directory</a></li>
      <li><a href="../buildtools/gradle.html#loading-proto-files-from-artifacts" class="header">Loading proto files from artifacts</a></li>
      <li><a href="../buildtools/gradle.html#jdk-8-support" class="header">JDK 8 support</a></li>
      <li><a href="../buildtools/gradle.html#starting-your-akka-grpc-server-from-gradle" class="header">Starting your Akka gRPC server from gradle</a></li>
      <li><a href="../buildtools/gradle.html#play-framework-support" class="header">Play Framework support</a></li>
    </ul></li>
    <li><a href="../buildtools/maven.html" class="page">Maven</a></li>
  </ul></li>
  <li><a href="../binary-compatibility.html" class="page">Binary compatibility</a></li>
  <li><a href="../apidesign.html" class="page">API Design</a></li>
  <li><a href="../deploy.html" class="page">Deployment</a></li>
  <li><a href="../troubleshooting.html" class="page">Troubleshooting</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka gRPC</a></h1>
</div>
<div class="nav-header-version">
Version 2.1.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
<select class="supergroup" name="Buildtool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-gradle">Gradle</option><option class="group" value="group-maven">Maven</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../whygrpc.html" class="page">Why gRPC?</a></li>
  <li><a href="../getting-started.html" class="page">Getting started</a></li>
  <li><a href="../proto.html" class="page">Protobuf Service Descriptors</a></li>
  <li><a href="../server/index.html" class="page">Providing Services (Server)</a></li>
  <li><a href="../client/index.html" class="page">Consuming Services (Client)</a></li>
  <li><a href="../buildtools/index.html" class="page">Build Tool Support</a>
  <ul>
    <li><a href="../buildtools/sbt.html" class="page">sbt</a></li>
    <li><a href="../buildtools/gradle.html#gradle" class="active page">Gradle</a>
    <ul>
      <li><a href="../buildtools/gradle.html#configuring-plugin" class="header">Configuring plugin</a></li>
      <li><a href="../buildtools/gradle.html#protoc-version" class="header">Protoc version</a></li>
      <li><a href="../buildtools/gradle.html#proto-source-directory" class="header">Proto source directory</a></li>
      <li><a href="../buildtools/gradle.html#loading-proto-files-from-artifacts" class="header">Loading proto files from artifacts</a></li>
      <li><a href="../buildtools/gradle.html#jdk-8-support" class="header">JDK 8 support</a></li>
      <li><a href="../buildtools/gradle.html#starting-your-akka-grpc-server-from-gradle" class="header">Starting your Akka gRPC server from gradle</a></li>
      <li><a href="../buildtools/gradle.html#play-framework-support" class="header">Play Framework support</a></li>
    </ul></li>
    <li><a href="../buildtools/maven.html" class="page">Maven</a></li>
  </ul></li>
  <li><a href="../binary-compatibility.html" class="page">Binary compatibility</a></li>
  <li><a href="../apidesign.html" class="page">API Design</a></li>
  <li><a href="../deploy.html" class="page">Deployment</a></li>
  <li><a href="../troubleshooting.html" class="page">Troubleshooting</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#gradle" name="gradle" class="anchor"><span class="anchor-link"></span></a>Gradle</h1>
<p>To get started with Akka gRPC read the <a href="../client/index.html">client</a> or <a href="../server/index.html">server</a> introductions.</p>
<h2><a href="#configuring-plugin" name="configuring-plugin" class="anchor"><span class="anchor-link"></span></a>Configuring plugin</h2>
<p>This plugin is a wrapper for <a href="https://github.com/google/protobuf-gradle-plugin">protobuf-gradle-plugin</a> and uses it for <code>.proto</code> files processing and code generation. Most of the settings could be configured using related setting of <code>protobuf-gradle-plugin</code> itself. Consult <a href="https://github.com/google/protobuf-gradle-plugin#protobuf-plugin-for-gradle-">protobuf-gradle-plugin</a> documentation for details.</p>
<p>The plugin can generate either Java or Scala classes, and then server and or client for the corresponding language. By default both client and server are generated and Java or Scala is autodetected depending on the presence of source files with language extension in <code>src/main</code>.</p>
<h3><a href="#installation" name="installation" class="anchor"><span class="anchor-link"></span></a>Installation</h3>
<p>Follow instructions at <a href="https://plugins.gradle.org/plugin/com.lightbend.akka.grpc.gradle">Gradle plugin portal</a> to apply plugin.</p>
<h3><a href="#available-plugin-options" name="available-plugin-options" class="anchor"><span class="anchor-link"></span></a>Available plugin options</h3>
<p>Following options are available for configuring the plugin code generation. Names and default values are provided.</p>
<dl>
  <dt><code>build.gradle</code></dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">akkaGrpc {
    generateClient = true
    generateServer = true
    generatePlay = false
    usePlayActions = false
    serverPowerApis = false
    extraGenerators = []
}
</code></pre></dd>
</dl>
<h3><a href="#generating-server-" name="generating-server-" class="anchor"><span class="anchor-link"></span></a>Generating server &ldquo;power APIs&rdquo;</h3>
<p>To additionally generate server &ldquo;power APIs&rdquo; that have access to request metadata, as described <a href="../server/details.html#accessing-request-metadata">here</a>, set the <code>serverPowerApis</code> option:</p>
<dl>
  <dt><code>build.gradle</code></dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">akkaGrpc {
  ...
  serverPowerApis = true
}
</code></pre></dd>
</dl>
<h2><a href="#protoc-version" name="protoc-version" class="anchor"><span class="anchor-link"></span></a>Protoc version</h2>
<p>Default version of <code>protoc</code> compiler is 3.4.0. The version and the location of <code>protoc</code> can be changed using <code>protobuf-gradle-plugin</code> <a href="https://github.com/google/protobuf-gradle-plugin#locate-external-executables">settings</a>.</p>
<h2><a href="#proto-source-directory" name="proto-source-directory" class="anchor"><span class="anchor-link"></span></a>Proto source directory</h2>
<p>By default the plugin looks for <code>.proto</code> files under</p>
<ul>
  <li><code>src/main/protobuf</code></li>
  <li><code>src/main/proto</code></li>
  <li><code>app/protobuf</code></li>
  <li><code>app/proto</code></li>
</ul>
<p>Loading <code>.proto</code> files from other directories could be configured <a href="https://github.com/google/protobuf-gradle-plugin#customizing-source-directories">using settings</a> of <code>protobuf-gradle-plugin</code>.</p>
<h2><a href="#loading-proto-files-from-artifacts" name="loading-proto-files-from-artifacts" class="anchor"><span class="anchor-link"></span></a>Loading proto files from artifacts</h2>
<p>In gRPC it is common to make the version of the protocol you are supporting explicit by duplicating the proto definitions in your project.</p>
<p>This is supported by <code>protobuf-gradle-plugin</code> and explained <a href="https://github.com/google/protobuf-gradle-plugin#protos-in-dependencies">here</a>.</p>
<h2><a href="#jdk-8-support" name="jdk-8-support" class="anchor"><span class="anchor-link"></span></a>JDK 8 support</h2>
<p>If you want to use TLS-based negotiation on JDK 8, Akka gRPC requires JDK 8 update 252 or later. JVM support for ALPN has been backported to JDK 8u252 which is now widely available. Support for using the Jetty ALPN agent has been <a href="https://doc.akka.io/docs/akka-http/current/migration-guide/migration-guide-10.2.x.html#http-2-support-requires-jdk-8-update-252-or-later">dropped in Akka HTTP 10.2.0</a>, and therefore is not supported by Akka gRPC.</p>
<h2><a href="#starting-your-akka-grpc-server-from-gradle" name="starting-your-akka-grpc-server-from-gradle" class="anchor"><span class="anchor-link"></span></a>Starting your Akka gRPC server from gradle</h2>
<p>Build script needs a custom task</p>
<dl>
  <dt><code>build.gradle</code></dt>
  <dd>
  <pre class="prettyprint"><code class="language-build.gradle">task runServer(type: JavaExec) {
  classpath = sourceSets.main.runtimeClasspath
  main = &#39;com.example.helloworld.GreeterServer&#39;
}
</code></pre></dd>
</dl>
<p>Then, the server can then be started from the command line with:</p>
<pre><code>./gradlew runServer
</code></pre>
<h2><a href="#play-framework-support" name="play-framework-support" class="anchor"><span class="anchor-link"></span></a>Play Framework support</h2>
<p>See the <a href="https://developer.lightbend.com/docs/play-grpc/current/play/gradle-support.html">Play gRPC documentation</a> for details.</p>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../buildtools/sbt.html"><i class="icon-prev"></i> <span class="link-prev">sbt</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../buildtools/maven.html">Maven <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-grpc/tree/v2.1.0/docs/src/main/paradox/buildtools/gradle.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../images/akka-icon.svg" />
<section class="copyright">
<div>Akka gRPC is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2021 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/groups.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/snippets.js"></script>
<script type="text/javascript" src="../js/magellan.js"></script>
<script type="text/javascript" src="../js/metadata-toggle.js"></script>
<script type="text/javascript" src="../js/lbHeader.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="../assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '2.1.0', 'https://doc.akka.io/docs/akka-grpc/current/')});
//]]></script>


</body>
</html>
