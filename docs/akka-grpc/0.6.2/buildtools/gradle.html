<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Gradle &bull; Akka gRPC</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka gRPC - Support for building streaming gRPC servers and clients on top of Akka Streams."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-grpc/current/buildtools/gradle.html"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>
<link rel="shortcut icon" href="../images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png"/>
<link rel="manifest" href="../images/manifest.json"/>
<meta name="msapplication-TileImage" content="../images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://optanon.blob.core.windows.net/consent/159bb13d-6748-4399-806e-ac28db879785.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<script type="text/plain" class="optanon-category-2">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
ga('tsTracker.require', 'linker');
ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org','scala-ide.org']);
ga('tsTracker.send', 'pageview');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka gRPC</a></h1>
</div>
<div class="nav-header-version">
Version 0.6.2
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
<select class="supergroup" name="Buildtool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-gradle">Gradle</option><option class="group" value="group-maven">Maven</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../whygrpc.html" class="page">Why gRPC?</a></li>
  <li><a href="../proto.html" class="page">Protobuf Service Descriptors</a></li>
  <li><a href="../server/index.html" class="page">Providing Services (Server)</a></li>
  <li><a href="../client/index.html" class="page">Consuming Services (Client)</a></li>
  <li><a href="../buildtools/index.html" class="page">Build Tool Support</a>
  <ul>
    <li><a href="../buildtools/sbt.html" class="page">sbt</a></li>
    <li><a href="../buildtools/gradle.html#gradle" class="active page">Gradle</a>
    <ul>
      <li><a href="../buildtools/gradle.html#configuring-what-to-generate" class="header">Configuring what to generate</a></li>
      <li><a href="../buildtools/gradle.html#proto-source-directory" class="header">Proto source directory</a></li>
      <li><a href="../buildtools/gradle.html#loading-proto-files-from-artifacts" class="header">Loading proto files from artifacts</a></li>
      <li><a href="../buildtools/gradle.html#starting-your-akka-grpc-server-from-gradle" class="header">Starting your Akka gRPC server from Gradle</a></li>
      <li><a href="../buildtools/gradle.html#play-framework-support" class="header">Play Framework support</a></li>
    </ul></li>
    <li><a href="../buildtools/maven.html" class="page">Maven</a></li>
  </ul></li>
  <li><a href="../apidesign.html" class="page">API Design</a></li>
  <li><a href="../deploy.html" class="page">Deployment</a></li>
  <li><a href="../troubleshooting.html" class="page">Troubleshooting</a></li>
</ul>
</nav>
</div>
</header>

<aside class="show-for-large">
<header class="nav-header fixed-sidebar-header">
<div class="nav-header-title">
<h1><a href="../index.html">Akka gRPC</a></h1>
</div>
<div class="nav-header-version">
Version 0.6.2
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
<select class="supergroup" name="Buildtool"><option class="group" value="group-sbt">sbt</option><option class="group" value="group-gradle">Gradle</option><option class="group" value="group-maven">Maven</option></select>
</div>
</header>
<nav class="site-nav fixed-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../overview.html" class="page">Overview</a></li>
  <li><a href="../whygrpc.html" class="page">Why gRPC?</a></li>
  <li><a href="../proto.html" class="page">Protobuf Service Descriptors</a></li>
  <li><a href="../server/index.html" class="page">Providing Services (Server)</a></li>
  <li><a href="../client/index.html" class="page">Consuming Services (Client)</a></li>
  <li><a href="../buildtools/index.html" class="page">Build Tool Support</a>
  <ul>
    <li><a href="../buildtools/sbt.html" class="page">sbt</a></li>
    <li><a href="../buildtools/gradle.html#gradle" class="active page">Gradle</a>
    <ul>
      <li><a href="../buildtools/gradle.html#configuring-what-to-generate" class="header">Configuring what to generate</a></li>
      <li><a href="../buildtools/gradle.html#proto-source-directory" class="header">Proto source directory</a></li>
      <li><a href="../buildtools/gradle.html#loading-proto-files-from-artifacts" class="header">Loading proto files from artifacts</a></li>
      <li><a href="../buildtools/gradle.html#starting-your-akka-grpc-server-from-gradle" class="header">Starting your Akka gRPC server from Gradle</a></li>
      <li><a href="../buildtools/gradle.html#play-framework-support" class="header">Play Framework support</a></li>
    </ul></li>
    <li><a href="../buildtools/maven.html" class="page">Maven</a></li>
  </ul></li>
  <li><a href="../apidesign.html" class="page">API Design</a></li>
  <li><a href="../deploy.html" class="page">Deployment</a></li>
  <li><a href="../troubleshooting.html" class="page">Troubleshooting</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer fixed-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../images/akka-logo-reverse.svg"/></a>

</footer>
</aside>

<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">

<article class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#gradle" name="gradle" class="anchor"><span class="anchor-link"></span></a>Gradle</h1>
<p>To get started with Akka gRPC read the <a href="../client/index.html">client</a> or <a href="../server/index.html">server</a> introductions.</p>
<h2><a href="#configuring-what-to-generate" name="configuring-what-to-generate" class="anchor"><span class="anchor-link"></span></a>Configuring what to generate</h2>
<p>The plugin can be configured to generate either Java or Scala classes, and then server and or client for the chosen language. By default both client and server are generated and Java or Scala is selected depending on if the build has the <code>java</code> or <code>scala</code> plugin.</p>
<dl>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">buildscript {
  repositories {
    mavenLocal()
    gradlePluginPortal()
  }
  dependencies {
    // see https://plugins.gradle.org/plugin/com.lightbend.akka.grpc.gradle
    // for the currently latest version.
    classpath &#39;gradle.plugin.com.lightbend.akka.grpc:akka-grpc-gradle-plugin:0.6.2&#39;
  }
}
plugins {
  id &#39;java&#39;
  id &#39;application&#39;
}
apply plugin: &#39;com.lightbend.akka.grpc.gradle&#39;
// These are the default options for a Java project (not necessary to define)
akkaGrpc {
  language = &quot;Java&quot;
  generateClient = true
  generateServer = true
}
repositories {
  mavenLocal()
  mavenCentral()
}
</code></pre></dd>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">buildscript {
  repositories {
    mavenLocal()
    gradlePluginPortal()
  }
  dependencies {
    // see https://plugins.gradle.org/plugin/com.lightbend.akka.grpc.gradle
    // for the currently latest version.
    classpath &#39;gradle.plugin.com.lightbend.akka.grpc:akka-grpc-gradle-plugin:0.6.2&#39;
  }
}
plugins {
  id &#39;scala&#39;
  id &#39;application&#39;
}
apply plugin: &#39;com.lightbend.akka.grpc.gradle&#39;
// These are the default options for a Scala project (not necessary to define)
akkaGrpc {
  language = &quot;Scala&quot;
  generateClient = true
  generateServer = true
}
repositories {
  mavenLocal()
  mavenCentral()
}
</code></pre></dd>
</dl>
<h3><a href="#generating-server-" name="generating-server-" class="anchor"><span class="anchor-link"></span></a>Generating server &ldquo;power APIs&rdquo;</h3>
<p>To additionally generate server &ldquo;power APIs&rdquo; that have access to request metata, as described <a href="../server/walkthrough.html#accessing-request-metadata">here</a>, set the <code>serverPowerApis</code> option:</p>
<dl>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">akkaGrpc {
  ...
  serverPowerApis = true
}
</code></pre></dd>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-gradle">akkaGrpc {
  ...
  serverPowerApis = true
}
</code></pre></dd>
</dl>
<h2><a href="#proto-source-directory" name="proto-source-directory" class="anchor"><span class="anchor-link"></span></a>Proto source directory</h2>
<p>By default the plugin looks for <code>.proto</code>-files under <code>src/main/protobuf</code>.</p>
<p>TODO Changing this is currenlty not supported, see <a href="https://github.com/akka/akka-grpc/issues/288">#288</a></p>
<h2><a href="#loading-proto-files-from-artifacts" name="loading-proto-files-from-artifacts" class="anchor"><span class="anchor-link"></span></a>Loading proto files from artifacts</h2>
<p>TODO this is not supported yet, see <a href="https://github.com/akka/akka-grpc/issues/152">#152</a></p>
<h2><a href="#starting-your-akka-grpc-server-from-gradle" name="starting-your-akka-grpc-server-from-gradle" class="anchor"><span class="anchor-link"></span></a>Starting your Akka gRPC server from Gradle</h2>
<p>As the server requires a special Java agent for ALPN (<a href="https://doc.akka.io/docs/akka-http/current/server-side/http2.html#application-layer-protocol-negotiation-alpn-">see Akka HTTP docs about HTTP/2</a>) you need to pass this agent with a <code>-javaagent</code> flag to the JVM when running the server.</p>
<p>Doing this from inside of Gradle requires a little bit of configuration in the <code>build.gradle</code>:</p>
<pre class="prettyprint"><code class="language-gradle">// Define a separate configuration for managing the dependency on Jetty ALPN agent.
configurations {
  alpnagent
}

dependencies {
  // Configuration for modules that use Jetty ALPN agent
  alpnagent &#39;org.mortbay.jetty.alpn:jetty-alpn-agent:2.0.9&#39;
}

task runServer(type: JavaExec) {
  classpath = sourceSets.main.runtimeClasspath
  main = &#39;com.example.helloworld.GreeterServer&#39;
  jvmArgs &quot;-javaagent:&quot; + configurations.alpnagent.asPath
}

</code></pre>
<p>The server can then be started from the command line with:</p>
<pre><code>./gradlew runServer
</code></pre>
<h2><a href="#play-framework-support" name="play-framework-support" class="anchor"><span class="anchor-link"></span></a>Play Framework support</h2>
<p>See the <a href="https://github.com/playframework/play-grpc/blob/master/docs/src/main/paradox/play-framework.md">Play gRPC docs</a> for details.</p>
</div>
</article>

<div class="row">
<div class="small-12 large-9 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../buildtools/sbt.html"><i class="icon-prev"></i> <span class="link-prev">sbt</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../buildtools/maven.html">Maven <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>

<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-grpc/tree/v0.6.2/docs/src/main/paradox/buildtools/gradle.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>


<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../images/akka-icon.svg"/>
<section class="copyright">
<div>Akka gRPC is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2019 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> | 
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> | 
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> | 
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> | 
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> | 
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>
</footer>

</section>
</main>

<script type="text/javascript" src="../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/groups.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="../assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '0.6.2', 'https://doc.akka.io/docs/akka-grpc/current/')});
//]]></script>


</body>
</html>
