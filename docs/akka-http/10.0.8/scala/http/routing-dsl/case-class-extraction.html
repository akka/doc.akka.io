<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Case Class Extraction &bull; Akka HTTP</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka HTTP: Modern, fast, asynchronous, streaming-first HTTP server and client."/><link rel="canonical" href="https://doc.akka.io/docs/akka-http/10.0/scala/http/routing-dsl/case-class-extraction.html"/>
<script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../../../lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="../../../css/icons.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/page.css"/>
<link rel="shortcut icon" href="../../../images/favicon.ico" />
<meta name="theme-color" content="#15a9ce">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!--Google Analytics-->
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21117439-1']);
_gaq.push(['_setDomainName', 'akka.io']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!--Google Analytics & Marketo-->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
ga('tsTracker.require', 'linker');
ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org','scala-ide.org']);
ga('tsTracker.send', 'pageview');
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702');
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>

</head>

<body id="underlay" data-toggler="nav-open">

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="../../../scala/http/index.html">Akka HTTP</a></h1>
</div>
<div class="nav-header-version">
Version 10.0.8
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Languages"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search"/>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="../../../scala/http/security.html" class="page">Security Announcements</a></li>
  <li><a href="../../../scala/http/introduction.html" class="page">Introduction</a></li>
  <li><a href="../../../scala/http/configuration.html" class="page">Configuration</a></li>
  <li><a href="../../../scala/http/common/index.html" class="page">Common Abstractions (Client- and Server-Side)</a></li>
  <li><a href="../../../scala/http/implications-of-streaming-http-entity.html" class="page">Implications of the streaming nature of Request/Response Entities</a></li>
  <li><a href="../../../scala/http/low-level-server-side-api.html" class="page">Low-Level Server-Side API</a></li>
  <li><a href="../../../scala/http/routing-dsl/index.html" class="page">High-level Server-Side API</a>
  <ul>
    <li><a href="../../../scala/http/routing-dsl/index.html#minimal-example" class="header">Minimal Example</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#longer-example" class="header">Longer Example</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#handling-http-server-failures-in-the-high-level-api" class="header">Handling HTTP Server failures in the High-Level API</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#configuring-server-side-https" class="header">Configuring Server-side HTTPS</a></li>
    <li><a href="../../../scala/http/routing-dsl/overview.html" class="page">Routing DSL Overview</a></li>
    <li><a href="../../../scala/http/routing-dsl/routes.html" class="page">Routes</a></li>
    <li><a href="../../../scala/http/routing-dsl/directives/index.html" class="page">Directives</a></li>
    <li><a href="../../../scala/http/routing-dsl/rejections.html" class="page">Rejections</a></li>
    <li><a href="../../../scala/http/routing-dsl/exception-handling.html" class="page">Exception Handling</a></li>
    <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-extraction" class="active page">Case Class Extraction</a>
    <ul>
      <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-validation" class="header">Case Class Validation</a></li>
    </ul></li>
    <li><a href="../../../scala/http/routing-dsl/source-streaming-support.html" class="page">Source Streaming</a></li>
    <li><a href="../../../scala/http/routing-dsl/testkit.html" class="page">Route TestKit</a></li>
    <li><a href="../../../scala/http/routing-dsl/HttpApp.html" class="page">HttpApp Bootstrap</a></li>
  </ul></li>
  <li><a href="../../../scala/http/websocket-support.html" class="page">Server-Side WebSocket Support</a></li>
  <li><a href="../../../scala/http/client-side/index.html" class="page">Consuming HTTP-based Services (Client-Side)</a></li>
  <li><a href="../../../scala/http/server-side-https-support.html" class="page">Server-Side HTTPS Support</a></li>
  <li><a href="../../../scala/http/handling-blocking-operations-in-akka-http-routes.html" class="page">Handling blocking operations in Akka HTTP</a></li>
  <li><a href="../../../scala/http/migration-guide/index.html" class="page">Migration Guides</a></li>
  <li><a href="../../../scala/http/release-notes.html" class="page">Release Notes</a></li>
</ul>
</nav>
</div>
</header>

<aside class="show-for-large">
<header class="nav-header fixed-sidebar-header">
<div class="nav-header-title">
<h1><a href="../../../scala/http/index.html">Akka HTTP</a></h1>
</div>
<div class="nav-header-version">
Version 10.0.8
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Languages"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search"/>
</div>
</header>
<nav class="site-nav fixed-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="../../../scala/http/security.html" class="page">Security Announcements</a></li>
  <li><a href="../../../scala/http/introduction.html" class="page">Introduction</a></li>
  <li><a href="../../../scala/http/configuration.html" class="page">Configuration</a></li>
  <li><a href="../../../scala/http/common/index.html" class="page">Common Abstractions (Client- and Server-Side)</a></li>
  <li><a href="../../../scala/http/implications-of-streaming-http-entity.html" class="page">Implications of the streaming nature of Request/Response Entities</a></li>
  <li><a href="../../../scala/http/low-level-server-side-api.html" class="page">Low-Level Server-Side API</a></li>
  <li><a href="../../../scala/http/routing-dsl/index.html" class="page">High-level Server-Side API</a>
  <ul>
    <li><a href="../../../scala/http/routing-dsl/index.html#minimal-example" class="header">Minimal Example</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#longer-example" class="header">Longer Example</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#handling-http-server-failures-in-the-high-level-api" class="header">Handling HTTP Server failures in the High-Level API</a></li>
    <li><a href="../../../scala/http/routing-dsl/index.html#configuring-server-side-https" class="header">Configuring Server-side HTTPS</a></li>
    <li><a href="../../../scala/http/routing-dsl/overview.html" class="page">Routing DSL Overview</a></li>
    <li><a href="../../../scala/http/routing-dsl/routes.html" class="page">Routes</a></li>
    <li><a href="../../../scala/http/routing-dsl/directives/index.html" class="page">Directives</a></li>
    <li><a href="../../../scala/http/routing-dsl/rejections.html" class="page">Rejections</a></li>
    <li><a href="../../../scala/http/routing-dsl/exception-handling.html" class="page">Exception Handling</a></li>
    <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-extraction" class="active page">Case Class Extraction</a>
    <ul>
      <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-validation" class="header">Case Class Validation</a></li>
    </ul></li>
    <li><a href="../../../scala/http/routing-dsl/source-streaming-support.html" class="page">Source Streaming</a></li>
    <li><a href="../../../scala/http/routing-dsl/testkit.html" class="page">Route TestKit</a></li>
    <li><a href="../../../scala/http/routing-dsl/HttpApp.html" class="page">HttpApp Bootstrap</a></li>
  </ul></li>
  <li><a href="../../../scala/http/websocket-support.html" class="page">Server-Side WebSocket Support</a></li>
  <li><a href="../../../scala/http/client-side/index.html" class="page">Consuming HTTP-based Services (Client-Side)</a></li>
  <li><a href="../../../scala/http/server-side-https-support.html" class="page">Server-Side HTTPS Support</a></li>
  <li><a href="../../../scala/http/handling-blocking-operations-in-akka-http-routes.html" class="page">Handling blocking operations in Akka HTTP</a></li>
  <li><a href="../../../scala/http/migration-guide/index.html" class="page">Migration Guides</a></li>
  <li><a href="../../../scala/http/release-notes.html" class="page">Release Notes</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer fixed-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="../../../images/akka-logo-reverse.svg"></a>

</footer>
</aside>

<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">

<article class="page-content row">
<div class="small-12 large-9 column" id="docs">
<a id="case-class-extraction"></a>
<h1><a href="#case-class-extraction" name="case-class-extraction" class="anchor"><span class="anchor-link"></span></a>Case Class Extraction</h1>
<p>The value extraction performed by <a href="directives/index.html#directives">Directives</a> is a nice way of providing your route logic with interesting request properties, all with proper type-safety and error handling. However, in some case you might want even more. Consider this example:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(red: Int, green: Int, blue: Int)

val route =
  path(&quot;color&quot;) {
    parameters(&#39;red.as[Int], &#39;green.as[Int], &#39;blue.as[Int]) { (red, green, blue) =&gt;
      val color = Color(red, green, blue)
      // ... route working with the `color` instance
      null // hide
    }
  }
Get(&quot;/color?red=1&amp;green=2&amp;blue=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(1,2,3)&quot; } // hide</code></pre>
<p>Here the <a href="directives/parameter-directives/parameters.html#parameters-scala">parameters</a> directives is employed to extract three <code>Int</code> values, which are then used to construct an instance of the <code>Color</code> case class. So far so good. However, if the model classes we&rsquo;d like to work with have more than just a few parameters the overhead introduced by capturing the arguments as extractions only to feed them into the model class constructor directly afterwards can somewhat clutter up your route definitions.</p>
<p>If your model classes are case classes, as in our example, Akka HTTP supports an even shorter and more concise syntax. You can also write the example above like this:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(red: Int, green: Int, blue: Int)

val route =
  path(&quot;color&quot;) {
    parameters(&#39;red.as[Int], &#39;green.as[Int], &#39;blue.as[Int]).as(Color) { color =&gt;
      // ... route working with the `color` instance
      null // hide
    }
  }
Get(&quot;/color?red=1&amp;green=2&amp;blue=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(1,2,3)&quot; } // hide</code></pre>
<p>You can postfix any directive with extractions with an <code>as(...)</code> call. By simply passing the companion object of your model case class to the <code>as</code> modifier method the underlying directive is transformed into an equivalent one, which extracts only one value of the type of your model class. Note that there is no reflection involved and your case class does not have to implement any special interfaces. The only requirement is that the directive you attach the <code>as</code> call to produces the right number of extractions, with the right types and in the right order.</p>
<p>If you&rsquo;d like to construct a case class instance from extractions produced by <em>several</em> directives you can first join the directives with the <code>&amp;</code> operator before using the <code>as</code> call:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(name: String, red: Int, green: Int, blue: Int)

val route =
  (path(&quot;color&quot; / Segment) &amp; parameters(&#39;r.as[Int], &#39;g.as[Int], &#39;b.as[Int]))
    .as(Color) { color =&gt;
      // ... route working with the `color` instance
      null // hide
    }
Get(&quot;/color/abc?r=1&amp;g=2&amp;b=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(abc,1,2,3)&quot; } // hide</code></pre>
<p>Here the <code>Color</code> class has gotten another member, <code>name</code>, which is supplied not as a parameter but as a path element. By joining the <code>path</code> and <code>parameters</code> directives with <code>&amp;</code> you create a directive extracting 4 values, which directly fit the member list of the <code>Color</code> case class. Therefore you can use the <code>as</code> modifier to convert the directive into one extracting only a single <code>Color</code> instance.</p>
<p>Generally, when you have routes that work with, say, more than 3 extractions it&rsquo;s a good idea to introduce a case class for these and resort to case class extraction. Especially since it supports another nice feature: validation.</p><div class="callout warning "><div class="callout-title">Caution</div>
<p>There is one quirk to look out for when using case class extraction: If you create an explicit companion object for your case class, no matter whether you actually add any members to it or not, the syntax presented above will not (quite) work anymore. Instead of <code>as(Color)</code> you will then have to say <code>as(Color.apply)</code>. This behavior appears as if it&rsquo;s not really intended, so this might be improved in future Scala versions.</p></div>
<h2><a href="#case-class-validation" name="case-class-validation" class="anchor"><span class="anchor-link"></span></a>Case Class Validation</h2>
<p>In many cases your web service needs to verify input parameters according to some logic before actually working with them. E.g. in the example above the restriction might be that all color component values must be between 0 and 255. You could get this done with a few <a href="directives/misc-directives/validate.html#validate">validate</a> directives but this would quickly become cumbersome and hard to read.</p>
<p>If you use case class extraction you can put the verification logic into the constructor of your case class, where it should be:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(name: String, red: Int, green: Int, blue: Int) {
  require(!name.isEmpty, &quot;color name must not be empty&quot;)
  require(0 &lt;= red &amp;&amp; red &lt;= 255, &quot;red color component must be between 0 and 255&quot;)
  require(0 &lt;= green &amp;&amp; green &lt;= 255, &quot;green color component must be between 0 and 255&quot;)
  require(0 &lt;= blue &amp;&amp; blue &lt;= 255, &quot;blue color component must be between 0 and 255&quot;)
}</code></pre>
<p>If you write your validations like this Akka HTTP&rsquo;s case class extraction logic will properly pick up all error messages and generate a <code>ValidationRejection</code> if something goes wrong. By default, <code>ValidationRejections</code> are converted into <code>400 Bad Request</code> error response by the default <a href="rejections.html#the-rejectionhandler">RejectionHandler</a>, if no subsequent route successfully handles the request.</p>
</div>
</article>

<div class="row">
<div class="small-12 large-9 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="../../../scala/http/routing-dsl/exception-handling.html"><i class="icon-prev"></i> <span class="link-prev">Exception Handling</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="../../../scala/http/routing-dsl/source-streaming-support.html">Source Streaming <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>

<div class="source-github row">
The source code for this page can be found <a href="http://github.com/akka/akka-http/tree/master/docs/src/main/paradox/scala/http/routing-dsl/case-class-extraction.md">here</a>.
</div>


<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="../../../images/akka-icon.svg">
<section class="copyright">
<div>&copy; 2011-2017 <a href="https://www.lightbend.com">Lightbend</a></div>
<div>Akka HTTP is Open Source and available under the Apache 2 License.</div>
</section>
</footer>

</section>
</main>

<script type="text/javascript" src="../../../js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../../js/groups.js"></script>
<script type="text/javascript" src="../../../js/page.js"></script>
<script type="text/javascript" src="../../../js/magellan.js"></script>

<style type="text/css">@import "../../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
var version = "10.0.8";

var lang = "scala";
var path = window.location.pathname;
if (path.includes("/java/") || path.includes("java.html")) {
lang = "java";
}

docsearch({
apiKey: '0ccbb8bf5148554a406fbf07df0a93b9',
indexName: 'akka-http',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5,
facetFilters: ["version:" + version, "language:" + lang]
}
});

docsearch({
apiKey: '0ccbb8bf5148554a406fbf07df0a93b9',
indexName: 'akka-http',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5,
facetFilters: ["version:" + version, "language:" + lang]
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>


</body>
</html>
