<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
  <title>Case Class Extraction · Akka HTTP</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content='akka-http-docs'/>
  <link
      href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc"
      rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="../../../js/page.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../lib/normalize.css/normalize.css"/>
  <link rel="stylesheet" type="text/css" href="../../../lib/foundation/dist/foundation.min.css"/>
  <link rel="stylesheet" type="text/css" href="../../../css/page.css"/>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/>
</head>

<body>
<div class="off-canvas-wrapper">
  <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

    <div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
      <nav class="off-canvas-nav">
        <div class="nav-home">
        <a href="../../../index.html" >
        <span class="home-icon">⌂</span>Akka HTTP
        </a>
        <div class="version-number">
        10.0.5
        </div>
        </div>
        <div class="nav-toc">
        <ul>
          <li><a href="../../../security.html">Security announcements</a></li>
          <li><a href="../../../release-notes.html">Release Notes</a></li>
          <li><a href="../../../java.html">Java Documentation</a>
          <ul>
            <li><a href="../../../java/http/index.html">Akka HTTP</a>
            <ul>
              <li><a href="../../../java/http/introduction.html">Introduction</a></li>
              <li><a href="../../../java/http/configuration.html">Configuration</a></li>
              <li><a href="../../../java/http/common/index.html">Common Abstractions (Client- and Server-Side)</a></li>
              <li><a href="../../../java/http/implications-of-streaming-http-entity.html">Implications of the streaming nature of Request/Response Entities</a></li>
              <li><a href="../../../java/http/server-side/low-level-server-side-api.html">Low-Level Server-Side API</a></li>
              <li><a href="../../../java/http/routing-dsl/index.html">High-level Server-Side API</a></li>
              <li><a href="../../../java/http/server-side/websocket-support.html">Server-Side WebSocket Support</a></li>
              <li><a href="../../../java/http/client-side/index.html">Consuming HTTP-based Services (Client-Side)</a></li>
              <li><a href="../../../java/http/server-side-https-support.html">Server-Side HTTPS Support</a></li>
              <li><a href="../../../java/http/migration-guide/index.html">Migration Guides (Java)</a></li>
            </ul></li>
          </ul></li>
          <li><a href="../../../scala.html">Scala Documentation</a>
          <ul>
            <li><a href="../../../scala/http/index.html">Akka HTTP</a>
            <ul>
              <li><a href="../../../scala/http/introduction.html">Introduction</a></li>
              <li><a href="../../../scala/http/configuration.html">Configuration</a></li>
              <li><a href="../../../scala/http/common/index.html">Common Abstractions (Client- and Server-Side)</a></li>
              <li><a href="../../../scala/http/implications-of-streaming-http-entity.html">Implications of the streaming nature of Request/Response Entities</a></li>
              <li><a href="../../../scala/http/low-level-server-side-api.html">Low-Level Server-Side API</a></li>
              <li><a href="../../../scala/http/routing-dsl/index.html">High-level Server-Side API</a></li>
              <li><a href="../../../scala/http/websocket-support.html">Server-Side WebSocket Support</a></li>
              <li><a href="../../../scala/http/client-side/index.html">Consuming HTTP-based Services (Client-Side)</a></li>
              <li><a href="../../../scala/http/server-side-https-support.html">Server-Side HTTPS Support</a></li>
              <li><a href="../../../scala/http/handling-blocking-operations-in-akka-http-routes.html">Handling blocking operations in Akka HTTP</a></li>
              <li><a href="../../../scala/http/migration-guide/index.html">Migration Guides</a></li>
            </ul></li>
          </ul></li>
        </ul>
        </div>

      </nav>
    </div>

    <div class="off-canvas-content" data-off-canvas-content>

      <header class="site-header expanded row">
        <div class="small-12 column">
          <a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>

          <img src="../../../css/../mini-akka-logo.png" alt="Akka logo" style="float: left"/> <div class="title"><a href="../../../index.html">Akka HTTP</a></div>


          <div style="position: relative; right:0; min-width:25%" class="float-right">
            <input type="search" id="search" class="form-control" style="margin: 10px 0;" placeholder="Search the docs..."/>
          </div>

        </div>
      </header>

      <div class="expanded row">

        <div class="medium-3 large-2 show-for-medium column">

          <nav class="site-nav">
            <div class="nav-home">
            <a href="../../../index.html" >
            <span class="home-icon">⌂</span>Akka HTTP
            </a>
            <div class="version-number">
            10.0.5
            </div>
            </div>
            <div class="nav-toc">
            <ul>
              <li><a href="../../../security.html">Security announcements</a></li>
              <li><a href="../../../release-notes.html">Release Notes</a></li>
              <li><a href="../../../java.html">Java Documentation</a>
              <ul>
                <li><a href="../../../java/http/index.html">Akka HTTP</a>
                <ul>
                  <li><a href="../../../java/http/introduction.html">Introduction</a></li>
                  <li><a href="../../../java/http/configuration.html">Configuration</a></li>
                  <li><a href="../../../java/http/common/index.html">Common Abstractions (Client- and Server-Side)</a></li>
                  <li><a href="../../../java/http/implications-of-streaming-http-entity.html">Implications of the streaming nature of Request/Response Entities</a></li>
                  <li><a href="../../../java/http/server-side/low-level-server-side-api.html">Low-Level Server-Side API</a></li>
                  <li><a href="../../../java/http/routing-dsl/index.html">High-level Server-Side API</a></li>
                  <li><a href="../../../java/http/server-side/websocket-support.html">Server-Side WebSocket Support</a></li>
                  <li><a href="../../../java/http/client-side/index.html">Consuming HTTP-based Services (Client-Side)</a></li>
                  <li><a href="../../../java/http/server-side-https-support.html">Server-Side HTTPS Support</a></li>
                  <li><a href="../../../java/http/migration-guide/index.html">Migration Guides (Java)</a></li>
                </ul></li>
              </ul></li>
              <li><a href="../../../scala.html">Scala Documentation</a>
              <ul>
                <li><a href="../../../scala/http/index.html">Akka HTTP</a>
                <ul>
                  <li><a href="../../../scala/http/introduction.html">Introduction</a></li>
                  <li><a href="../../../scala/http/configuration.html">Configuration</a></li>
                  <li><a href="../../../scala/http/common/index.html">Common Abstractions (Client- and Server-Side)</a></li>
                  <li><a href="../../../scala/http/implications-of-streaming-http-entity.html">Implications of the streaming nature of Request/Response Entities</a></li>
                  <li><a href="../../../scala/http/low-level-server-side-api.html">Low-Level Server-Side API</a></li>
                  <li><a href="../../../scala/http/routing-dsl/index.html">High-level Server-Side API</a></li>
                  <li><a href="../../../scala/http/websocket-support.html">Server-Side WebSocket Support</a></li>
                  <li><a href="../../../scala/http/client-side/index.html">Consuming HTTP-based Services (Client-Side)</a></li>
                  <li><a href="../../../scala/http/server-side-https-support.html">Server-Side HTTPS Support</a></li>
                  <li><a href="../../../scala/http/handling-blocking-operations-in-akka-http-routes.html">Handling blocking operations in Akka HTTP</a></li>
                  <li><a href="../../../scala/http/migration-guide/index.html">Migration Guides</a></li>
                </ul></li>
              </ul></li>
            </ul>
            </div>

          </nav>
        </div>

        <div class="small-12 medium-9 large-10 column">
          <section class="site-content">

            <div class="page-header row">
              <div class="medium-12 show-for-medium column">
                <div class="nav-breadcrumbs">
                  <ul>
                    <li><a href="../../../index.html">Akka HTTP</a></li>
                    <li><a href="../../../scala.html">Scala Documentation</a></li>
                    <li><a href="../../../scala/http/index.html">Akka HTTP</a></li>
                    <li><a href="../../../scala/http/routing-dsl/index.html">High-level Server-Side API</a></li>
                    <li>Case Class Extraction</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="page-content row">
              <div class="small-12 large-9 column" id="docs">

<a id="case-class-extraction"></a>
<h1><a href="#case-class-extraction" name="case-class-extraction" class="anchor"><span class="anchor-link"></span></a>Case Class Extraction</h1>
<p>The value extraction performed by <a href="directives/index.html#directives">Directives</a> is a nice way of providing your route logic with interesting request properties, all with proper type-safety and error handling. However, in some case you might want even more. Consider this example:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(red: Int, green: Int, blue: Int)

val route =
  path(&quot;color&quot;) {
    parameters(&#39;red.as[Int], &#39;green.as[Int], &#39;blue.as[Int]) { (red, green, blue) =&gt;
      val color = Color(red, green, blue)
      // ... route working with the `color` instance
      null // hide
    }
  }
Get(&quot;/color?red=1&amp;green=2&amp;blue=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(1,2,3)&quot; } // hide</code></pre>
<p>Here the <a href="directives/parameter-directives/parameters.html#parameters-scala">parameters</a> directives is employed to extract three <code>Int</code> values, which are then used to construct an instance of the <code>Color</code> case class. So far so good. However, if the model classes we&rsquo;d like to work with have more than just a few parameters the overhead introduced by capturing the arguments as extractions only to feed them into the model class constructor directly afterwards can somewhat clutter up your route definitions.</p>
<p>If your model classes are case classes, as in our example, Akka HTTP supports an even shorter and more concise syntax. You can also write the example above like this:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(red: Int, green: Int, blue: Int)

val route =
  path(&quot;color&quot;) {
    parameters(&#39;red.as[Int], &#39;green.as[Int], &#39;blue.as[Int]).as(Color) { color =&gt;
      // ... route working with the `color` instance
      null // hide
    }
  }
Get(&quot;/color?red=1&amp;green=2&amp;blue=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(1,2,3)&quot; } // hide</code></pre>
<p>You can postfix any directive with extractions with an <code>as(...)</code> call. By simply passing the companion object of your model case class to the <code>as</code> modifier method the underlying directive is transformed into an equivalent one, which extracts only one value of the type of your model class. Note that there is no reflection involved and your case class does not have to implement any special interfaces. The only requirement is that the directive you attach the <code>as</code> call to produces the right number of extractions, with the right types and in the right order.</p>
<p>If you&rsquo;d like to construct a case class instance from extractions produced by <em>several</em> directives you can first join the directives with the <code>&amp;</code> operator before using the <code>as</code> call:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(name: String, red: Int, green: Int, blue: Int)

val route =
  (path(&quot;color&quot; / Segment) &amp; parameters(&#39;r.as[Int], &#39;g.as[Int], &#39;b.as[Int]))
    .as(Color) { color =&gt;
      // ... route working with the `color` instance
      null // hide
    }
Get(&quot;/color/abc?r=1&amp;g=2&amp;b=3&quot;) ~&gt; route ~&gt; check { responseAs[String] shouldEqual &quot;Color(abc,1,2,3)&quot; } // hide</code></pre>
<p>Here the <code>Color</code> class has gotten another member, <code>name</code>, which is supplied not as a parameter but as a path element. By joining the <code>path</code> and <code>parameters</code> directives with <code>&amp;</code> you create a directive extracting 4 values, which directly fit the member list of the <code>Color</code> case class. Therefore you can use the <code>as</code> modifier to convert the directive into one extracting only a single <code>Color</code> instance.</p>
<p>Generally, when you have routes that work with, say, more than 3 extractions it&rsquo;s a good idea to introduce a case class for these and resort to case class extraction. Especially since it supports another nice feature: validation.</p><div class="callout warning "><div class="callout-title">Caution</div>
<p>There is one quirk to look out for when using case class extraction: If you create an explicit companion object for your case class, no matter whether you actually add any members to it or not, the syntax presented above will not (quite) work anymore. Instead of <code>as(Color)</code> you will then have to say <code>as(Color.apply)</code>. This behavior appears as if it&rsquo;s not really intended, so this might be improved in future Scala versions.</p></div>
<h2><a href="#case-class-validation" name="case-class-validation" class="anchor"><span class="anchor-link"></span></a>Case Class Validation</h2>
<p>In many cases your web service needs to verify input parameters according to some logic before actually working with them. E.g. in the example above the restriction might be that all color component values must be between 0 and 255. You could get this done with a few <a href="directives/misc-directives/validate.html#validate">validate</a> directives but this would quickly become cumbersome and hard to read.</p>
<p>If you use case class extraction you can put the verification logic into the constructor of your case class, where it should be:</p>
<pre class="prettyprint"><code class="language-scala">case class Color(name: String, red: Int, green: Int, blue: Int) {
  require(!name.isEmpty, &quot;color name must not be empty&quot;)
  require(0 &lt;= red &amp;&amp; red &lt;= 255, &quot;red color component must be between 0 and 255&quot;)
  require(0 &lt;= green &amp;&amp; green &lt;= 255, &quot;green color component must be between 0 and 255&quot;)
  require(0 &lt;= blue &amp;&amp; blue &lt;= 255, &quot;blue color component must be between 0 and 255&quot;)
}</code></pre>
<p>If you write your validations like this Akka HTTP&rsquo;s case class extraction logic will properly pick up all error messages and generate a <code>ValidationRejection</code> if something goes wrong. By default, <code>ValidationRejections</code> are converted into <code>400 Bad Request</code> error response by the default <a href="rejections.html#the-rejectionhandler">RejectionHandler</a>, if no subsequent route successfully handles the request.</p>

                <div>
                  <div class="source-github">
                  The source code for this page can be found <a href="http://github.com/akka/akka-http/tree/master/docs/src/main/paradox/scala/http/routing-dsl/case-class-extraction.md">here</a>.
                  </div>

                </div>

                <div class="nav-next">
                  <p><strong>Next:</strong> <a href="../../../scala/http/routing-dsl/source-streaming-support.html">Source Streaming</a></p>
                </div>
              </div>
              <div class="large-3 show-for-large column" data-sticky-container>
                <nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
                  <div class="page-nav">
                    <div class="nav-title">On this page:</div>
                    <div class="nav-toc">
                      <ul>
                        <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-extraction">Case Class Extraction</a>
                        <ul>
                          <li><a href="../../../scala/http/routing-dsl/case-class-extraction.html#case-class-validation">Case Class Validation</a></li>
                        </ul></li>
                      </ul>
                    </div>
                  </div>
                </nav>
              </div>
            </div>

          </section>
        </div>

      </div>

      <footer class="site-footer">

        <section class="site-footer-base">
          <div class="expanded row">
            <div class="small-12 large-12 column">
              <div class="row site-footer-content clearfix">
                <div class="float-right">
		  Last updated: Mar 20, 2017
		</div>
                <div class="float-left">
		  &copy; 2017 <a href="https://www.lightbend.com/">Lightbend Inc.</a>
		  <span class="license">Akka HTTP is Open Source and available under the Apache 2 License.</span>
                </div>
              </div>
            </div>
          </div>
        </section>
      </footer>

    </div>
  </div>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
  var version = '10.0.5'; // replaced by paradox

  var lang = "scala";
  var path = window.location.pathname;
  if (path.includes("/java/") || path.includes("java.html")) {
    lang = "java";
  }

  docsearch({
    apiKey: '0ccbb8bf5148554a406fbf07df0a93b9',
    indexName: 'akka-http',
    inputSelector: '#search',
    algoliaOptions: {'facetFilters': ["version:" + version, "language:" + lang]},
    debug: false // Set debug to true if you want to inspect the dropdown
  });
</script>
</body>

<script type="text/javascript" src="../../../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../../js/magellan.js"></script>

<style type="text/css">@import "../../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function () {
  window.prettyPrint && prettyPrint()
});</script>

</html>
