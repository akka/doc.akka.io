<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>AWS Kinesis Connector · Alpakka</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Alpakka is a Reactive Enterprise Integration library for Java and Scala, based on Reactive Streams and Akka."/><link rel="canonical" href="https://doc.akka.io/docs/alpakka/current/kinesis.html"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Alpakka
</a>
<div class="version-number">
0.17
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="connectors.html" class="page">Connectors</a>
  <ul>
    <li><a href="amqp.html" class="page">AMQP Connector</a></li>
    <li><a href="geode.html" class="page">Apache Geode connector</a></li>
    <li><a href="solr.html" class="page">Apache Solr Connector</a></li>
    <li><a href="dynamodb.html" class="page">AWS DynamoDB Connector</a></li>
    <li><a href="kinesis.html" class="active page">AWS Kinesis Connector</a></li>
    <li><a href="awslambda.html" class="page">AWS Lambda Connector</a></li>
    <li><a href="s3.html" class="page">AWS S3 Connector</a></li>
    <li><a href="sns.html" class="page">AWS SNS Connector</a></li>
    <li><a href="sqs.html" class="page">AWS SQS Connector</a></li>
    <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue Connector</a></li>
    <li><a href="cassandra.html" class="page">Cassandra Connector</a></li>
    <li><a href="elasticsearch.html" class="page">Elasticsearch Connector</a></li>
    <li><a href="file.html" class="page">File Connectors</a></li>
    <li><a href="ftp.html" class="page">FTP Connector</a></li>
    <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
    <li><a href="hbase.html" class="page">HBase connector</a></li>
    <li><a href="ironmq.html" class="page">IronMq Connector</a></li>
    <li><a href="jms.html" class="page">JMS Connector</a></li>
    <li><a href="mongodb.html" class="page">MongoDB Connector</a></li>
    <li><a href="mqtt.html" class="page">MQTT Connector</a></li>
    <li><a href="orientdb.html" class="page">OrientDB Connector</a></li>
    <li><a href="sse.html" class="page">Server-sent Events (SSE) Connector</a></li>
    <li><a href="slick.html" class="page">Slick (JDBC) Connector</a></li>
    <li><a href="spring-web.html" class="page">Spring Web</a></li>
    <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket Connector</a></li>
  </ul></li>
  <li><a href="external-connectors.html" class="page">External Connectors</a></li>
  <li><a href="external-components.html" class="page">External Components</a></li>
  <li><a href="examples/index.html" class="page">Self-contained examples</a>
  <ul>
    <li><a href="examples/jms-samples.html" class="page">JMS examples</a></li>
    <li><a href="examples/ftp-samples.html" class="page">FTP examples</a></li>
    <li><a href="examples/csv-samples.html" class="page">CSV examples</a></li>
    <li><a href="examples/elasticsearch-samples.html" class="page">Elasticsearch examples</a></li>
  </ul></li>
  <li><a href="other-docs.html" class="page">Other documentation</a></li>
  <li><a href="patterns.html" class="page">Integration Patterns</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a>
  <ul>
    <li><a href="data-transformations/parsing-lines.html" class="page">Parsing Lines</a></li>
    <li><a href="data-transformations/json.html" class="page">JSON</a></li>
    <li><a href="data-transformations/compression.html" class="page">Compressing/decompressing</a></li>
    <li><a href="data-transformations/csv.html" class="page">Comma-Separated Values - CSV</a></li>
    <li><a href="data-transformations/recordio.html" class="page">RecordIO Framing</a></li>
    <li><a href="data-transformations/xml.html" class="page">Extensible Markup Language - XML</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html" class="logo" style="margin-top: 15px;"><svg class="svg-icon svg-icon-logo" style="height: 45px; width: 184px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1070 262"><title>akka-stream-alpakka</title><g id="akka-stream-alpakka" class="svg-icon-logo-text" fill="#fff"><path d="M349.6 105.5v-12.2h19.9v58.4c0 7.1 1.7 9.8 6.1 9.8 1.2 0 2.7-.2 4.1-.3v16.1c-2.2.8-5.5 1.3-9.8 1.3-4.8 0-8.6-.8-11.6-2.7-3.7-2.5-6-5.8-6.8-10.1-5.8 8.8-15.4 13.1-28.7 13.1-11.8 0-21.7-4.1-29.9-12.6-8-8.5-12-18.8-12-31.2s4-22.7 12-31c8.1-8.5 18.1-12.6 29.9-12.6 13.6 0 23.7 6 26.8 14zm-5.9 47.9c5-4.8 7.5-11 7.5-18.3s-2.5-13.4-7.5-18.3c-4.8-4.8-11-7.3-18.1-7.3-7.1 0-12.9 2.5-17.8 7.3-4.6 4.8-7 11-7 18.3s2.3 13.4 7 18.3c4.8 4.8 10.6 7.3 17.8 7.3 7.1 0 13.3-2.5 18.1-7.3zM388.5 177v-115.7h19.8v67.6l30.9-35.5h22.8l-32.7 37.4 36.2 46.3h-22.6l-26.4-33.7-8.3 9.3v24.3h-19.7zM470.8 177v-115.7h19.8v67.6l30.9-35.5h22.9l-32.7 37.4 36.2 46.3h-22.6l-26.4-33.7-8.3 9.3v24.3h-19.8zM607.9 105.5v-12.2h19.9v58.4c0 7.1 1.7 9.8 6.1 9.8 1.2 0 2.7-.2 4.1-.3v16.1c-2.2.8-5.5 1.3-9.8 1.3-4.8 0-8.6-.8-11.6-2.7-3.7-2.5-6-5.8-6.8-10.1-5.8 8.8-15.4 13.1-28.7 13.1-11.8 0-21.7-4.1-29.9-12.6-8-8.5-12-18.8-12-31.2s4-22.7 12-31c8.1-8.5 18.1-12.6 29.9-12.6 13.5 0 23.6 6 26.8 14zm-6 47.9c5-4.8 7.5-11 7.5-18.3s-2.5-13.4-7.5-18.3c-4.8-4.8-11-7.3-18.1-7.3-7.1 0-12.9 2.5-17.8 7.3-4.6 4.8-7 11-7 18.3s2.3 13.4 7 18.3c4.8 4.8 10.6 7.3 17.8 7.3 7.1 0 13.3-2.5 18.1-7.3z"/></g><path fill="#0B5567" d="M230.3 212.8c35.9 28.7 58.9-57 1.7-72.8-48-13.3-96.3 9.5-144.7 62.7 0 0 89.4-32.7 143 10.1z"/><path fill="#15A9CE" d="M88.1 202c34.4-35.7 91.6-75.5 144.9-60.8 12.4 3.5 21.2 10.7 26.9 19.3l-50.4-101.7c-7.2-11.5-25.6-9.1-36-.3l-133.2 111.6c-12.1 10.4-12.8 28.9-1.6 40.1 9.9 9.9 25.6 10.8 36.5 2l12.9-10.2z"/></g></svg>
</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Alpakka
</a>
<div class="version-number">
0.17
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="connectors.html" class="page">Connectors</a>
  <ul>
    <li><a href="amqp.html" class="page">AMQP Connector</a></li>
    <li><a href="geode.html" class="page">Apache Geode connector</a></li>
    <li><a href="solr.html" class="page">Apache Solr Connector</a></li>
    <li><a href="dynamodb.html" class="page">AWS DynamoDB Connector</a></li>
    <li><a href="kinesis.html" class="active page">AWS Kinesis Connector</a></li>
    <li><a href="awslambda.html" class="page">AWS Lambda Connector</a></li>
    <li><a href="s3.html" class="page">AWS S3 Connector</a></li>
    <li><a href="sns.html" class="page">AWS SNS Connector</a></li>
    <li><a href="sqs.html" class="page">AWS SQS Connector</a></li>
    <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue Connector</a></li>
    <li><a href="cassandra.html" class="page">Cassandra Connector</a></li>
    <li><a href="elasticsearch.html" class="page">Elasticsearch Connector</a></li>
    <li><a href="file.html" class="page">File Connectors</a></li>
    <li><a href="ftp.html" class="page">FTP Connector</a></li>
    <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
    <li><a href="hbase.html" class="page">HBase connector</a></li>
    <li><a href="ironmq.html" class="page">IronMq Connector</a></li>
    <li><a href="jms.html" class="page">JMS Connector</a></li>
    <li><a href="mongodb.html" class="page">MongoDB Connector</a></li>
    <li><a href="mqtt.html" class="page">MQTT Connector</a></li>
    <li><a href="orientdb.html" class="page">OrientDB Connector</a></li>
    <li><a href="sse.html" class="page">Server-sent Events (SSE) Connector</a></li>
    <li><a href="slick.html" class="page">Slick (JDBC) Connector</a></li>
    <li><a href="spring-web.html" class="page">Spring Web</a></li>
    <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket Connector</a></li>
  </ul></li>
  <li><a href="external-connectors.html" class="page">External Connectors</a></li>
  <li><a href="external-components.html" class="page">External Components</a></li>
  <li><a href="examples/index.html" class="page">Self-contained examples</a>
  <ul>
    <li><a href="examples/jms-samples.html" class="page">JMS examples</a></li>
    <li><a href="examples/ftp-samples.html" class="page">FTP examples</a></li>
    <li><a href="examples/csv-samples.html" class="page">CSV examples</a></li>
    <li><a href="examples/elasticsearch-samples.html" class="page">Elasticsearch examples</a></li>
  </ul></li>
  <li><a href="other-docs.html" class="page">Other documentation</a></li>
  <li><a href="patterns.html" class="page">Integration Patterns</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a>
  <ul>
    <li><a href="data-transformations/parsing-lines.html" class="page">Parsing Lines</a></li>
    <li><a href="data-transformations/json.html" class="page">JSON</a></li>
    <li><a href="data-transformations/compression.html" class="page">Compressing/decompressing</a></li>
    <li><a href="data-transformations/csv.html" class="page">Comma-Separated Values - CSV</a></li>
    <li><a href="data-transformations/recordio.html" class="page">RecordIO Framing</a></li>
    <li><a href="data-transformations/xml.html" class="page">Extensible Markup Language - XML</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Alpakka</a></li>
  <li><a href="connectors.html">Connectors</a></li>
  <li>AWS Kinesis Connector</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#aws-kinesis-connector" name="aws-kinesis-connector" class="anchor"><span class="anchor-link"></span></a>AWS Kinesis Connector</h1>
<p>Amazon Kinesis supports collecting, processing, and analyzing video and data streams in real time.</p>
<p>The AWS Kinesis connects to Akka Streams to Kinesis streams.</p>
<p>For more information about Kinesis please visit the <a href="https://aws.amazon.com/documentation/kinesis/">Kinesis documentation</a>.</p>
<h3><a href="#reported-issues" name="reported-issues" class="anchor"><span class="anchor-link"></span></a>Reported issues</h3>
<p><a href="https://github.com/akka/alpakka/labels/p%3Akinesis">Tagged issues at Github</a></p>
<h2><a href="#artifacts" name="artifacts" class="anchor"><span class="anchor-link"></span></a>Artifacts</h2><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.lightbend.akka" %% "akka-stream-alpakka-kinesis" % "0.17"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.lightbend.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-stream-alpakka-kinesis_2.12&lt;/artifactId&gt;
  &lt;version&gt;0.17&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.lightbend.akka', name: 'akka-stream-alpakka-kinesis_2.12', version: '0.17'
}</code></pre></dd></dl>
<h2><a href="#create-the-kinesis-client" name="create-the-kinesis-client" class="anchor"><span class="anchor-link"></span></a>Create the Kinesis client</h2>
<p>Sources and Flows provided by this connector need a <code>AmazonKinesisAsync</code> instance to consume messages from a shard.</p><div class="callout note "><div class="callout-title">Note</div>
<p>The <code>AmazonKinesisAsync</code> instance you supply is thread-safe and can be shared amongst multiple <code>GraphStages</code>. As a result, individual <code>GraphStages</code> will not automatically shutdown the supplied client when they complete. It is recommended to shut the client instance down on Actor system termination.</p></div>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">implicit val system: ActorSystem = ActorSystem()
implicit val materializer: Materializer = ActorMaterializer()

implicit val amazonKinesisAsync: com.amazonaws.services.kinesis.AmazonKinesisAsync =
  AmazonKinesisAsyncClientBuilder.defaultClient()

system.registerOnTermination(amazonKinesisAsync.shutdown())</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final ActorSystem system = ActorSystem.create();
final ActorMaterializer materializer = ActorMaterializer.create(system);

final com.amazonaws.services.kinesis.AmazonKinesisAsync amazonKinesisAsync
        = AmazonKinesisAsyncClientBuilder.defaultClient();

system.registerOnTermination(amazonKinesisAsync::shutdown);</code></pre></dd>
</dl>
<h2><a href="#kinesis-as-source" name="kinesis-as-source" class="anchor"><span class="anchor-link"></span></a>Kinesis as Source</h2>
<p>The <code>KinesisSource</code> creates one <code>GraphStage</code> per shard. Reading from a shard requires an instance of <code>ShardSettings</code>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val settings = ShardSettings(streamName = &quot;myStreamName&quot;,
                             shardId = &quot;shard-id&quot;,
                             shardIteratorType = ShardIteratorType.TRIM_HORIZON,
                             refreshInterval = 1.second,
                             limit = 500)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final ShardSettings settings = ShardSettings.create(&quot;streamName&quot;, &quot;shard-id&quot;)
        .withShardIteratorType(ShardIteratorType.LATEST)
        .withRefreshInterval(1L, TimeUnit.SECONDS)
        .withLimit(500);</code></pre></dd>
</dl>
<p>You have the choice of reading from a single shard, or reading from multiple shards. In the case of multiple shards the results of running a separate <code>GraphStage</code> for each shard will be merged together.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>The <code>GraphStage</code> associated with a shard will remain open until the graph is stopped, or a <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html">GetRecords</a> result returns an empty shard iterator indicating that the shard has been closed. This means that if you wish to continue processing records after a merge or reshard, you will need to recreate the source with the results of a new <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_DescribeStream.html">DescribeStream</a> request, which can be done by simply creating a new <code>KinesisSource</code>. You can read more about adapting to a reshard <a href="http://docs.aws.amazon.com/streams/latest/dev/developing-consumers-with-sdk.html">here</a>.</p></div>
<p>For a single shard you simply provide the settings for a single shard.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val source: Source[com.amazonaws.services.kinesis.model.Record, NotUsed] =
  KinesisSource.basic(settings, amazonKinesisAsync)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final Source&lt;com.amazonaws.services.kinesis.model.Record, NotUsed&gt; source
        = KinesisSource.basic(settings, amazonKinesisAsync);</code></pre></dd>
</dl>
<p>You can merge multiple shards by providing a list settings.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val mergeSettings = List(
  ShardSettings(&quot;myStreamName&quot;,
                &quot;shard-id-1&quot;,
                ShardIteratorType.AT_SEQUENCE_NUMBER,
                startingSequenceNumber = Some(&quot;sequence&quot;),
                refreshInterval = 1.second,
                limit = 500),
  ShardSettings(&quot;myStreamName&quot;,
                &quot;shard-id-2&quot;,
                ShardIteratorType.AT_TIMESTAMP,
                atTimestamp = Some(new Date()),
                refreshInterval = 1.second,
                limit = 500)
)

val mergedSource: Source[Record, NotUsed] = KinesisSource.basicMerge(mergeSettings, amazonKinesisAsync)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final Source&lt;Record, NotUsed&gt; two = KinesisSource.basicMerge(Arrays.asList(settings), amazonKinesisAsync);</code></pre></dd>
</dl>
<p>The constructed <code>Source</code> will return <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_Record.html">Record</a> objects by calling <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html">GetRecords</a> at the specified interval and according to the downstream demand.</p>
<h2><a href="#kinesis-put-via-flow-or-as-sink" name="kinesis-put-via-flow-or-as-sink" class="anchor"><span class="anchor-link"></span></a>Kinesis Put via Flow or as Sink</h2>
<p>The <span class="group-scala"><a href="http://developer.lightbend.com/docs/api/alpakka/0.17/akka/stream/alpakka/kinesis/scaladsl/KinesisFlow.html">KinesisFlow</a> (or <a href="http://developer.lightbend.com/docs/api/alpakka/0.17/akka/stream/alpakka/kinesis/scaladsl/KinesisSink.html">KinesisSink</a>)</span> <span class="group-java"><a href="http://developer.lightbend.com/docs/api/alpakka/0.17/akka/stream/alpakka/kinesis/javadsl/KinesisFlow.html">KinesisFlow</a> (or <a href="http://developer.lightbend.com/docs/api/alpakka/0.17/akka/stream/alpakka/kinesis/javadsl/KinesisSink.html">KinesisSink</a>)</span> publishes messages into a Kinesis stream using it&rsquo;s partition key and message body. It uses dynamic size batches, can perform several requests in parallel and retries failed records. These features are necessary to achieve the best possible write throughput to the stream. The Flow outputs the result of publishing each record.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>Batching has a drawback: message order cannot be guaranteed, as some records within a single batch may fail to be published. That also means that the Flow output may not match the same input order.</p>
<p>More information can be found <a href="http://docs.aws.amazon.com/streams/latest/dev/developing-producers-with-sdk.html#kinesis-using-sdk-java-putrecords">here</a> and <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecords.html">here</a>.</p></div>
<p>Publishing to a Kinesis stream requires an instance of <code>KinesisFlowSettings</code>, although a default instance with sane values and a method that returns settings based on the stream shard number are also available:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val flowSettings = KinesisFlowSettings(
  parallelism = 1,
  maxBatchSize = 500,
  maxRecordsPerSecond = 1000,
  maxBytesPerSecond = 1000000,
  maxRetries = 5,
  backoffStrategy = KinesisFlowSettings.Exponential,
  retryInitialTimeout = 100.millis
)

val defaultFlowSettings = KinesisFlowSettings.defaultInstance

val fourShardFlowSettings = KinesisFlowSettings.byNumberOfShards(4)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final KinesisFlowSettings flowSettings = KinesisFlowSettings.create()
        .withParallelism(1)
        .withMaxBatchSize(500)
        .withMaxRecordsPerSecond(1_000)
        .withMaxBytesPerSecond(1_000_000)
        .withMaxRecordsPerSecond(5)
        .withBackoffStrategyExponential()
        .withRetryInitialTimeout(100L, TimeUnit.MILLISECONDS);

final KinesisFlowSettings defaultFlowSettings = KinesisFlowSettings.create();

final KinesisFlowSettings fourShardFlowSettings = KinesisFlowSettings.byNumberOfShards(4);</code></pre></dd>
</dl><div class="callout warning "><div class="callout-title">Warning</div>
<p>Note that throughput settings <code>maxRecordsPerSecond</code> and <code>maxBytesPerSecond</code> are vital to minimize server errors (like <code>ProvisionedThroughputExceededException</code>) and retries, and thus achieve a higher publication rate.</p></div>
<p>The Flow/Sink can now be created.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val flow1: Flow[PutRecordsRequestEntry, PutRecordsResultEntry, NotUsed] = KinesisFlow(&quot;myStreamName&quot;)

val flow2: Flow[PutRecordsRequestEntry, PutRecordsResultEntry, NotUsed] = KinesisFlow(&quot;myStreamName&quot;, flowSettings)

val flow3: Flow[(String, ByteString), PutRecordsResultEntry, NotUsed] =
  KinesisFlow.byParititonAndBytes(&quot;myStreamName&quot;)

val flow4: Flow[(String, ByteBuffer), PutRecordsResultEntry, NotUsed] =
  KinesisFlow.byPartitionAndData(&quot;myStreamName&quot;)

val sink1: Sink[PutRecordsRequestEntry, NotUsed] = KinesisSink(&quot;myStreamName&quot;)
val sink2: Sink[PutRecordsRequestEntry, NotUsed] = KinesisSink(&quot;myStreamName&quot;, flowSettings)
val sink3: Sink[(String, ByteString), NotUsed] = KinesisSink.byParititonAndBytes(&quot;myStreamName&quot;)
val sink4: Sink[(String, ByteBuffer), NotUsed] = KinesisSink.byPartitionAndData(&quot;myStreamName&quot;)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">final Flow&lt;PutRecordsRequestEntry, PutRecordsResultEntry, NotUsed&gt; flow
        = KinesisFlow.apply(&quot;streamName&quot;, flowSettings, amazonKinesisAsync);

final Flow&lt;PutRecordsRequestEntry, PutRecordsResultEntry, NotUsed&gt; defaultSettingsFlow
        = KinesisFlow.apply(&quot;streamName&quot;, amazonKinesisAsync);

final Sink&lt;PutRecordsRequestEntry, NotUsed&gt; sink
        = KinesisSink.apply(&quot;streamName&quot;, flowSettings, amazonKinesisAsync);

final Sink&lt;PutRecordsRequestEntry, NotUsed&gt; defaultSettingsSink
        = KinesisSink.apply(&quot;streamName&quot;, amazonKinesisAsync);</code></pre></dd>
</dl>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/akka/alpakka/tree/master/docs/src/main/paradox/kinesis.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="awslambda.html">AWS Lambda Connector</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="kinesis.html#aws-kinesis-connector" class="header">AWS Kinesis Connector</a>
  <ul>
    <li><a href="kinesis.html#reported-issues" class="header">Reported issues</a></li>
    <li><a href="kinesis.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="kinesis.html#create-the-kinesis-client" class="header">Create the Kinesis client</a></li>
    <li><a href="kinesis.html#kinesis-as-source" class="header">Kinesis as Source</a></li>
    <li><a href="kinesis.html#kinesis-put-via-flow-or-as-sink" class="header">Kinesis Put via Flow or as Sink</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2019</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
