<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Apache Cassandra &bull; Alpakka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Alpakka is a Reactive Enterprise Integration library for Java and Scala, based on Reactive Streams and Akka."/>
<link rel="canonical" href="https://doc.akka.io/docs/alpakka/current/cassandra.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-1.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="wrapper">
<div class="brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com?r=oss-banner-akka" target="_blank">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="nav">
<a class="banner-btn oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Enhance your Akka systems with Akka Platform [Button] - Akka Banner" href="https://www.lightbend.com/akka-platform?r=oss-banner-akka" target="_blank">
<span>Enhance your Akka systems with</span>
<img class="akka-platform-reverse-logo" src="images/banner-logos/akka-platform-reverse.svg" alt="Akka Platform" title="Akka Platform">
</a>
<div class="drop-down">
<svg class="svg-chevon-circle-down" version="1.1" id="Chevron_circled_down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path fill="#ffffff" d="M12.505,8.698L10,11L7.494,8.698c-0.198-0.196-0.518-0.196-0.718,0c-0.197,0.196-0.197,0.515,0,0.71l2.864,2.807
c0.199,0.196,0.52,0.196,0.717,0l2.864-2.807c0.199-0.195,0.198-0.514,0-0.71C13.024,8.502,12.704,8.502,12.505,8.698z M10,0.4
c-5.302,0-9.6,4.298-9.6,9.6c0,5.303,4.298,9.6,9.6,9.6s9.6-4.297,9.6-9.6C19.6,4.698,15.302,0.4,10,0.4z M10,18.354
c-4.615,0-8.354-3.74-8.354-8.354c0-4.614,3.739-8.354,8.354-8.354c4.613,0,8.354,3.74,8.354,8.354
C18.354,14.614,14.613,18.354,10,18.354z" />
</svg>
<div class="drop-down-content">
<div class="lightbend-family">
<a href="https://cloudflow.io" class="cloudflow oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Cloudflow - Logo Tag Line - Akka Banner">
<img class="cloudflow-full-color-logo" src="images/banner-logos/cloudflow-full-color.svg" alt="Cloudflow by Lightbend" title="Cloudflow by Lightbend">
</a>
<a href="https://cloudstate.io" class="cloudstate oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Cloudstate - Logo Tag Line - Akka Banner">
<img class="cloudstate-full-color-logo" src="images/banner-logos/cloudstate-full-color.svg" alt="Cloudstate by Lightbend" title="Cloudstate by Lightbend">
</a>
<a href="https://www.lagomframework.com" class="lagom oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lagom - Logo Tag Line - Akka Banner">
<img class="lagom-full-color-logo" src="images/banner-logos/lagom-full-color.svg" alt="Lagom Framework by Lightbend" title="Lagom Framework by Lightbend">
</a>
<a href="https://www.playframework.com" class="play oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Play - Logo Tag Line - Akka Banner">
<img class="play-full-color-logo" src="images/banner-logos/play-full-color.svg" alt="Play Framework by Lightbend" title="Play Framework by Lightbend">
</a>
<a href="https://www.scala-lang.org" class="scala oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Scala - Logo Tag Line - Akka Banner">
<img class="scala-full-color-logo" src="images/banner-logos/scala-full-color.svg" alt="Scala by Lightbend" title="Scala by Lightbend">
</a>
<div class="akka current">
<img class="akka-full-color-logo" src="images/banner-logos/akka-full-color.svg" alt="Akka by Lightbend" title="Akka by Lightbend">
<span>From the creators of <strong>Akka</strong>, get technology enhancements, monitoring, and expert support with Akka Platform from Lightbend.</span>
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Learn More [Button] - Akka Banner" href="https://www.lightbend.com/akka-platform?r=oss-banner-akka" target="_blank">Learn More</a>
</div>
</div>
<div class="title">The Lightbend Family</div>
</div>      
</div>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-alpakka-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Alpakka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 3.0.1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="overview.html" class="page">Overview</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a></li>
  <li><a href="amqp.html" class="page">AMQP</a></li>
  <li><a href="external/apache-camel.html" class="page">Apache Camel</a></li>
  <li><a href="cassandra.html#apache-cassandra" class="active page">Apache Cassandra</a>
  <ul>
    <li><a href="cassandra.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="cassandra.html#sessions" class="header">Sessions</a></li>
    <li><a href="cassandra.html#reading-from-cassandra" class="header">Reading from Cassandra</a></li>
    <li><a href="cassandra.html#writing-to-cassandra" class="header">Writing to Cassandra</a></li>
    <li><a href="cassandra.html#custom-session-creation" class="header">Custom Session creation</a></li>
  </ul></li>
  <li><a href="geode.html" class="page">Apache Geode</a></li>
  <li><a href="kafka.html" class="page">Apache Kafka</a></li>
  <li><a href="kudu.html" class="page">Apache Kudu</a></li>
  <li><a href="solr.html" class="page">Apache Solr</a></li>
  <li><a href="avroparquet.html" class="page">Avro Parquet</a></li>
  <li><a href="aws-event-bridge.html" class="page">AWS EventBridge</a></li>
  <li><a href="dynamodb.html" class="page">AWS DynamoDB</a></li>
  <li><a href="kinesis.html" class="page">AWS Kinesis and Firehose</a></li>
  <li><a href="awslambda.html" class="page">AWS Lambda</a></li>
  <li><a href="s3.html" class="page">AWS S3</a></li>
  <li><a href="sns.html" class="page">AWS SNS</a></li>
  <li><a href="sqs.html" class="page">AWS SQS</a></li>
  <li><a href="external/azure-event-hubs.html" class="page">Azure Event Hubs</a></li>
  <li><a href="external/azure-iot-hub.html" class="page">Azure IoT Hub</a></li>
  <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue</a></li>
  <li><a href="couchbase.html" class="page">Couchbase</a></li>
  <li><a href="elasticsearch.html" class="page">Elasticsearch</a></li>
  <li><a href="external/eventuate.html" class="page">Eventuate</a></li>
  <li><a href="file.html" class="page">File</a></li>
  <li><a href="external/fs2.html" class="page">FS2</a></li>
  <li><a href="ftp.html" class="page">FTP</a></li>
  <li><a href="google-common.html" class="page">Google Common</a></li>
  <li><a href="google-cloud-bigquery.html" class="page">Google Cloud BigQuery</a></li>
  <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
  <li><a href="google-cloud-pub-sub-grpc.html" class="page">Google Cloud Pub/Sub gRPC</a></li>
  <li><a href="google-cloud-storage.html" class="page">Google Cloud Storage</a></li>
  <li><a href="google-fcm.html" class="page">Google FCM</a></li>
  <li><a href="external/grpc.html" class="page">gRPC</a></li>
  <li><a href="hdfs.html" class="page">Hadoop Distributed File System - HDFS</a></li>
  <li><a href="hbase.html" class="page">HBase</a></li>
  <li><a href="external/http.html" class="page">HTTP</a></li>
  <li><a href="bluemix-cos.html" class="page">IBM Bluemix Cloud Object Storage</a></li>
  <li><a href="external/db2-event-store.html" class="page">IBM Db2 Event Store</a></li>
  <li><a href="influxdb.html" class="page">InfluxDB</a></li>
  <li><a href="ironmq.html" class="page">IronMQ</a></li>
  <li><a href="jms/index.html" class="page">JMS</a></li>
  <li><a href="external/mapr.html" class="page">MapR Database</a></li>
  <li><a href="mongodb.html" class="page">MongoDB</a></li>
  <li><a href="mqtt.html" class="page">MQTT</a></li>
  <li><a href="mqtt-streaming.html" class="page">MQTT Streaming</a></li>
  <li><a href="orientdb.html" class="page">OrientDB</a></li>
  <li><a href="external/pulsar.html" class="page">Pulsar</a></li>
  <li><a href="pravega.html" class="page">Pravega</a></li>
  <li><a href="sse.html" class="page">Server-sent Events (SSE)</a></li>
  <li><a href="slick.html" class="page">Slick (JDBC)</a></li>
  <li><a href="spring-web.html" class="page">Spring Web</a></li>
  <li><a href="external/tcp.html" class="page">TCP</a></li>
  <li><a href="udp.html" class="page">UDP</a></li>
  <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Alpakka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 3.0.1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="overview.html" class="page">Overview</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a></li>
  <li><a href="amqp.html" class="page">AMQP</a></li>
  <li><a href="external/apache-camel.html" class="page">Apache Camel</a></li>
  <li><a href="cassandra.html#apache-cassandra" class="active page">Apache Cassandra</a>
  <ul>
    <li><a href="cassandra.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="cassandra.html#sessions" class="header">Sessions</a></li>
    <li><a href="cassandra.html#reading-from-cassandra" class="header">Reading from Cassandra</a></li>
    <li><a href="cassandra.html#writing-to-cassandra" class="header">Writing to Cassandra</a></li>
    <li><a href="cassandra.html#custom-session-creation" class="header">Custom Session creation</a></li>
  </ul></li>
  <li><a href="geode.html" class="page">Apache Geode</a></li>
  <li><a href="kafka.html" class="page">Apache Kafka</a></li>
  <li><a href="kudu.html" class="page">Apache Kudu</a></li>
  <li><a href="solr.html" class="page">Apache Solr</a></li>
  <li><a href="avroparquet.html" class="page">Avro Parquet</a></li>
  <li><a href="aws-event-bridge.html" class="page">AWS EventBridge</a></li>
  <li><a href="dynamodb.html" class="page">AWS DynamoDB</a></li>
  <li><a href="kinesis.html" class="page">AWS Kinesis and Firehose</a></li>
  <li><a href="awslambda.html" class="page">AWS Lambda</a></li>
  <li><a href="s3.html" class="page">AWS S3</a></li>
  <li><a href="sns.html" class="page">AWS SNS</a></li>
  <li><a href="sqs.html" class="page">AWS SQS</a></li>
  <li><a href="external/azure-event-hubs.html" class="page">Azure Event Hubs</a></li>
  <li><a href="external/azure-iot-hub.html" class="page">Azure IoT Hub</a></li>
  <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue</a></li>
  <li><a href="couchbase.html" class="page">Couchbase</a></li>
  <li><a href="elasticsearch.html" class="page">Elasticsearch</a></li>
  <li><a href="external/eventuate.html" class="page">Eventuate</a></li>
  <li><a href="file.html" class="page">File</a></li>
  <li><a href="external/fs2.html" class="page">FS2</a></li>
  <li><a href="ftp.html" class="page">FTP</a></li>
  <li><a href="google-common.html" class="page">Google Common</a></li>
  <li><a href="google-cloud-bigquery.html" class="page">Google Cloud BigQuery</a></li>
  <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
  <li><a href="google-cloud-pub-sub-grpc.html" class="page">Google Cloud Pub/Sub gRPC</a></li>
  <li><a href="google-cloud-storage.html" class="page">Google Cloud Storage</a></li>
  <li><a href="google-fcm.html" class="page">Google FCM</a></li>
  <li><a href="external/grpc.html" class="page">gRPC</a></li>
  <li><a href="hdfs.html" class="page">Hadoop Distributed File System - HDFS</a></li>
  <li><a href="hbase.html" class="page">HBase</a></li>
  <li><a href="external/http.html" class="page">HTTP</a></li>
  <li><a href="bluemix-cos.html" class="page">IBM Bluemix Cloud Object Storage</a></li>
  <li><a href="external/db2-event-store.html" class="page">IBM Db2 Event Store</a></li>
  <li><a href="influxdb.html" class="page">InfluxDB</a></li>
  <li><a href="ironmq.html" class="page">IronMQ</a></li>
  <li><a href="jms/index.html" class="page">JMS</a></li>
  <li><a href="external/mapr.html" class="page">MapR Database</a></li>
  <li><a href="mongodb.html" class="page">MongoDB</a></li>
  <li><a href="mqtt.html" class="page">MQTT</a></li>
  <li><a href="mqtt-streaming.html" class="page">MQTT Streaming</a></li>
  <li><a href="orientdb.html" class="page">OrientDB</a></li>
  <li><a href="external/pulsar.html" class="page">Pulsar</a></li>
  <li><a href="pravega.html" class="page">Pravega</a></li>
  <li><a href="sse.html" class="page">Server-sent Events (SSE)</a></li>
  <li><a href="slick.html" class="page">Slick (JDBC)</a></li>
  <li><a href="spring-web.html" class="page">Spring Web</a></li>
  <li><a href="external/tcp.html" class="page">TCP</a></li>
  <li><a href="udp.html" class="page">UDP</a></li>
  <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-alpakka-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#apache-cassandra" name="apache-cassandra" class="anchor"><span class="anchor-link"></span></a>Apache Cassandra</h1><div class="callout note "><div class="callout-title">Cassandra</div>
<p>Apache Cassandra is a free and open-source, distributed, wide column store, NoSQL database management system designed to handle large amounts of data across many commodity servers, providing high availability with no single point of failure. Cassandra offers robust support for clusters spanning multiple datacenters, with asynchronous masterless replication allowing low latency operations for all clients.</p>
<p>&ndash; <a href="https://en.wikipedia.org/wiki/Apache_Cassandra">Wikipedia</a></p></div>
<p>Alpakka Cassandra offers an <a href="https://doc.akka.io/docs/akka/2.6/stream/index.html">Akka Streams</a> API on top of a <a href="https://docs.datastax.com/en/drivers/java/4.10/?com/datastax/oss/driver/api/core/CqlSession.html" title="com.datastax.oss.driver.api.core.CqlSession"><code>CqlSession</code></a> from the <a href="https://docs.datastax.com/en/developer/java-driver/4.10/">Datastax Java Driver</a> version 4.0+. The <a href="cassandra.html#custom-session-creation">driver configuration</a> is provided in the same config format as Akka uses and can be placed in the same <code>application.conf</code> as your Akka settings.</p>
<table class="project-info">
<tr><th colspan="2">Project Info: Alpakka Cassandra</th></tr>
  <tr><th>Artifact</th><td><div>com.lightbend.akka</div>
  <div>akka-stream-alpakka-cassandra</div>
  <div>3.0.1</div>
  <div><a href="other-docs/snapshots.html">Snapshots are available</a></div>
  </td></tr>
  <tr><th>JDK versions</th><td><div>Adopt OpenJDK 8</div><div>Adopt OpenJDK 11</div></td></tr>
  <tr><th>Scala versions</th><td>2.12.11, 2.13.3</td></tr>
  <tr><th>JPMS module name</th><td>akka.stream.alpakka.cassandra</td></tr>
  <tr><th>License</th><td><div><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">Apache-2.0</a></div>
  </td></tr>
  <tr><th>Readiness level</th><td><div class="readiness-level"><a href="https://developer.lightbend.com/docs/introduction/getting-help/support-terminology.html#supported" target="_blank" rel="noopener">Supported</a>, <a href="https://www.lightbend.com/lightbend-subscription" target="_blank" rel="noopener">Lightbend Subscription</a> provides support</div>
  <div>Since 2.0.0, 2020-04-30</div>
  </td></tr>
  <tr><th>Home page</th><td><a href="https://doc.akka.io/docs/alpakka/current">https://doc.akka.io/docs/alpakka/current</a></td></tr>
  <tr><th>API documentation</th><td>
  <div><a href="https://doc.akka.io/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/index.html" target="_blank" rel="noopener noreferrer">API (Scaladoc)</a></div>
  </td></tr>
  <tr><th>Forums</th><td>
  <div><a href="https://discuss.lightbend.com/c/akka/" target="_blank" rel="noopener noreferrer">Lightbend Discuss</a></div>
  <div><a href="https://gitter.im/akka/akka" target="_blank" rel="noopener noreferrer">akka/akka Gitter channel</a></div>
  </td></tr>
  <tr><th>Release notes</th><td><a href="https://doc.akka.io/docs/alpakka/current/release-notes/index.html">In the documentation</a></td></tr>
  <tr><th>Issues</th><td><a href="https://github.com/akka/alpakka/labels/p%3Acassandra" target="_blank" rel="noopener noreferrer">Github issues</a></td></tr>
  <tr><th>Sources</th><td><a href="https://github.com/akka/alpakka" target="_blank" rel="noopener noreferrer">https://github.com/akka/alpakka</a></td></tr>
</table>

<h2><a href="#artifacts" name="artifacts" class="anchor"><span class="anchor-link"></span></a>Artifacts</h2>
<dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.lightbend.akka" %% "akka-stream-alpakka-cassandra" % "3.0.1"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.lightbend.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-stream-alpakka-cassandra_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;3.0.1&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  ScalaBinary: "2.12"
]
dependencies {
  implementation "com.lightbend.akka:akka-stream-alpakka-cassandra_${versions.ScalaBinary}:3.0.1"
}</code></pre></dd></dl>
<p>The table below shows direct dependencies of this module and the second tab shows all libraries it depends on transitively.</p>
<dl class="dependencies"><dt>Direct dependencies</dt><dd><table>
  <thead><tr><th>Organization</th><th>Artifact</th><th>Version</th></thead>
  <tbody>
    <tr><td>com.datastax.oss</td><td>java-driver-core</td><td><a href="https://mvnrepository.com/artifact/com.datastax.oss/java-driver-core/4.10.0" target="_blank">4.10.0</a></td></tr>
    <tr><td>com.fasterxml.jackson.core</td><td>jackson-core</td><td><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.12.0" target="_blank">2.12.0</a></td></tr>
    <tr><td>com.fasterxml.jackson.core</td><td>jackson-databind</td><td><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.12.0" target="_blank">2.12.0</a></td></tr>
    <tr><td>com.typesafe.akka</td><td>akka-stream_2.12</td><td><a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-stream_2.12/2.6.14" target="_blank">2.6.14</a></td></tr>
    <tr><td>org.scala-lang</td><td>scala-library</td><td><a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a></td></tr>
  </tbody>
</table></dd>
<dt>Dependency tree</dt><dd><pre>
com.datastax.oss    java-driver-core    <a href="https://mvnrepository.com/artifact/com.datastax.oss/java-driver-core/4.10.0" target="_blank">4.10.0</a>
    com.datastax.oss    java-driver-shaded-guava    <a href="https://mvnrepository.com/artifact/com.datastax.oss/java-driver-shaded-guava/25.1-jre-graal-sub-1" target="_blank">25.1-jre-graal-sub-1</a>    Apache 2
    com.datastax.oss    native-protocol    <a href="https://mvnrepository.com/artifact/com.datastax.oss/native-protocol/1.4.12" target="_blank">1.4.12</a>    Apache 2
    com.fasterxml.jackson.core    jackson-core    <a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.12.0" target="_blank">2.12.0</a>    The Apache Software License, Version 2.0
    com.fasterxml.jackson.core    jackson-databind    <a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.12.0" target="_blank">2.12.0</a>    The Apache Software License, Version 2.0
    com.github.jnr    jnr-posix    <a href="https://mvnrepository.com/artifact/com.github.jnr/jnr-posix/3.1.2" target="_blank">3.1.2</a>    Eclipse Public License - v 2.0
        com.github.jnr    jnr-constants    <a href="https://mvnrepository.com/artifact/com.github.jnr/jnr-constants/0.10.0" target="_blank">0.10.0</a>    The Apache Software License, Version 2.0
        com.github.jnr    jnr-ffi    <a href="https://mvnrepository.com/artifact/com.github.jnr/jnr-ffi/2.2.0" target="_blank">2.2.0</a>    The Apache Software License, Version 2.0
            com.github.jnr    jffi    <a href="https://mvnrepository.com/artifact/com.github.jnr/jffi/1.3.0" target="_blank">1.3.0</a>    The Apache Software License, Version 2.0
            com.github.jnr    jnr-a64asm    <a href="https://mvnrepository.com/artifact/com.github.jnr/jnr-a64asm/1.0.0" target="_blank">1.0.0</a>    The Apache Software License, Version 2.0
            com.github.jnr    jnr-x86asm    <a href="https://mvnrepository.com/artifact/com.github.jnr/jnr-x86asm/1.0.2" target="_blank">1.0.2</a>    MIT License
            org.ow2.asm    asm-analysis    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-analysis/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                    org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
            org.ow2.asm    asm-commons    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-commons/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm-analysis    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-analysis/7.1" target="_blank">7.1</a>    BSD
                    org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                        org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                    org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
            org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
            org.ow2.asm    asm-util    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-util/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm-analysis    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-analysis/7.1" target="_blank">7.1</a>    BSD
                    org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                        org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm-tree    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm-tree/7.1" target="_blank">7.1</a>    BSD
                    org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
                org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
            org.ow2.asm    asm    <a href="https://mvnrepository.com/artifact/org.ow2.asm/asm/7.1" target="_blank">7.1</a>    BSD
    com.github.stephenc.jcip    jcip-annotations    <a href="https://mvnrepository.com/artifact/com.github.stephenc.jcip/jcip-annotations/1.0-1" target="_blank">1.0-1</a>    Apache License, Version 2.0
    com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.4.1" target="_blank">1.4.1</a>    Apache-2.0
    io.dropwizard.metrics    metrics-core    <a href="https://mvnrepository.com/artifact/io.dropwizard.metrics/metrics-core/4.1.16" target="_blank">4.1.16</a>
        org.slf4j    slf4j-api    <a href="https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.30" target="_blank">1.7.30</a>
    io.netty    netty-handler    <a href="https://mvnrepository.com/artifact/io.netty/netty-handler/4.1.51.Final" target="_blank">4.1.51.Final</a>
        io.netty    netty-buffer    <a href="https://mvnrepository.com/artifact/io.netty/netty-buffer/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
        io.netty    netty-codec    <a href="https://mvnrepository.com/artifact/io.netty/netty-codec/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-buffer    <a href="https://mvnrepository.com/artifact/io.netty/netty-buffer/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-transport    <a href="https://mvnrepository.com/artifact/io.netty/netty-transport/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-buffer    <a href="https://mvnrepository.com/artifact/io.netty/netty-buffer/4.1.51.Final" target="_blank">4.1.51.Final</a>
                    io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-resolver    <a href="https://mvnrepository.com/artifact/io.netty/netty-resolver/4.1.51.Final" target="_blank">4.1.51.Final</a>
                    io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
        io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
        io.netty    netty-resolver    <a href="https://mvnrepository.com/artifact/io.netty/netty-resolver/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
        io.netty    netty-transport    <a href="https://mvnrepository.com/artifact/io.netty/netty-transport/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-buffer    <a href="https://mvnrepository.com/artifact/io.netty/netty-buffer/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
            io.netty    netty-resolver    <a href="https://mvnrepository.com/artifact/io.netty/netty-resolver/4.1.51.Final" target="_blank">4.1.51.Final</a>
                io.netty    netty-common    <a href="https://mvnrepository.com/artifact/io.netty/netty-common/4.1.51.Final" target="_blank">4.1.51.Final</a>
    org.hdrhistogram    HdrHistogram    <a href="https://mvnrepository.com/artifact/org.hdrhistogram/HdrHistogram/2.1.12" target="_blank">2.1.12</a>    Public Domain, per Creative Commons CC0
    org.reactivestreams    reactive-streams    <a href="https://mvnrepository.com/artifact/org.reactivestreams/reactive-streams/1.0.3" target="_blank">1.0.3</a>    CC0
    org.slf4j    slf4j-api    <a href="https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.30" target="_blank">1.7.30</a>
com.fasterxml.jackson.core    jackson-core    <a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.12.0" target="_blank">2.12.0</a>    The Apache Software License, Version 2.0
com.fasterxml.jackson.core    jackson-databind    <a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.12.0" target="_blank">2.12.0</a>    The Apache Software License, Version 2.0
com.typesafe.akka    akka-stream_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-stream_2.12/2.6.14" target="_blank">2.6.14</a>    Apache-2.0
    com.typesafe.akka    akka-actor_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-actor_2.12/2.6.14" target="_blank">2.6.14</a>    Apache-2.0
        com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.4.1" target="_blank">1.4.1</a>    Apache-2.0
        org.scala-lang.modules    scala-java8-compat_2.12    <a href="https://mvnrepository.com/artifact/org.scala-lang.modules/scala-java8-compat_2.12/0.8.0" target="_blank">0.8.0</a>    BSD 3-clause
            org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0
    com.typesafe.akka    akka-protobuf-v3_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-protobuf-v3_2.12/2.6.14" target="_blank">2.6.14</a>    Apache-2.0
    com.typesafe    ssl-config-core_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe/ssl-config-core_2.12/0.4.2" target="_blank">0.4.2</a>    Apache-2.0
        com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.4.1" target="_blank">1.4.1</a>    Apache-2.0
        org.scala-lang.modules    scala-parser-combinators_2.12    <a href="https://mvnrepository.com/artifact/org.scala-lang.modules/scala-parser-combinators_2.12/1.1.2" target="_blank">1.1.2</a>    Apache-2.0
            org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0
    org.reactivestreams    reactive-streams    <a href="https://mvnrepository.com/artifact/org.reactivestreams/reactive-streams/1.0.3" target="_blank">1.0.3</a>    CC0
    org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0
org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.11" target="_blank">2.12.11</a>    Apache-2.0</pre></dd>
</dl>

<h2><a href="#sessions" name="sessions" class="anchor"><span class="anchor-link"></span></a>Sessions</h2>

<p>Cassandra is accessed through <span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/javadsl/CassandraSession.html" title="akka.stream.alpakka.cassandra.javadsl.CassandraSession"><code>CassandraSession</code></a></span><span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/scaladsl/CassandraSession.html" title="akka.stream.alpakka.cassandra.scaladsl.CassandraSession"><code>CassandraSession</code></a></span>s which are managed by the <span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/javadsl/CassandraSessionRegistry$.html" title="akka.stream.alpakka.cassandra.javadsl.CassandraSessionRegistry"><code>CassandraSessionRegistry</code></a></span><span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/scaladsl/CassandraSessionRegistry$.html" title="akka.stream.alpakka.cassandra.scaladsl.CassandraSessionRegistry"><code>CassandraSessionRegistry</code></a></span> Akka extension. This way a session is shared across all usages within the actor system and properly shut down after the actor system is shut down.</p>

<p><span class="group-scala">The <code>CassandraSession</code> is provided to the stream factory methods as an <code>implicit</code> parameter.</span></p>

<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/CassandraSourceSpec.scala#L36-L52" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.stream.alpakka.cassandra.CassandraSessionSettings
import akka.stream.alpakka.cassandra.scaladsl.CassandraSession
import akka.stream.alpakka.cassandra.scaladsl.CassandraSessionRegistry

val system: ActorSystem = // ???
val sessionSettings = CassandraSessionSettings()
implicit val cassandraSession: CassandraSession =
  CassandraSessionRegistry.get(system).sessionFor(sessionSettings)

val version: Future[String] =
  cassandraSession
    .select(&quot;SELECT release_version FROM system.local;&quot;)
    .map(_.getString(&quot;release_version&quot;))
    .runWith(Sink.head)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraSourceTest.java#L8-L96" target="_blank" title="Go to snippet source"></a><code class="language-java"><br/>import akka.actor.ActorSystem;
import akka.stream.Materializer;
import akka.stream.alpakka.cassandra.CassandraSessionSettings;
import akka.stream.alpakka.cassandra.javadsl.CassandraSession;
import akka.stream.alpakka.cassandra.javadsl.CassandraSessionRegistry;

ActorSystem system = // ???
CassandraSessionSettings sessionSettings = CassandraSessionSettings.create();
CassandraSession cassandraSession =
    CassandraSessionRegistry.get(system).sessionFor(sessionSettings);

CompletionStage&lt;String&gt; version =
    cassandraSession
        .select(&quot;SELECT release_version FROM system.local;&quot;)
        .map(row -&gt; row.getString(&quot;release_version&quot;))
        .runWith(Sink.head(), system);</code></pre></dd>
</dl>
<p>See <a href="cassandra.html#custom-session-creation">custom session creation</a> below for tweaking this.</p>
<h2><a href="#reading-from-cassandra" name="reading-from-cassandra" class="anchor"><span class="anchor-link"></span></a>Reading from Cassandra</h2>
<p><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/javadsl/CassandraSource$.html" title="akka.stream.alpakka.cassandra.javadsl.CassandraSource"><code>CassandraSource</code></a></span><span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/scaladsl/CassandraSource$.html" title="akka.stream.alpakka.cassandra.scaladsl.CassandraSource"><code>CassandraSource</code></a></span> provides factory methods to get Akka Streams Sources from CQL queries and from <a href="https://docs.datastax.com/en/drivers/java/4.10/?com/datastax/oss/driver/api/core/cql/Statement.html" title="com.datastax.oss.driver.api.core.cql.Statement"><code>com.datastax.oss.driver.api.core.cql.Statement</code></a>s.</p>
<p>Dynamic parameters can be provided to the CQL as variable arguments.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/CassandraSourceSpec.scala#L63-L76" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.stream.alpakka.cassandra.scaladsl.CassandraSource

val ids: Future[immutable.Seq[Int]] =
  CassandraSource(s&quot;SELECT id FROM $intTable&quot;).map(row =&gt; row.getInt(&quot;id&quot;)).runWith(Sink.seq)

val idsWhere: Future[Int] =
  CassandraSource(s&quot;SELECT * FROM $intTable WHERE id = ?&quot;, value).map(_.getInt(&quot;id&quot;)).runWith(Sink.head)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraSourceTest.java#L16-L126" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.stream.alpakka.cassandra.javadsl.CassandraSource;

CompletionStage&lt;List&lt;Integer&gt;&gt; select =
    CassandraSource.create(cassandraSession, &quot;SELECT id FROM &quot; + idtable + &quot;;&quot;)
        .map(r -&gt; r.getInt(&quot;id&quot;))
        .runWith(Sink.seq(), system);

CompletionStage&lt;Integer&gt; select =
    CassandraSource.create(
            cassandraSession, &quot;SELECT * FROM &quot; + idtable + &quot; WHERE id = ?;&quot;, value)
        .map(r -&gt; r.getInt(&quot;id&quot;))
        .runWith(Sink.head(), system);</code></pre></dd>
</dl>
<p>If the statement requires specific settings, you may pass any <a href="https://docs.datastax.com/en/drivers/java/4.10/?com/datastax/oss/driver/api/core/cql/Statement.html" title="com.datastax.oss.driver.api.core.cql.Statement"><code>com.datastax.oss.driver.api.core.cql.Statement</code></a>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/CassandraSourceSpec.scala#L83-L87" target="_blank" title="Go to snippet source"></a><code class="language-scala">import com.datastax.oss.driver.api.core.cql.{Row, SimpleStatement}

val stmt = SimpleStatement.newInstance(s&quot;SELECT * FROM $intTable&quot;).setPageSize(20)

val rows: Future[immutable.Seq[Row]] = CassandraSource(stmt).runWith(Sink.seq)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraSourceTest.java#L22-L143" target="_blank" title="Go to snippet source"></a><code class="language-java">import com.datastax.oss.driver.api.core.cql.SimpleStatement;
import com.datastax.oss.driver.api.core.cql.Statement;

Statement&lt;?&gt; stmt =
    SimpleStatement.newInstance(&quot;SELECT * FROM &quot; + idtable + &quot;;&quot;).setPageSize(20);

CompletionStage&lt;List&lt;Integer&gt;&gt; select =
    CassandraSource.create(cassandraSession, stmt)
        .map(r -&gt; r.getInt(&quot;id&quot;))
        .runWith(Sink.seq(), system);</code></pre></dd>
</dl>
<p>Here we used a basic sink to complete the stream by collecting all of the stream elements into a collection. The power of streams comes from building larger data pipelines which leverage backpressure to ensure efficient flow control. Feel free to edit the example code and build <a href="https://doc.akka.io/docs/akka/2.6/stream/stream-introduction.html">more advanced stream topologies</a>.</p>
<h2><a href="#writing-to-cassandra" name="writing-to-cassandra" class="anchor"><span class="anchor-link"></span></a>Writing to Cassandra</h2>
<p><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/javadsl/CassandraFlow$.html" title="akka.stream.alpakka.cassandra.javadsl.CassandraFlow"><code>CassandraFlow</code></a></span><span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/scaladsl/CassandraFlow$.html" title="akka.stream.alpakka.cassandra.scaladsl.CassandraFlow"><code>CassandraFlow</code></a></span> provides factory methods to get Akka Streams flows to run CQL statements that change data (<code>UPDATE</code>, <code>INSERT</code>). Alpakka Cassandra creates a <a href="https://docs.datastax.com/en/drivers/java/4.10/?com/datastax/oss/driver/api/core/cql/PreparedStatement.html" title="com.datastax.oss.driver.api.core.cql.PreparedStatement"><code>PreparedStatement</code></a> and for every stream element the <code>statementBinder</code> function binds the CQL placeholders to data.</p>
<p>The incoming elements are emitted unchanged for further processing.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/CassandraFlowSpec.scala#L66-L84" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.stream.alpakka.cassandra.CassandraWriteSettings
import akka.stream.alpakka.cassandra.scaladsl.CassandraFlow
import com.datastax.oss.driver.api.core.cql.{BoundStatement, PreparedStatement}

case class Person(id: Int, name: String, city: String)

val persons =
  immutable.Seq(Person(12, &quot;John&quot;, &quot;London&quot;), Person(43, &quot;Umberto&quot;, &quot;Roma&quot;), Person(56, &quot;James&quot;, &quot;Chicago&quot;))

val statementBinder: (Person, PreparedStatement) =&gt; BoundStatement =
  (person, preparedStatement) =&gt; preparedStatement.bind(Int.box(person.id), person.name, person.city)

val written: Future[immutable.Seq[Person]] = Source(persons)
  .via(
    CassandraFlow.create(CassandraWriteSettings.defaults,
                         s&quot;INSERT INTO $table(id, name, city) VALUES (?, ?, ?)&quot;,
                         statementBinder)
  )
  .runWith(Sink.seq)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraFlowTest.java#L9-L125" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.NotUsed;
import akka.actor.ActorSystem;
import akka.japi.Function2;
import akka.japi.Pair;
import akka.stream.alpakka.cassandra.CassandraWriteSettings;
import akka.stream.alpakka.cassandra.javadsl.CassandraFlow;
import akka.stream.alpakka.testkit.javadsl.LogCapturingJunit4;
import akka.stream.javadsl.SourceWithContext;
import com.datastax.oss.driver.api.core.cql.BoundStatement;
import com.datastax.oss.driver.api.core.cql.PreparedStatement;

List&lt;Person&gt; persons =
    Arrays.asList(
        new Person(12, &quot;John&quot;, &quot;London&quot;),
        new Person(43, &quot;Umberto&quot;, &quot;Roma&quot;),
        new Person(56, &quot;James&quot;, &quot;Chicago&quot;));

Function2&lt;Person, PreparedStatement, BoundStatement&gt; statementBinder =
    (person, preparedStatement) -&gt; preparedStatement.bind(person.id, person.name, person.city);

CompletionStage&lt;List&lt;Person&gt;&gt; written =
    Source.from(persons)
        .via(
            CassandraFlow.create(
                cassandraSession,
                CassandraWriteSettings.defaults(),
                &quot;INSERT INTO &quot; + table + &quot;(id, name, city) VALUES (?, ?, ?)&quot;,
                statementBinder))
        .runWith(Sink.seq(), system);</code></pre></dd>
</dl>
<h3><a href="#update-flows-with-context" name="update-flows-with-context" class="anchor"><span class="anchor-link"></span></a>Update flows with context</h3>
<p>Alpakka Cassandra flows offer <strong>&ldquo;With Context&rdquo;</strong>-support which integrates nicely with some other Alpakka connectors.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/CassandraFlowSpec.scala#L119-L136" target="_blank" title="Go to snippet source"></a><code class="language-scala">val personsAndHandles: SourceWithContext[Person, AckHandle, NotUsed] = // ???

val written: Future[Done] = personsAndHandles
  .via(
    CassandraFlow.withContext(
      CassandraWriteSettings.defaults,
      s&quot;INSERT INTO $table(id, name, city) VALUES (?, ?, ?)&quot;,
      (person, preparedStatement) =&gt; preparedStatement.bind(Int.box(person.id), person.name, person.city)
    )
  )
  .asSource
  .mapAsync(1) {
    case (_, handle) =&gt; handle.ack()
  }
  .runWith(Sink.ignore)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraFlowTest.java#L158-L172" target="_blank" title="Go to snippet source"></a><code class="language-java">SourceWithContext&lt;Person, AckHandle, NotUsed&gt; from = // ???;
CompletionStage&lt;Done&gt; written =
    from.via(
            CassandraFlow.withContext(
                cassandraSession,
                CassandraWriteSettings.defaults(),
                &quot;INSERT INTO &quot; + table + &quot;(id, name, city) VALUES (?, ?, ?)&quot;,
                (person, preparedStatement) -&gt;
                    preparedStatement.bind(person.id, person.name, person.city)))
        .asSource()
        .mapAsync(1, pair -&gt; pair.second().ack())
        .runWith(Sink.ignore(), system);</code></pre></dd>
</dl>
<h2><a href="#custom-session-creation" name="custom-session-creation" class="anchor"><span class="anchor-link"></span></a>Custom Session creation</h2>
<p>Session creation and configuration is controlled via settings in <code>application.conf</code>. The <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CassandraSessionSettings.html" title="akka.stream.alpakka.cassandra.CassandraSessionSettings"><code>CassandraSessionSettings</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CassandraSessionSettings.html" title="akka.stream.alpakka.cassandra.CassandraSessionSettings"><code>CassandraSessionSettings</code></a></span> accept a full path to a configuration section which needs to specify a <code>session-provider</code> setting. The <span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/javadsl/CassandraSessionRegistry.html" title="akka.stream.alpakka.cassandra.javadsl.CassandraSessionRegistry"><code>CassandraSessionRegistry</code></a></span><span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/scaladsl/CassandraSessionRegistry.html" title="akka.stream.alpakka.cassandra.scaladsl.CassandraSessionRegistry"><code>CassandraSessionRegistry</code></a></span> expects a fully qualified class name to a class implementing <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CqlSessionProvider.html" title="akka.stream.alpakka.cassandra.CqlSessionProvider"><code>CqlSessionProvider</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CqlSessionProvider.html" title="akka.stream.alpakka.cassandra.CqlSessionProvider"><code>CqlSessionProvider</code></a></span>.</p>
<p>Alpakka Cassandra includes a default implementation <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span>, which is referenced in the default configuration <code>alpakka.cassandra</code>.</p>
<p>The <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span> config section must contain:</p>
<ul>
  <li>a settings section <code>service-discovery</code> which may be used to discover Cassandra contact points via <a href="cassandra.html#using-akka-discovery">Akka Discovery</a>,</li>
  <li>and a reference to a Cassandra config section in <code>datastax-java-driver-config</code> which is used to configure the Cassandra client. For details see the <a href="https://docs.datastax.com/en/developer/java-driver/4.10/manual/core/configuration/#quick-overview">Datastax Java Driver configuration</a> and the driver&rsquo;s <a href="https://docs.datastax.com/en/developer/java-driver/4.10/manual/core/configuration/reference/"><code>reference.conf</code></a>.</li>
</ul>
<dl>
  <dt>reference.conf
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/main/resources/reference.conf" target="_blank" title="Go to snippet source"></a><code class="language-conf">alpakka.cassandra {
  # The implementation of `akka.stream.alpakka.cassandra.CqlSessionProvider`
  # used for creating the `CqlSession`.
  # It may optionally have a constructor with an `ClassicActorSystemProvider` and `Config` parameters.
  session-provider = &quot;akka.stream.alpakka.cassandra.DefaultSessionProvider&quot;

  # Configure Akka Discovery by setting a service name
  service-discovery {
    name = &quot;&quot;
    lookup-timeout = 1 s
  }

  # The ExecutionContext to use for the session tasks and future composition.
  session-dispatcher = &quot;akka.actor.default-dispatcher&quot;

  # Full config path to the Datastax Java driver&#39;s configuration section.
  # When connecting to more than one Cassandra cluster different session configuration can be
  # defined with this property.
  # See https://docs.datastax.com/en/developer/java-driver/latest/manual/core/configuration/#quick-overview
  # and https://docs.datastax.com/en/developer/java-driver/latest/manual/core/configuration/reference/
  datastax-java-driver-config = &quot;datastax-java-driver&quot;
}</code></pre></dd>
</dl>
<p>In simple cases your <code>datastax-java-driver</code> section will need to define <code>contact-points</code> and <code>load-balancing-policy.local-datacenter</code>. To make the Cassandra driver retry its initial connection attempts, add <code>advanced.reconnect-on-init = true</code>.</p>
<dl>
  <dt>application.conf
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/resources/application.conf#L8-L14" target="_blank" title="Go to snippet source"></a><code class="language-conf">datastax-java-driver {
  basic {
    contact-points = [ &quot;127.0.0.1:9042&quot; ]
    load-balancing-policy.local-datacenter = datacenter1
  }
  advanced.reconnect-on-init = true
}</code></pre></dd>
</dl>
<h3><a href="#using-akka-discovery" name="using-akka-discovery" class="anchor"><span class="anchor-link"></span></a>Using Akka Discovery</h3>
<p>To use <a href="https://doc.akka.io/docs/akka/2.6/discovery/">Akka Discovery</a> make sure the <code>akka-discovery</code> dependency is on you classpath.</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">val AkkaVersion = "2.6.14"
libraryDependencies += "com.typesafe.akka" %% "akka-discovery" % AkkaVersion</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;properties&gt;
  &lt;akka.version&gt;2.6.14&lt;/akka.version&gt;
  &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt
  &lt;dependency&gt;
    &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
    &lt;artifactId&gt;akka-discovery_${scala.binary.version}&lt;/artifactId&gt;
    &lt;version&gt;${akka.version}&lt;/version&gt;
  &lt;/dependency&gt
&lt;/dependencies&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">def versions = [
  AkkaVersion: "2.6.14",
  ScalaBinary: "2.12"
]
dependencies {
  implementation "com.typesafe.akka:akka-discovery_${versions.ScalaBinary}:${versions.AkkaVersion}"
}</code></pre></dd></dl>
<p>To enable <a href="https://doc.akka.io/docs/akka/2.6/discovery/">Akka Discovery</a> with the <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/DefaultSessionProvider.html" title="akka.stream.alpakka.cassandra.DefaultSessionProvider"><code>DefaultSessionProvider</code></a></span>, set up the desired service name in the discovery mechanism of your choice and pass that name in <code>service-discovery.name</code>. The example below extends the <code>alpakka.cassandra</code> config section and only overwrites the service name.</p>
<dl>
  <dt>application.conf
  </dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/resources/application.conf#L18-L44" target="_blank" title="Go to snippet source"></a><code class="language-conf">akka {
  discovery.method = config
}
akka.discovery.config.services = {
  cassandra-service = {
    endpoints = [
      {
        host = &quot;127.0.0.1&quot;
        port = 9042
      }
    ]
  }
}

// inherit defaults from `alpakka.cassandra` settings
example-with-akka-discovery: ${alpakka.cassandra} {
  service-discovery.name = &quot;cassandra-service&quot;
}</code></pre></dd>
</dl>
<p>Use the full config section path to create the <span class="group-scala"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CassandraSessionSettings$.html" title="akka.stream.alpakka.cassandra.CassandraSessionSettings"><code>CassandraSessionSettings</code></a></span><span class="group-java"><a href="/api/alpakka/3.0.1/akka/stream/alpakka/cassandra/CassandraSessionSettings$.html" title="akka.stream.alpakka.cassandra.CassandraSessionSettings"><code>CassandraSessionSettings</code></a></span>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/scala/docs/scaladsl/AkkaDiscoverySpec.scala#L62-L63" target="_blank" title="Go to snippet source"></a><code class="language-scala">val sessionSettings = CassandraSessionSettings(&quot;example-with-akka-discovery&quot;)
implicit val session = CassandraSessionRegistry.get(system).sessionFor(sessionSettings)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v3.0.1/cassandra/src/test/java/docs/javadsl/CassandraSourceTest.java#L151-L153" target="_blank" title="Go to snippet source"></a><code class="language-java">CassandraSessionSettings sessionSettings =
    CassandraSessionSettings.create(&quot;example-with-akka-discovery&quot;);
CassandraSession session = CassandraSessionRegistry.get(system).sessionFor(sessionSettings);</code></pre></dd>
</dl>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="external/apache-camel.html"><i class="icon-prev"></i> <span class="link-prev">Apache Camel</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="geode.html">Apache Geode <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/alpakka/tree/v3.0.1/docs/src/main/paradox/cassandra.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Alpakka is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2021 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<script type="text/javascript" src="assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '3.0.1', 'https://doc.akka.io/docs/alpakka/current')});
//]]></script>


</body>
</html>
