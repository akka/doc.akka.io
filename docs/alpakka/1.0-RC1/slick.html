<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Slick (JDBC) &bull; Alpakka Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Alpakka is a Reactive Enterprise Integration library for Java and Scala, based on Reactive Streams and Akka."/>
<link rel="canonical" href="https://doc.akka.io/docs/alpakka/current/slick.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://optanon.blob.core.windows.net/consent/159bb13d-6748-4399-806e-ac28db879785.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<script type="text/plain" class="optanon-category-2">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
ga('tsTracker.require', 'linker');
ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org','scala-ide.org']);
ga('tsTracker.send', 'pageview');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-alpakka-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Alpakka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 1.0-RC1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="overview.html" class="page">Overview</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a></li>
  <li><a href="amqp.html" class="page">AMQP</a></li>
  <li><a href="external/apache-camel.html" class="page">Apache Camel</a></li>
  <li><a href="cassandra.html" class="page">Apache Cassandra</a></li>
  <li><a href="geode.html" class="page">Apache Geode</a></li>
  <li><a href="kafka.html" class="page">Apache Kafka</a></li>
  <li><a href="kudu.html" class="page">Apache Kudu</a></li>
  <li><a href="solr.html" class="page">Apache Solr</a></li>
  <li><a href="avroparquet.html" class="page">Avro Parquet</a></li>
  <li><a href="dynamodb.html" class="page">AWS DynamoDB</a></li>
  <li><a href="kinesis.html" class="page">AWS Kinesis</a></li>
  <li><a href="awslambda.html" class="page">AWS Lambda</a></li>
  <li><a href="s3.html" class="page">AWS S3</a></li>
  <li><a href="sns.html" class="page">AWS SNS</a></li>
  <li><a href="sqs.html" class="page">AWS SQS</a></li>
  <li><a href="external/azure-event-hubs.html" class="page">Azure Event Hubs</a></li>
  <li><a href="external/azure-iot-hub.html" class="page">Azure IoT Hub</a></li>
  <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue</a></li>
  <li><a href="couchbase.html" class="page">Couchbase</a></li>
  <li><a href="elasticsearch.html" class="page">Elasticsearch</a></li>
  <li><a href="external/eventuate.html" class="page">Eventuate</a></li>
  <li><a href="file.html" class="page">File</a></li>
  <li><a href="external/fs2.html" class="page">FS2</a></li>
  <li><a href="ftp.html" class="page">FTP</a></li>
  <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
  <li><a href="google-cloud-pub-sub-grpc.html" class="page">Google Cloud Pub/Sub gRPC</a></li>
  <li><a href="google-fcm.html" class="page">Google FCM</a></li>
  <li><a href="external/grpc.html" class="page">gRPC</a></li>
  <li><a href="hdfs.html" class="page">Hadoop Distributed File System - HDFS</a></li>
  <li><a href="hbase.html" class="page">HBase</a></li>
  <li><a href="external/http.html" class="page">HTTP</a></li>
  <li><a href="bluemix-cos.html" class="page">IBM Bluemix Cloud Object Storage</a></li>
  <li><a href="external/db2-event-store.html" class="page">IBM Db2 Event Store</a></li>
  <li><a href="ironmq.html" class="page">IronMQ</a></li>
  <li><a href="jms/index.html" class="page">JMS</a></li>
  <li><a href="mongodb.html" class="page">MongoDB</a></li>
  <li><a href="mqtt.html" class="page">MQTT</a></li>
  <li><a href="mqtt-streaming.html" class="page">MQTT Streaming</a></li>
  <li><a href="orientdb.html" class="page">OrientDB</a></li>
  <li><a href="external/pulsar.html" class="page">Pulsar</a></li>
  <li><a href="sse.html" class="page">Server-sent Events (SSE)</a></li>
  <li><a href="slick.html#slick-jdbc-" class="active page">Slick (JDBC)</a>
  <ul>
    <li><a href="slick.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="slick.html#initialization" class="header">Initialization</a></li>
    <li><a href="slick.html#starting-a-database-session" class="header">Starting a Database Session</a></li>
    <li><a href="slick.html#closing-a-database-session" class="header">Closing a Database Session</a></li>
    <li><a href="slick.html#using-a-slick-source" class="header">Using a Slick Source</a></li>
    <li><a href="slick.html#using-a-slick-flow-or-sink" class="header">Using a Slick Flow or Sink</a></li>
    <li><a href="slick.html#flow" class="header">Flow</a></li>
    <li><a href="slick.html#flow-with-pass-through" class="header">Flow with pass-through</a></li>
  </ul></li>
  <li><a href="spring-web.html" class="page">Spring Web</a></li>
  <li><a href="external/tcp.html" class="page">TCP</a></li>
  <li><a href="udp.html" class="page">UDP</a></li>
  <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket</a></li>
</ul>
</nav>
</div>
</header>

<aside class="show-for-large">
<header class="nav-header fixed-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Alpakka Documentation</a></h1>
</div>
<div class="nav-header-version">
Version 1.0-RC1
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav fixed-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="overview.html" class="page">Overview</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a></li>
  <li><a href="amqp.html" class="page">AMQP</a></li>
  <li><a href="external/apache-camel.html" class="page">Apache Camel</a></li>
  <li><a href="cassandra.html" class="page">Apache Cassandra</a></li>
  <li><a href="geode.html" class="page">Apache Geode</a></li>
  <li><a href="kafka.html" class="page">Apache Kafka</a></li>
  <li><a href="kudu.html" class="page">Apache Kudu</a></li>
  <li><a href="solr.html" class="page">Apache Solr</a></li>
  <li><a href="avroparquet.html" class="page">Avro Parquet</a></li>
  <li><a href="dynamodb.html" class="page">AWS DynamoDB</a></li>
  <li><a href="kinesis.html" class="page">AWS Kinesis</a></li>
  <li><a href="awslambda.html" class="page">AWS Lambda</a></li>
  <li><a href="s3.html" class="page">AWS S3</a></li>
  <li><a href="sns.html" class="page">AWS SNS</a></li>
  <li><a href="sqs.html" class="page">AWS SQS</a></li>
  <li><a href="external/azure-event-hubs.html" class="page">Azure Event Hubs</a></li>
  <li><a href="external/azure-iot-hub.html" class="page">Azure IoT Hub</a></li>
  <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue</a></li>
  <li><a href="couchbase.html" class="page">Couchbase</a></li>
  <li><a href="elasticsearch.html" class="page">Elasticsearch</a></li>
  <li><a href="external/eventuate.html" class="page">Eventuate</a></li>
  <li><a href="file.html" class="page">File</a></li>
  <li><a href="external/fs2.html" class="page">FS2</a></li>
  <li><a href="ftp.html" class="page">FTP</a></li>
  <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
  <li><a href="google-cloud-pub-sub-grpc.html" class="page">Google Cloud Pub/Sub gRPC</a></li>
  <li><a href="google-fcm.html" class="page">Google FCM</a></li>
  <li><a href="external/grpc.html" class="page">gRPC</a></li>
  <li><a href="hdfs.html" class="page">Hadoop Distributed File System - HDFS</a></li>
  <li><a href="hbase.html" class="page">HBase</a></li>
  <li><a href="external/http.html" class="page">HTTP</a></li>
  <li><a href="bluemix-cos.html" class="page">IBM Bluemix Cloud Object Storage</a></li>
  <li><a href="external/db2-event-store.html" class="page">IBM Db2 Event Store</a></li>
  <li><a href="ironmq.html" class="page">IronMQ</a></li>
  <li><a href="jms/index.html" class="page">JMS</a></li>
  <li><a href="mongodb.html" class="page">MongoDB</a></li>
  <li><a href="mqtt.html" class="page">MQTT</a></li>
  <li><a href="mqtt-streaming.html" class="page">MQTT Streaming</a></li>
  <li><a href="orientdb.html" class="page">OrientDB</a></li>
  <li><a href="external/pulsar.html" class="page">Pulsar</a></li>
  <li><a href="sse.html" class="page">Server-sent Events (SSE)</a></li>
  <li><a href="slick.html#slick-jdbc-" class="active page">Slick (JDBC)</a>
  <ul>
    <li><a href="slick.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="slick.html#initialization" class="header">Initialization</a></li>
    <li><a href="slick.html#starting-a-database-session" class="header">Starting a Database Session</a></li>
    <li><a href="slick.html#closing-a-database-session" class="header">Closing a Database Session</a></li>
    <li><a href="slick.html#using-a-slick-source" class="header">Using a Slick Source</a></li>
    <li><a href="slick.html#using-a-slick-flow-or-sink" class="header">Using a Slick Flow or Sink</a></li>
    <li><a href="slick.html#flow" class="header">Flow</a></li>
    <li><a href="slick.html#flow-with-pass-through" class="header">Flow with pass-through</a></li>
  </ul></li>
  <li><a href="spring-web.html" class="page">Spring Web</a></li>
  <li><a href="external/tcp.html" class="page">TCP</a></li>
  <li><a href="udp.html" class="page">UDP</a></li>
  <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer fixed-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-alpakka-reverse.svg"/></a>

</footer>
</aside>

<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">

<article class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#slick-jdbc-" name="slick-jdbc-" class="anchor"><span class="anchor-link"></span></a>Slick (JDBC)</h1>
<p>The Slick connector provides Scala and Java DSLs to create a <code>Source</code> to stream the results of a SQL database query and a <code>Flow</code>/<code>Sink</code> to perform SQL actions (like inserts, updates, and deletes) for each element in a stream. It is built on the <a href="http://slick.lightbend.com/">Slick</a> library to interact with a long list of <a href="https://slick.lightbend.com/doc/3.3.0/supported-databases.html">supported relational databases</a>.</p>
<table class="project-info">
<tr><th colspan="2">Project Info: Alpakka Slick/JDBC</th></tr>
  <tr><th>Artifact</th><td><div>com.lightbend.akka</div>
  <div>akka-stream-alpakka-slick</div>
  <div>1.0-RC1</div>
  <div><a href="other-docs/snapshots.html">Snapshots are available</a></div>
  </td></tr>
  <tr><th>JDK versions</th><td><div>OpenJDK 8</div></td></tr>
  <tr><th>Scala versions</th><td>2.12.7, 2.11.12</td></tr>
  <tr><th>JPMS module name</th><td>akka.stream.alpakka.slick</td></tr>
  <tr><th>License</th><td><div><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">Apache-2.0</a></div>
  </td></tr>
  <tr><th>Readiness level</th><td><div class="readiness-level"><a href="https://developer.lightbend.com/docs/reactive-platform/2.0/support-terminology/index.html#community-driven" target="_blank" rel="noopener noreferrer">Community-driven</a></div>
  <div>Since 0.12, 2017-09-19</div>
  </td></tr>
  <tr><th>Home page</th><td><a href="https://doc.akka.io/docs/alpakka/current/">https://doc.akka.io/docs/alpakka/current/</a></td></tr>
  <tr><th>API documentation</th><td>
  <div><a href="https://doc.akka.io/api/alpakka/1.0-RC1/akka/stream/alpakka/slick/index.html" target="_blank" rel="noopener noreferrer">API (Scaladoc)</a></div>
  </td></tr>
  <tr><th>Forums</th><td>
  <div><a href="https://discuss.lightbend.com/c/akka/" target="_blank" rel="noopener noreferrer">Lightbend Discuss</a></div>
  <div><a href="https://gitter.im/akka/akka" target="_blank" rel="noopener noreferrer">akka/akka Gitter channel</a></div>
  </td></tr>
  <tr><th>Release notes</th><td><a href="https://doc.akka.io/docs/alpakka/current/release-notes/index.html">In the documentation</a></td></tr>
  <tr><th>Issues</th><td><a href="https://github.com/akka/alpakka/labels/p%3Aslick" target="_blank" rel="noopener noreferrer">Github issues</a></td></tr>
  <tr><th>Sources</th><td><a href="https://github.com/akka/alpakka" target="_blank" rel="noopener noreferrer">https://github.com/akka/alpakka</a></td></tr>
</table>

<h2><a href="#artifacts" name="artifacts" class="anchor"><span class="anchor-link"></span></a>Artifacts</h2>
<dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.lightbend.akka" %% "akka-stream-alpakka-slick" % "1.0-RC1"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.lightbend.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-stream-alpakka-slick_2.12&lt;/artifactId&gt;
  &lt;version&gt;1.0-RC1&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.lightbend.akka', name: 'akka-stream-alpakka-slick_2.12', version: '1.0-RC1'
}</code></pre></dd></dl>
<p>You will also need to add the JDBC driver(s) for the specific relational database(s) to your project. Most of those database have drivers that are not available from public repositories so unfortunately some manual steps will probably be required. The Slick documentation has <a href="https://slick.lightbend.com/doc/3.3.0/supported-databases.html">information on where to download the drivers</a>.</p>
<p>The table below shows direct dependencies of this module and the second tab shows all libraries it depends on transitively.</p>
<dl class="dependencies"><dt>Direct dependencies</dt><dd><table>
  <thead><tr><th>Organization</th><th>Artifact</th><th>Version</th><th>License</th></tr></thead>
  <tbody>
    <tr><td>com.typesafe.akka</td><td>akka-stream_2.12</td><td><a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-stream_2.12/2.5.21" target="_blank">2.5.21</a></td><td>Apache License, Version 2.0</td></tr>
    <tr><td>com.typesafe.slick</td><td>slick-hikaricp_2.12</td><td><a href="https://mvnrepository.com/artifact/com.typesafe.slick/slick-hikaricp_2.12/3.3.0" target="_blank">3.3.0</a></td><td>Two-clause BSD-style license</td></tr>
    <tr><td>com.typesafe.slick</td><td>slick_2.12</td><td><a href="https://mvnrepository.com/artifact/com.typesafe.slick/slick_2.12/3.3.0" target="_blank">3.3.0</a></td><td>Two-clause BSD-style license</td></tr>
    <tr><td>org.scala-lang</td><td>scala-library</td><td><a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a></td><td>BSD 3-Clause</td></tr>
  </tbody>
</table></dd>
<dt>Dependency tree</dt><dd><pre>
com.typesafe.akka    akka-stream_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-stream_2.12/2.5.21" target="_blank">2.5.21</a>    Apache License, Version 2.0
    com.typesafe.akka    akka-actor_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-actor_2.12/2.5.21" target="_blank">2.5.21</a>    Apache License, Version 2.0
        com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.3.3" target="_blank">1.3.3</a>    Apache License, Version 2.0
        org.scala-lang.modules    scala-java8-compat_2.12    <a href="https://mvnrepository.com/artifact/org.scala-lang.modules/scala-java8-compat_2.12/0.8.0" target="_blank">0.8.0</a>    BSD 3-clause
            org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
    com.typesafe.akka    akka-protobuf_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.akka/akka-protobuf_2.12/2.5.21" target="_blank">2.5.21</a>    Apache License, Version 2.0
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
    com.typesafe    ssl-config-core_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe/ssl-config-core_2.12/0.3.7" target="_blank">0.3.7</a>    Apache-2.0
        com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.3.3" target="_blank">1.3.3</a>    Apache License, Version 2.0
        org.scala-lang.modules    scala-parser-combinators_2.12    <a href="https://mvnrepository.com/artifact/org.scala-lang.modules/scala-parser-combinators_2.12/1.1.1" target="_blank">1.1.1</a>    BSD 3-clause
            org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
    org.reactivestreams    reactive-streams    <a href="https://mvnrepository.com/artifact/org.reactivestreams/reactive-streams/1.0.2" target="_blank">1.0.2</a>    CC0
    org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
com.typesafe.slick    slick-hikaricp_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.slick/slick-hikaricp_2.12/3.3.0" target="_blank">3.3.0</a>    Two-clause BSD-style license
    com.typesafe.slick    slick_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.slick/slick_2.12/3.3.0" target="_blank">3.3.0</a>    Two-clause BSD-style license
        com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.3.3" target="_blank">1.3.3</a>    Apache License, Version 2.0
        org.reactivestreams    reactive-streams    <a href="https://mvnrepository.com/artifact/org.reactivestreams/reactive-streams/1.0.2" target="_blank">1.0.2</a>    CC0
        org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
        org.slf4j    slf4j-api    <a href="https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.25" target="_blank">1.7.25</a>    MIT License
    com.zaxxer    HikariCP    <a href="https://mvnrepository.com/artifact/com.zaxxer/HikariCP/3.2.0" target="_blank">3.2.0</a>    The Apache Software License, Version 2.0
        org.slf4j    slf4j-api    <a href="https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.25" target="_blank">1.7.25</a>    MIT License
    org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
com.typesafe.slick    slick_2.12    <a href="https://mvnrepository.com/artifact/com.typesafe.slick/slick_2.12/3.3.0" target="_blank">3.3.0</a>    Two-clause BSD-style license
    com.typesafe    config    <a href="https://mvnrepository.com/artifact/com.typesafe/config/1.3.3" target="_blank">1.3.3</a>    Apache License, Version 2.0
    org.reactivestreams    reactive-streams    <a href="https://mvnrepository.com/artifact/org.reactivestreams/reactive-streams/1.0.2" target="_blank">1.0.2</a>    CC0
    org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause
    org.slf4j    slf4j-api    <a href="https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.25" target="_blank">1.7.25</a>    MIT License
org.scala-lang    scala-library    <a href="https://mvnrepository.com/artifact/org.scala-lang/scala-library/2.12.7" target="_blank">2.12.7</a>    BSD 3-Clause</pre></dd>
</dl>

<h2><a href="#initialization" name="initialization" class="anchor"><span class="anchor-link"></span></a>Initialization</h2>

<p>As always, before we get started we will need an <a href="https://doc.akka.io/api/akka/2.5.21/akka/actor/ActorSystem.html">ActorSystem</a> and a <a href="https://doc.akka.io/api/akka/2.5.21/akka/stream/Materializer.html">Materializer</a>.</p>

<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/SlickSpec.scala#L28-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val system = ActorSystem()
implicit val mat = ActorMaterializer()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/SlickTest.java#L68-L69" target="_blank" title="Go to snippet source"></a><code class="language-java">system = ActorSystem.create();
materializer = ActorMaterializer.create(system);</code></pre></dd>
</dl>
<p>You will also always need the following important imports:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L11-L13" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.stream.alpakka.slick.scaladsl._
import akka.stream.scaladsl._
import slick.jdbc.GetResult</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/DocSnippetSource.java#L8-L9" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.stream.javadsl.*;
import akka.stream.alpakka.slick.javadsl.*;</code></pre></dd>
</dl>
<p>The full examples for using the <code>Source</code>, <code>Sink</code>, and <code>Flow</code> (listed further down) also include all required imports.</p>
<h2><a href="#starting-a-database-session" name="starting-a-database-session" class="anchor"><span class="anchor-link"></span></a>Starting a Database Session</h2>
<p>All functionality provided by this connector requires the user to first create an instance of <code>SlickSession</code>, which is a thin wrapper around Slick&rsquo;s database connection management and database profile API.</p>
<p>If you are using Slick in your project, you can create a <code>SlickSession</code> instance by sharing the database configuration:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/SlickSpec.scala#L38-L39" target="_blank" title="Go to snippet source"></a><code class="language-scala">val databaseConfig = DatabaseConfig.forConfig[JdbcProfile](&quot;slick-h2&quot;)
implicit val session = SlickSession.forConfig(databaseConfig)</code></pre></dd>
</dl>
<p>Otherwise, you can configure your database using <a href="https://github.com/typesafehub/config">typesafe-config</a> by adding a named configuration to your application.conf and then referring to that configuration when starting the session:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/SlickSpec.scala#L33" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/SlickTest.java#L44" target="_blank" title="Go to snippet source"></a><code class="language-java">private static final SlickSession session = SlickSession.forConfig(&quot;slick-h2&quot;);</code></pre></dd>
</dl>
<p>Here is an example configuration for the H2 database, which is used for the unit tests of the Slick connector itself:</p>
<dl>
  <dt>Configuration</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L11-L22" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-h2&quot;)
slick-h2 {
  profile = &quot;slick.jdbc.H2Profile$&quot;
  db {
    connectionPool = disabled
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;org.h2.Driver&quot;
      url = &quot;jdbc:h2:/tmp/alpakka-slick-h2-test&quot;
    }
  }
}</code></pre></dd>
</dl>
<p>You can specify multiple different database configurations, as long as you use unique names. These can then be loaded by fully qualified configuration name using the <code>SlickSession.forConfig()</code> method described above.</p>
<p>The Slick connector supports all the various ways Slick allows you to configure your JDBC database drivers, connection pools, etc., but we strongly recommend using the so-called <a href="https://slick.lightbend.com/doc/3.3.0/database.html#databaseconfig">&ldquo;DatabaseConfig&rdquo;</a> method of configuration, which is the only method explicitly tested to work with the Slick connector.</p>
<p>Below are a few configuration examples for other databases. The Slick connector supports all <a href="https://slick.lightbend.com/doc/3.3.0/supported-databases.html">databases supported by Slick</a> (as of Slick 3.2.x)</p>
<dl>
  <dt>Postgres</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L67-L79" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-postgres&quot;)
slick-postgres {
  profile = &quot;slick.jdbc.PostgresProfile$&quot;
  db {
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;org.postgresql.Driver&quot;
      url = &quot;jdbc:postgresql://127.0.0.1/slickdemo&quot;
      user = slick
      password = &quot;&quot;
    }
  }
}</code></pre></dd>
  <dt>MySQL</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L121-L133" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-mysql&quot;)
slick-mysql {
  profile = &quot;slick.jdbc.MySQLProfile$&quot;
  db {
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;com.mysql.jdbc.Driver&quot;
      url = &quot;jdbc:mysql://localhost:3306/&quot;
      user = slick
      password = &quot;&quot;
    }
  }
}</code></pre></dd>
  <dt>DB2</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L49-L61" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-db2&quot;)
slick-db2 {
  profile = &quot;slick.jdbc.DB2Profile$&quot;
  db {
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;com.ibm.db2.jcc.DB2Driver&quot;
      url = &quot;jdbc:db2://localhost:50000/sample&quot;
      user = &quot;db2inst1&quot;
      password = &quot;db2-admin-password&quot;
    }
  }
}</code></pre></dd>
  <dt>Oracle</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L85-L97" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-oracle&quot;)
slick-oracle {
  profile = &quot;slick.jdbc.OracleProfile$&quot;
  db {
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;oracle.jdbc.OracleDriver&quot;
      url = &quot;jdbc:oracle:thin:@//localhost:49161/xe&quot;
      user = slick
      password = &quot;&quot;
    }
  }
}</code></pre></dd>
  <dt>SQL Server</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/resources/application.conf#L103-L115" target="_blank" title="Go to snippet source"></a><code class="language-conf"># Load using SlickSession.forConfig(&quot;slick-sqlserver&quot;)
slick-sqlserver {
  profile = &quot;slick.jdbc.SQLServerProfile$&quot;
  db {
    dataSourceClass = &quot;slick.jdbc.DriverDataSource&quot;
    properties = {
      driver = &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;
      url = &quot;jdbc:sqlserver://localhost:1433&quot;
      user = slick
      password = &quot;&quot;
    }
  }
}</code></pre></dd>
</dl>
<p>Of course these are just examples. Please visit the <a href="https://slick.lightbend.com/doc/3.3.0/api/index.html#slick.jdbc.JdbcBackend$DatabaseFactoryDef@forConfig(String,Config,Driver,ClassLoader%29:Database">Slick documentation for <code>DatabaseConfig.fromConfig</code></a> for the full list of things to configure.</p>
<h2><a href="#closing-a-database-session" name="closing-a-database-session" class="anchor"><span class="anchor-link"></span></a>Closing a Database Session</h2>
<p>Slick requires you to eventually close your database session to free up connection pool resources. You would usually do this when terminating the <code>ActorSystem</code>, by registering a termination handler like this:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/SlickSpec.scala#L81" target="_blank" title="Go to snippet source"></a><code class="language-scala">system.registerOnTermination(() =&gt; session.close())</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/SlickTest.java#L88" target="_blank" title="Go to snippet source"></a><code class="language-java">system.registerOnTermination(session::close);</code></pre></dd>
</dl>
<h2><a href="#using-a-slick-source" name="using-a-slick-source" class="anchor"><span class="anchor-link"></span></a>Using a Slick Source</h2>
<p>The Slick connector allows you to perform a SQL query and expose the resulting stream of results as an Akka Streams <code>Source[T]</code>. Where <code>T</code> is any type that can be constructed using a database row.</p>
<h3><a href="#plain-sql-queries" name="plain-sql-queries" class="anchor"><span class="anchor-link"></span></a>Plain SQL queries</h3>
<p>Both the Scala and Java DSLs support the use of <a href="https://slick.lightbend.com/doc/3.3.0/concepts.html#plain-sql-statements">plain SQL queries</a>.</p>
<p>The Scala DSL expects you to use the special <code>sql&quot;...&quot;</code>, <code>sqlu&quot;...&quot;</code>, and <code>sqlt&quot;...&quot;</code> <a href="https://slick.lightbend.com/doc/3.3.0/sql.html#string-interpolation">String interpolators provided by Slick</a> to construct queries.</p>
<p>Unfortunately, String interpolation is a Scala language feature that cannot be directly translated to Java. This means that query strings in the Java DSL will need to be manually prepared using plain Java Strings (or a <code>StringBuilder</code>).</p>
<p>The following examples put it all together to perform a simple streaming query.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L24-L46" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)
system.registerOnTermination(session.close())

// The example domain
case class User(id: Int, name: String)

// We need this to automatically transform result rows
// into instances of the User class.
// Please import slick.jdbc.GetResult
// See also: &quot;http://slick.lightbend.com/doc/3.2.1/sql.html#result-sets&quot;
implicit val getUserResult = GetResult(r =&gt; User(r.nextInt, r.nextString))

// This import enables the use of the Slick sql&quot;...&quot;,
// sqlu&quot;...&quot;, and sqlt&quot;...&quot; String interpolators.
// See also: &quot;http://slick.lightbend.com/doc/3.2.1/sql.html#string-interpolation&quot;
import session.profile.api._

// Stream the results of a query
val done: Future[Done] =
  Slick
    .source(sql&quot;SELECT ID, NAME FROM ALPAKKA_SLICK_SCALADSL_TEST_USERS&quot;.as[User])
    .log(&quot;user&quot;)
    .runWith(Sink.ignore)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/DocSnippetSource.java#L25-L34" target="_blank" title="Go to snippet source"></a><code class="language-java">final SlickSession session = SlickSession.forConfig(&quot;slick-h2&quot;);
system.registerOnTermination(session::close);

final CompletionStage&lt;Done&gt; done =
    Slick.source(
            session,
            &quot;SELECT ID, NAME FROM ALPAKKA_SLICK_JAVADSL_TEST_USERS&quot;,
            (SlickRow row) -&gt; new User(row.nextInt(), row.nextString()))
        .log(&quot;user&quot;)
        .runWith(Sink.ignore(), materializer);</code></pre></dd>
</dl>
<h3><a href="#typed-queries" name="typed-queries" class="anchor"><span class="anchor-link"></span></a>Typed Queries</h3>
<p>The Scala DSL also supports the use of <a href="https://slick.lightbend.com/doc/3.3.0/concepts.html#scala-queries">Slick Scala queries</a>, which are more type-safe then their plain SQL equivalent. The code will look very similar to the plain SQL example.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L61-L79" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)
system.registerOnTermination(session.close())

// This import brings everything you need into scope
import session.profile.api._

// The example domain
class Users(tag: Tag) extends Table[(Int, String)](tag, &quot;ALPAKKA_SLICK_SCALADSL_TEST_USERS&quot;) {
  def id = column[Int](&quot;ID&quot;)
  def name = column[String](&quot;NAME&quot;)
  def * = (id, name)
}

// Stream the results of a query
val done: Future[Done] =
  Slick
    .source(TableQuery[Users].result)
    .log(&quot;user&quot;)
    .runWith(Sink.ignore)</code></pre></dd>
</dl>
<h2><a href="#using-a-slick-flow-or-sink" name="using-a-slick-flow-or-sink" class="anchor"><span class="anchor-link"></span></a>Using a Slick Flow or Sink</h2>
<p>If you want to take stream of elements and turn them into side-effecting actions in a relational database, the Slick connector allows you to perform any DML or DDL statement using either a <code>Sink</code> or a <code>Flow</code>. This includes the typical <code>insert</code>/<code>update</code>/<code>delete</code> statements but also <code>create table</code>, <code>drop table</code>, etc. The unit tests have a couple of good examples of the latter usage.</p>
<p>The following example show the use of a Slick <code>Sink</code> to take a stream of elements and insert them into the database. There is an optional <code>parallelism</code> argument to specify how many concurrent streams will be sent to the database. The unit tests for the slick connector have example of performing parallel inserts.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L94-L112" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)
system.registerOnTermination(session.close())

// The example domain
case class User(id: Int, name: String)
val users = (1 to 42).map(i =&gt; User(i, s&quot;Name$i&quot;))

// This import enables the use of the Slick sql&quot;...&quot;,
// sqlu&quot;...&quot;, and sqlt&quot;...&quot; String interpolators.
// See &quot;http://slick.lightbend.com/doc/3.2.1/sql.html#string-interpolation&quot;
import session.profile.api._

// Stream the users into the database as insert statements
val done: Future[Done] =
  Source(users)
    .runWith(
      // add an optional first argument to specify the parallism factor (Int)
      Slick.sink(user =&gt; sqlu&quot;INSERT INTO ALPAKKA_SLICK_SCALADSL_TEST_USERS VALUES(${user.id}, ${user.name})&quot;)
    )</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/DocSnippetSink.java#L35-L47" target="_blank" title="Go to snippet source"></a><code class="language-java">final CompletionStage&lt;Done&gt; done =
    Source.from(users)
        .runWith(
            Slick.&lt;User&gt;sink(
                session,
                // add an optional second argument to specify the parallism factor (int)
                (user) -&gt;
                    &quot;INSERT INTO ALPAKKA_SLICK_JAVADSL_TEST_USERS VALUES (&quot;
                        + user.id
                        + &quot;, &#39;&quot;
                        + user.name
                        + &quot;&#39;)&quot;),
            materializer);</code></pre></dd>
</dl>
<h2><a href="#flow" name="flow" class="anchor"><span class="anchor-link"></span></a>Flow</h2>
<p>The Slick connector also exposes a <code>Flow</code> that has the exact same functionality as the <code>Sink</code> but it allows you to continue the stream for further processing. The return value of every executed statement, e.g. the element values is the fixed type <code>Int</code> denoting the number of updated/inserted/deleted rows.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L127-L147" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)
system.registerOnTermination(session.close())

// The example domain
case class User(id: Int, name: String)
val users = (1 to 42).map(i =&gt; User(i, s&quot;Name$i&quot;))

// This import enables the use of the Slick sql&quot;...&quot;,
// sqlu&quot;...&quot;, and sqlt&quot;...&quot; String interpolators.
// See &quot;http://slick.lightbend.com/doc/3.2.1/sql.html#string-interpolation&quot;
import session.profile.api._

// Stream the users into the database as insert statements
val done: Future[Done] =
  Source(users)
    .via(
      // add an optional first argument to specify the parallism factor (Int)
      Slick.flow(user =&gt; sqlu&quot;INSERT INTO ALPAKKA_SLICK_SCALADSL_TEST_USERS VALUES(${user.id}, ${user.name})&quot;)
    )
    .log(&quot;nr-of-updated-rows&quot;)
    .runWith(Sink.ignore)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/DocSnippetFlow.java#L26-L50" target="_blank" title="Go to snippet source"></a><code class="language-java">final SlickSession session = SlickSession.forConfig(&quot;slick-h2&quot;);
system.registerOnTermination(session::close);

final List&lt;User&gt; users =
    IntStream.range(0, 42)
        .boxed()
        .map((i) -&gt; new User(i, &quot;Name&quot; + i))
        .collect(Collectors.toList());

int parallelism = 1;

final CompletionStage&lt;Done&gt; done =
    Source.from(users)
        .via(
            Slick.&lt;User&gt;flow(
                session,
                parallelism,
                (user) -&gt;
                    &quot;INSERT INTO ALPAKKA_SLICK_JAVADSL_TEST_USERS VALUES (&quot;
                        + user.id
                        + &quot;, &#39;&quot;
                        + user.name
                        + &quot;&#39;)&quot;))
        .log(&quot;nr-of-updated-rows&quot;)
        .runWith(Sink.ignore(), materializer);</code></pre></dd>
</dl>
<h2><a href="#flow-with-pass-through" name="flow-with-pass-through" class="anchor"><span class="anchor-link"></span></a>Flow with pass-through</h2>
<p>To have a different return type, use the <code>flowWithPassThrough</code> function. E.g. when consuming Kafka messages, this allows you to maintain the kafka committable offset so the message can be committed in a next stage in the flow.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/scala/docs/scaladsl/DocSnippets.scala#L172-L204" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val session = SlickSession.forConfig(&quot;slick-h2&quot;)
system.registerOnTermination(session.close())

// The example domain
case class User(id: Int, name: String)
val users = (1 to 42).map(i =&gt; User(i, s&quot;Name$i&quot;))
val messagesFromKafka = users.zipWithIndex.map { case (user, index) =&gt; KafkaMessage(user, CommittableOffset(index)) }

// This import enables the use of the Slick sql&quot;...&quot;,
// sqlu&quot;...&quot;, and sqlt&quot;...&quot; String interpolators.
// See &quot;http://slick.lightbend.com/doc/3.2.1/sql.html#string-interpolation&quot;
import session.profile.api._

// Stream the users into the database as insert statements
val done: Future[Done] =
  Source(messagesFromKafka)
    .via(
      // add an optional first argument to specify the parallism factor (Int)
      Slick.flowWithPassThrough { kafkaMessage =&gt;
        val user = kafkaMessage.msg
        (sqlu&quot;INSERT INTO ALPAKKA_SLICK_SCALADSL_TEST_USERS VALUES(${user.id}, ${user.name})&quot;)
          .map { insertCount =&gt; // map db result to something else
            // allows to keep the kafka message offset so it can be committed in a next stage
            kafkaMessage.map(user =&gt; (user, insertCount))
          }
      }
    )
    .log(&quot;nr-of-updated-rows&quot;)
    .mapAsync(1) { // in correct order
      kafkaMessage =&gt;
        kafkaMessage.offset.commit // commit kafka messages
    }
    .runWith(Sink.ignore)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/alpakka/tree/v1.0-RC1/slick/src/test/java/docs/javadsl/DocSnippetFlowWithPassThrough.java#L76-L102" target="_blank" title="Go to snippet source"></a><code class="language-java">final CompletionStage&lt;Done&gt; done =
    Source.from(messagesFromKafka)
        .via(
            Slick.flowWithPassThrough(
                session,
                system.dispatcher(),
                // add an optional second argument to specify the parallism factor (int)
                (kafkaMessage) -&gt;
                    &quot;INSERT INTO ALPAKKA_SLICK_JAVADSL_TEST_USERS VALUES (&quot;
                        + kafkaMessage.msg.id
                        + &quot;, &#39;&quot;
                        + kafkaMessage.msg.name
                        + &quot;&#39;)&quot;,
                (kafkaMessage, insertCount) -&gt;
                    kafkaMessage.map(
                        user -&gt;
                            Pair.create(
                                user,
                                insertCount)) // allows to keep the kafka message offset so it
                // can be committed in a next stage
                ))
        .log(&quot;nr-of-updated-rows&quot;)
        .mapAsync(
            1,
            kafkaMessage -&gt;
                kafkaMessage.offset.commit()) // in correct order, commit Kafka message
        .runWith(Sink.ignore(), materializer);</code></pre></dd>
</dl>
</div>
</article>

<div class="row">
<div class="small-12 large-9 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="sse.html"><i class="icon-prev"></i> <span class="link-prev">Server-sent Events (SSE)</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="spring-web.html">Spring Web <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>

<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/alpakka/tree/v1.0-RC1/docs/src/main/paradox/slick.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>


<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg"/>
<section class="copyright">
<div>Alpakka is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2019 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> | 
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> | 
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> | 
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> | 
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> | 
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>
</footer>

</section>
</main>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript"><![CDATA[jQuery(function(){window.prettyPrint && prettyPrint()});]]></script>
<script type="text/javascript" src="assets/js/warnOldVersion.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(jq){initOldVersionWarnings(jq, '1.0-RC1', 'https://doc.akka.io/docs/alpakka/current/')});
//]]></script>


</body>
</html>
