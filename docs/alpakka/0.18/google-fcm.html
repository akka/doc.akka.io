<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Google Firebase Cloud Messaging · Alpakka</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Alpakka is a Reactive Enterprise Integration library for Java and Scala, based on Reactive Streams and Akka."/><link rel="canonical" href="https://doc.akka.io/docs/alpakka/current/google-fcm.html"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Alpakka
</a>
<div class="version-number">
0.18
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="connectors.html" class="page">Connectors</a>
  <ul>
    <li><a href="amqp.html" class="page">AMQP Connector</a></li>
    <li><a href="geode.html" class="page">Apache Geode connector</a></li>
    <li><a href="solr.html" class="page">Apache Solr Connector</a></li>
    <li><a href="dynamodb.html" class="page">AWS DynamoDB Connector</a></li>
    <li><a href="kinesis.html" class="page">AWS Kinesis Connector</a></li>
    <li><a href="awslambda.html" class="page">AWS Lambda Connector</a></li>
    <li><a href="s3.html" class="page">AWS S3 Connector</a></li>
    <li><a href="sns.html" class="page">AWS SNS Connector</a></li>
    <li><a href="sqs.html" class="page">AWS SQS Connector</a></li>
    <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue Connector</a></li>
    <li><a href="cassandra.html" class="page">Cassandra Connector</a></li>
    <li><a href="elasticsearch.html" class="page">Elasticsearch Connector</a></li>
    <li><a href="file.html" class="page">File Connectors</a></li>
    <li><a href="ftp.html" class="page">FTP Connector</a></li>
    <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
    <li><a href="google-fcm.html" class="active page">Google Firebase Cloud Messaging</a></li>
    <li><a href="hbase.html" class="page">HBase connector</a></li>
    <li><a href="ironmq.html" class="page">IronMq Connector</a></li>
    <li><a href="jms.html" class="page">JMS Connector</a></li>
    <li><a href="mongodb.html" class="page">MongoDB Connector</a></li>
    <li><a href="mqtt.html" class="page">MQTT Connector</a></li>
    <li><a href="orientdb.html" class="page">OrientDB Connector</a></li>
    <li><a href="sse.html" class="page">Server-sent Events (SSE) Connector</a></li>
    <li><a href="slick.html" class="page">Slick (JDBC) Connector</a></li>
    <li><a href="spring-web.html" class="page">Spring Web</a></li>
    <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket Connector</a></li>
  </ul></li>
  <li><a href="external-connectors.html" class="page">External Connectors</a></li>
  <li><a href="external-components.html" class="page">External Components</a></li>
  <li><a href="examples/index.html" class="page">Self-contained examples</a>
  <ul>
    <li><a href="examples/jms-samples.html" class="page">JMS examples</a></li>
    <li><a href="examples/ftp-samples.html" class="page">FTP examples</a></li>
    <li><a href="examples/csv-samples.html" class="page">CSV examples</a></li>
    <li><a href="examples/elasticsearch-samples.html" class="page">Elasticsearch examples</a></li>
  </ul></li>
  <li><a href="other-docs.html" class="page">Other documentation</a></li>
  <li><a href="patterns.html" class="page">Integration Patterns</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a>
  <ul>
    <li><a href="data-transformations/parsing-lines.html" class="page">Parsing Lines</a></li>
    <li><a href="data-transformations/json.html" class="page">JSON</a></li>
    <li><a href="data-transformations/compression.html" class="page">Compressing/decompressing</a></li>
    <li><a href="data-transformations/csv.html" class="page">Comma-Separated Values - CSV</a></li>
    <li><a href="data-transformations/recordio.html" class="page">RecordIO Framing</a></li>
    <li><a href="data-transformations/xml.html" class="page">Extensible Markup Language - XML</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html" class="logo" style="margin-top: 15px;"><svg class="svg-icon svg-icon-logo" style="height: 45px; width: 184px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1070 262"><title>akka-stream-alpakka</title><g id="akka-stream-alpakka" class="svg-icon-logo-text" fill="#fff"><path d="M349.6 105.5v-12.2h19.9v58.4c0 7.1 1.7 9.8 6.1 9.8 1.2 0 2.7-.2 4.1-.3v16.1c-2.2.8-5.5 1.3-9.8 1.3-4.8 0-8.6-.8-11.6-2.7-3.7-2.5-6-5.8-6.8-10.1-5.8 8.8-15.4 13.1-28.7 13.1-11.8 0-21.7-4.1-29.9-12.6-8-8.5-12-18.8-12-31.2s4-22.7 12-31c8.1-8.5 18.1-12.6 29.9-12.6 13.6 0 23.7 6 26.8 14zm-5.9 47.9c5-4.8 7.5-11 7.5-18.3s-2.5-13.4-7.5-18.3c-4.8-4.8-11-7.3-18.1-7.3-7.1 0-12.9 2.5-17.8 7.3-4.6 4.8-7 11-7 18.3s2.3 13.4 7 18.3c4.8 4.8 10.6 7.3 17.8 7.3 7.1 0 13.3-2.5 18.1-7.3zM388.5 177v-115.7h19.8v67.6l30.9-35.5h22.8l-32.7 37.4 36.2 46.3h-22.6l-26.4-33.7-8.3 9.3v24.3h-19.7zM470.8 177v-115.7h19.8v67.6l30.9-35.5h22.9l-32.7 37.4 36.2 46.3h-22.6l-26.4-33.7-8.3 9.3v24.3h-19.8zM607.9 105.5v-12.2h19.9v58.4c0 7.1 1.7 9.8 6.1 9.8 1.2 0 2.7-.2 4.1-.3v16.1c-2.2.8-5.5 1.3-9.8 1.3-4.8 0-8.6-.8-11.6-2.7-3.7-2.5-6-5.8-6.8-10.1-5.8 8.8-15.4 13.1-28.7 13.1-11.8 0-21.7-4.1-29.9-12.6-8-8.5-12-18.8-12-31.2s4-22.7 12-31c8.1-8.5 18.1-12.6 29.9-12.6 13.5 0 23.6 6 26.8 14zm-6 47.9c5-4.8 7.5-11 7.5-18.3s-2.5-13.4-7.5-18.3c-4.8-4.8-11-7.3-18.1-7.3-7.1 0-12.9 2.5-17.8 7.3-4.6 4.8-7 11-7 18.3s2.3 13.4 7 18.3c4.8 4.8 10.6 7.3 17.8 7.3 7.1 0 13.3-2.5 18.1-7.3z"/></g><path fill="#0B5567" d="M230.3 212.8c35.9 28.7 58.9-57 1.7-72.8-48-13.3-96.3 9.5-144.7 62.7 0 0 89.4-32.7 143 10.1z"/><path fill="#15A9CE" d="M88.1 202c34.4-35.7 91.6-75.5 144.9-60.8 12.4 3.5 21.2 10.7 26.9 19.3l-50.4-101.7c-7.2-11.5-25.6-9.1-36-.3l-133.2 111.6c-12.1 10.4-12.8 28.9-1.6 40.1 9.9 9.9 25.6 10.8 36.5 2l12.9-10.2z"/></g></svg>
</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Alpakka
</a>
<div class="version-number">
0.18
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="connectors.html" class="page">Connectors</a>
  <ul>
    <li><a href="amqp.html" class="page">AMQP Connector</a></li>
    <li><a href="geode.html" class="page">Apache Geode connector</a></li>
    <li><a href="solr.html" class="page">Apache Solr Connector</a></li>
    <li><a href="dynamodb.html" class="page">AWS DynamoDB Connector</a></li>
    <li><a href="kinesis.html" class="page">AWS Kinesis Connector</a></li>
    <li><a href="awslambda.html" class="page">AWS Lambda Connector</a></li>
    <li><a href="s3.html" class="page">AWS S3 Connector</a></li>
    <li><a href="sns.html" class="page">AWS SNS Connector</a></li>
    <li><a href="sqs.html" class="page">AWS SQS Connector</a></li>
    <li><a href="azure-storage-queue.html" class="page">Azure Storage Queue Connector</a></li>
    <li><a href="cassandra.html" class="page">Cassandra Connector</a></li>
    <li><a href="elasticsearch.html" class="page">Elasticsearch Connector</a></li>
    <li><a href="file.html" class="page">File Connectors</a></li>
    <li><a href="ftp.html" class="page">FTP Connector</a></li>
    <li><a href="google-cloud-pub-sub.html" class="page">Google Cloud Pub/Sub</a></li>
    <li><a href="google-fcm.html" class="active page">Google Firebase Cloud Messaging</a></li>
    <li><a href="hbase.html" class="page">HBase connector</a></li>
    <li><a href="ironmq.html" class="page">IronMq Connector</a></li>
    <li><a href="jms.html" class="page">JMS Connector</a></li>
    <li><a href="mongodb.html" class="page">MongoDB Connector</a></li>
    <li><a href="mqtt.html" class="page">MQTT Connector</a></li>
    <li><a href="orientdb.html" class="page">OrientDB Connector</a></li>
    <li><a href="sse.html" class="page">Server-sent Events (SSE) Connector</a></li>
    <li><a href="slick.html" class="page">Slick (JDBC) Connector</a></li>
    <li><a href="spring-web.html" class="page">Spring Web</a></li>
    <li><a href="unix-domain-socket.html" class="page">Unix Domain Socket Connector</a></li>
  </ul></li>
  <li><a href="external-connectors.html" class="page">External Connectors</a></li>
  <li><a href="external-components.html" class="page">External Components</a></li>
  <li><a href="examples/index.html" class="page">Self-contained examples</a>
  <ul>
    <li><a href="examples/jms-samples.html" class="page">JMS examples</a></li>
    <li><a href="examples/ftp-samples.html" class="page">FTP examples</a></li>
    <li><a href="examples/csv-samples.html" class="page">CSV examples</a></li>
    <li><a href="examples/elasticsearch-samples.html" class="page">Elasticsearch examples</a></li>
  </ul></li>
  <li><a href="other-docs.html" class="page">Other documentation</a></li>
  <li><a href="patterns.html" class="page">Integration Patterns</a></li>
  <li><a href="data-transformations/index.html" class="page">Data Transformations</a>
  <ul>
    <li><a href="data-transformations/parsing-lines.html" class="page">Parsing Lines</a></li>
    <li><a href="data-transformations/json.html" class="page">JSON</a></li>
    <li><a href="data-transformations/compression.html" class="page">Compressing/decompressing</a></li>
    <li><a href="data-transformations/csv.html" class="page">Comma-Separated Values - CSV</a></li>
    <li><a href="data-transformations/recordio.html" class="page">RecordIO Framing</a></li>
    <li><a href="data-transformations/xml.html" class="page">Extensible Markup Language - XML</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Alpakka</a></li>
  <li><a href="connectors.html">Connectors</a></li>
  <li>Google Firebase Cloud Messaging</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#google-firebase-cloud-messaging" name="google-firebase-cloud-messaging" class="anchor"><span class="anchor-link"></span></a>Google Firebase Cloud Messaging</h1>
<p>The google firebase cloud messaging connector provides a way to send notifications <a href="https://firebase.google.com/docs/cloud-messaging/">https://firebase.google.com/docs/cloud-messaging/</a> .</p><div class="callout warning "><div class="callout-title">Early state</div>
<p>The whole FCM server implementation doc is a bit unclear. This connector is build from scratch following the documentation. So the error parsing, the condition builder, the apns object and some other object/case class could (and possibly will) be improved.</p></div>
<h3><a href="#reported-issues" name="reported-issues" class="anchor"><span class="anchor-link"></span></a>Reported issues</h3>
<p><a href="https://github.com/akka/alpakka/labels/p%3Agoogle-fcm">Tagged issues at Github</a></p>
<h2><a href="#artifacts" name="artifacts" class="anchor"><span class="anchor-link"></span></a>Artifacts</h2><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.lightbend.akka" %% "akka-stream-alpakka-google-fcm" % "0.18"</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.lightbend.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-stream-alpakka-google-fcm_2.12&lt;/artifactId&gt;
  &lt;version&gt;0.18&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.lightbend.akka', name: 'akka-stream-alpakka-google-fcm_2.12', version: '0.18'
}</code></pre></dd></dl>
<h2><a href="#usage" name="usage" class="anchor"><span class="anchor-link"></span></a>Usage</h2>
<p>Possibly needed imports for the following codes.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">import akka.actor.ActorSystem
import akka.stream.ActorMaterializer
import akka.stream.alpakka.google.firebase.fcm.FcmFlowModels.FcmFlowConfig
import akka.stream.alpakka.google.firebase.fcm.{FcmFlowModels, FcmNotification}
import akka.stream.alpakka.google.firebase.fcm.FcmNotificationModels._
import akka.stream.scaladsl.{Sink, Source}

import scala.collection.immutable
import scala.concurrent.Future</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">import akka.actor.ActorSystem;
import akka.japi.Pair;
import akka.stream.ActorMaterializer;
import akka.stream.alpakka.google.firebase.fcm.FcmFlowModels;
import akka.stream.alpakka.google.firebase.fcm.FcmNotification;
import akka.stream.alpakka.google.firebase.fcm.FcmNotificationModels;
import akka.stream.javadsl.Sink;
import akka.stream.javadsl.Source;</code></pre></dd>
</dl>
<p>Prepare the actor system and materializer.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">implicit val system = ActorSystem()
implicit val mat = ActorMaterializer()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">ActorSystem system = ActorSystem.create();
ActorMaterializer materializer = ActorMaterializer.create(system);</code></pre></dd>
</dl>
<p>Prepare your credentials for access to FCM.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val privateKey =
  &quot;&quot;&quot;-----BEGIN RSA PRIVATE KEY-----
    |MIIBOgIBAAJBAJHPYfmEpShPxAGP12oyPg0CiL1zmd2V84K5dgzhR9TFpkAp2kl2
    |9BTc8jbAY0dQW4Zux+hyKxd6uANBKHOWacUCAwEAAQJAQVyXbMS7TGDFWnXieKZh
    |Dm/uYA6sEJqheB4u/wMVshjcQdHbi6Rr0kv7dCLbJz2v9bVmFu5i8aFnJy1MJOpA
    |2QIhAPyEAaVfDqJGjVfryZDCaxrsREmdKDlmIppFy78/d8DHAiEAk9JyTHcapckD
    |uSyaE6EaqKKfyRwSfUGO1VJXmPjPDRMCIF9N900SDnTiye/4FxBiwIfdynw6K3dW
    |fBLb6uVYr/r7AiBUu/p26IMm6y4uNGnxvJSqe+X6AxR6Jl043OWHs4AEbwIhANuz
    |Ay3MKOeoVbx0L+ruVRY5fkW+oLHbMGtQ9dZq7Dp9
    |-----END RSA PRIVATE KEY-----&quot;&quot;&quot;.stripMargin
val clientEmail = &quot;test-XXX@test-XXXXX.iam.gserviceaccount.com&quot;
val projectId = &quot;test-XXXXX&quot;
val fcmConfig = FcmFlowConfig(clientEmail, privateKey, projectId, isTest = false, maxConcurentConnections = 100)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">String privateKey =
                &quot;-----BEGIN RSA PRIVATE KEY-----\n&quot; +
                &quot;MIIBOgIBAAJBAJHPYfmEpShPxAGP12oyPg0CiL1zmd2V84K5dgzhR9TFpkAp2kl2\n&quot; +
                &quot;9BTc8jbAY0dQW4Zux+hyKxd6uANBKHOWacUCAwEAAQJAQVyXbMS7TGDFWnXieKZh\n&quot; +
                &quot;Dm/uYA6sEJqheB4u/wMVshjcQdHbi6Rr0kv7dCLbJz2v9bVmFu5i8aFnJy1MJOpA\n&quot; +
                &quot;2QIhAPyEAaVfDqJGjVfryZDCaxrsREmdKDlmIppFy78/d8DHAiEAk9JyTHcapckD\n&quot; +
                &quot;uSyaE6EaqKKfyRwSfUGO1VJXmPjPDRMCIF9N900SDnTiye/4FxBiwIfdynw6K3dW\n&quot; +
                &quot;fBLb6uVYr/r7AiBUu/p26IMm6y4uNGnxvJSqe+X6AxR6Jl043OWHs4AEbwIhANuz\n&quot; +
                &quot;Ay3MKOeoVbx0L+ruVRY5fkW+oLHbMGtQ9dZq7Dp9\n&quot; +
                &quot;-----END RSA PRIVATE KEY-----&quot;;
String clientEmail = &quot;test-XXX@test-XXXXX.iam.gserviceaccount.com&quot;;
String projectId = &quot;test-XXXXX&quot;;
FcmFlowModels.FcmFlowConfig fcmConfig = new FcmFlowModels.FcmFlowConfig(clientEmail, privateKey, projectId, false, 100);</code></pre></dd>
</dl>
<p>The last two parameters in the above example are the predefined values. You can send test notifications <a href="https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages/send">(so called validate only).</a> And you can set the number of maximum concurrent connections. There is a limitation in the docs; from one IP you can have maximum 1k pending connections, and you may need to configure <code>akka.http.host-connection-pool.max-open-requests</code> in your application.conf.</p>
<p>To send a notification message create your notification object, and send it!</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val notification = FcmNotification(&quot;Test&quot;, &quot;This is a test notification!&quot;, Token(&quot;token&quot;))
Source.single(notification).runWith(GoogleFcmSink.fireAndForget(fcmConfig))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">FcmNotification notification = FcmNotification.basic(&quot;Test&quot;, &quot;This is a test notification!&quot;, new FcmNotificationModels.Token(&quot;token&quot;));
Source.single(notification).runWith(GoogleFcmSink.fireAndForget(fcmConfig, system, materializer), materializer);</code></pre></dd>
</dl>
<p>With fire and forget you will just send messages and ignore all the errors. This is not so healthy in general so you can use the send instead.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val result1: Future[immutable.Seq[FcmFlowModels.FcmResponse]] =
  Source.single(notification).via(GoogleFcmFlow.send(fcmConfig)).runWith(Sink.seq)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">CompletionStage&lt;List&lt;FcmFlowModels.FcmResponse&gt;&gt; result1 = Source.single(notification).via(GoogleFcmFlow.send(fcmConfig, system, materializer)).runWith(Sink.seq(), materializer);</code></pre></dd>
</dl>
<p>With this type of send you can get responses from the server. These responses can be <a href="http://developer.lightbend.com/docs/api/alpakka/0.18/akka/stream/alpakka/google/firebase/fcm/FcmSuccessResponse.html">positive</a> or <a href="http://developer.lightbend.com/docs/api/alpakka/0.18/akka/stream/alpakka/google/firebase/fcm/FcmErrorResponse.html">negative</a>. You can choose what you want to do with this information, but keep in mind if you try to resend the failed messages you will need to implement exponential backoff too!</p>
<p>To help the integration and error handling or logging, there is a variation of the flow where you can send data beside your notification.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val result2: Future[immutable.Seq[(FcmFlowModels.FcmResponse, String)]] =
  Source.single((notification, &quot;superData&quot;)).via(GoogleFcmFlow.sendWithPassThrough(fcmConfig)).runWith(Sink.seq)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><code class="language-java">CompletionStage&lt;List&lt;Pair&lt;FcmFlowModels.FcmResponse, String&gt;&gt;&gt; result2 =
        Source.single(new Pair&lt;FcmNotification, String&gt;(notification, &quot;superData&quot;))
                .via(GoogleFcmFlow.sendWithPassThrough(fcmConfig, system, materializer))
                .runWith(Sink.seq(), materializer);</code></pre></dd>
</dl>
<p>Here I send a simple string, but you could use any type.</p>
<h2><a href="#scala-only" name="scala-only" class="anchor"><span class="anchor-link"></span></a>Scala only</h2>
<p>You can build any notification described in the original documentation. It can be done by hand, or using some builder method. If you build your notification from scratch with options (and not with the provided builders), worth to check isSendable before sending.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">val buildedNotification = FcmNotification.empty
  .withTarget(Topic(&quot;testers&quot;))
  .withBasicNotification(&quot;title&quot;, &quot;body&quot;)
  //.withAndroidConfig(AndroidConfig(...))
  //.withApnsConfig(ApnsConfig(...))
  .withWebPushConfig(
    WebPushConfig(
      headers = Map.empty,
      data = Map.empty,
      WebPushNotification(&quot;web-title&quot;, &quot;web-body&quot;, &quot;http://example.com/icon.png&quot;)
    )
  )
val sendable = buildedNotification.isSendable</code></pre></dd>
</dl>
<p>There is a condition builder too.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><code class="language-scala">import akka.stream.alpakka.google.firebase.fcm.FcmNotificationModels.Condition.{Topic =&gt; CTopic}
val condition = Condition(CTopic(&quot;TopicA&quot;) &amp;&amp; (CTopic(&quot;TopicB&quot;) || (CTopic(&quot;TopicC&quot;) &amp;&amp; !CTopic(&quot;TopicD&quot;))))
val conditioneddNotification = FcmNotification(&quot;Test&quot;, &quot;This is a test notification!&quot;, condition)</code></pre></dd>
</dl>
<h2><a href="#running-the-examples" name="running-the-examples" class="anchor"><span class="anchor-link"></span></a>Running the examples</h2>
<p>To run the example code you will need to configure a project and notifications in google firebase and provide your own credentials.</p>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/akka/alpakka/tree/master/docs/src/main/paradox/google-fcm.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="hbase.html">HBase connector</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="google-fcm.html#google-firebase-cloud-messaging" class="header">Google Firebase Cloud Messaging</a>
  <ul>
    <li><a href="google-fcm.html#reported-issues" class="header">Reported issues</a></li>
    <li><a href="google-fcm.html#artifacts" class="header">Artifacts</a></li>
    <li><a href="google-fcm.html#usage" class="header">Usage</a></li>
    <li><a href="google-fcm.html#scala-only" class="header">Scala only</a></li>
    <li><a href="google-fcm.html#running-the-examples" class="header">Running the examples</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2019</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
