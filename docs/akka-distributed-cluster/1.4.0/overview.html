<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Architectural Overview &bull; Akka Distributed Cluster</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka Projection."/>
<link rel="canonical" href="https://doc.akka.io/docs/akka-distributed-cluster/current/overview.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-8.css"/>
<link rel="stylesheet" type="text/css" href="css/banner-2.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="28b912e7-09e9-43d5-91e4-3d1897044004" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="oss-wrapper">
<div class="oss-brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com">
<img class="lightbend-logo" src="images/banner-logos/lightbend-reverse.svg" alt="Lightbend" title="Lightbend">
</a>
</div>
<div class="oss-ad no-drop-down">
<nav id="lightbendRotator" class="lightbend-rotator">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Promo Rotator - Lightbend Changed its Software Licensing Model for Akka Technology. [License FAQ] - Akka Banner" href="https://www.lightbend.com/akka/license-faq">
<strong>Lightbend</strong> Changed its Software Licensing Model for Akka Technology. <span class="akka-btn">License FAQ</span>
</a>
</nav>
</div>
</div>
</div>

<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Distributed Cluster</a></h1>
</div>
<div class="nav-header-version">
Version 1.4.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="overview.html#architectural-overview" class="active page">Architectural Overview</a>
  <ul>
    <li><a href="overview.html#one-akka-cluster-or-many-connected-clusters-" class="header">One Akka Cluster or many connected clusters?</a></li>
    <li><a href="overview.html#event-replication" class="header">Event Replication</a></li>
    <li><a href="overview.html#dynamic-filters" class="header">Dynamic filters</a></li>
  </ul></li>
  <li><a href="use-cases.html" class="page">Example Use Cases</a></li>
  <li><a href="feature-summary.html" class="page">Feature Summary</a></li>
  <li><a href="guide.html" class="page">Guide</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka Distributed Cluster</a></h1>
</div>
<div class="nav-header-version">
Version 1.4.0
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-java">Java</option><option class="group" value="group-scala">Scala</option></select>
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="overview.html#architectural-overview" class="active page">Architectural Overview</a>
  <ul>
    <li><a href="overview.html#one-akka-cluster-or-many-connected-clusters-" class="header">One Akka Cluster or many connected clusters?</a></li>
    <li><a href="overview.html#event-replication" class="header">Event Replication</a></li>
    <li><a href="overview.html#dynamic-filters" class="header">Dynamic filters</a></li>
  </ul></li>
  <li><a href="use-cases.html" class="page">Example Use Cases</a></li>
  <li><a href="feature-summary.html" class="page">Feature Summary</a></li>
  <li><a href="guide.html" class="page">Guide</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#architectural-overview" name="architectural-overview" class="anchor"><span class="anchor-link"></span></a>Architectural Overview</h1>
<p>Akka Cluster is great for building stateful distributed systems, such as Microservices. Akka Distributed Cluster is a set of features in Akka that will help you with:</p>
<ul>
  <li>stretching an Akka Cluster over geographically distributed locations for higher availability and lower latency</li>
  <li>brokerless asynchronous communication between different Akka Microservices</li>
</ul>
<h2><a href="#one-akka-cluster-or-many-connected-clusters-" name="one-akka-cluster-or-many-connected-clusters-" class="anchor"><span class="anchor-link"></span></a>One Akka Cluster or many connected clusters?</h2>
<p>When stretching an Akka Cluster over geographically distributed locations it can be difficult or impossible to make it work as one single Akka Cluster. Those locations are typically also different Kubernetes clusters. There can be many problems that must be overcome:</p>
<ul>
  <li>security considerations of opening up for the peer-to-peer communication between nodes that is required for Akka Cluster</li>
  <li>address translation and connectivity of separate Kubernetes clusters</li>
  <li>reliable Akka Cluster bootstrap mechanism across different Kubernetes clusters</li>
  <li>failure detection and stability of an Akka Cluster with mixed low and high latency</li>
</ul>
<p>Instead, each geographical location can be a separate, fully autonomous, Akka Cluster and be connected to the other Akka Clusters with the communication mechanisms provided by Akka Distributed Cluster.</p>
<p><img src="images/connected-clusters.svg" alt="projection-over-grpc.png" /></p>
<p>The communication transport between the Akka Clusters is then using reliable event replication over gRPC, which gives characteristics such as:</p>
<ul>
  <li>security with TLS and mutual authentication (mTLS)</li>
  <li>network friendly across different Kubernetes clusters using ordinary ingress and load balancers</li>
  <li>exactly-once processing or at-least-once processing</li>
  <li>asynchronous and brokerless communication without need of additional products</li>
</ul>
<p>For Microservices there are additional reasons for keeping the services isolated in separate Akka Clusters as described in <a href="https://doc.akka.io/docs/akka/2.8/typed/choosing-cluster.html">Choosing Akka Cluster - Microservices</a>.</p>
<h2><a href="#event-replication" name="event-replication" class="anchor"><span class="anchor-link"></span></a>Event Replication</h2>
<p>Event replication is at the core of Akka Distributed Cluster. The event journal of the Event Sourced Entities is the source of truth and also used as source for publishing events to other services or replicas. By streaming the events from the journal directly to consumers with full backpressure based on demand from the consumer we have a solution for asynchronous communication without requiring an intermediate message broker product.</p>
<p>The sequence numbers of the events and the offset tracking by the consumers via Akka Projections gives at-least once reliable delivery with automatic de-duplication for exactly-once processing.</p>
<p>Entities are assigned to a &ldquo;slice&rdquo; for data partitioning. For parallel processing different consumers can take different ranges of the slices. This consumer slice distribution can be scaled at runtime to be able to adapt to changes in load.</p>
<p>Events are read from the journal when a consumer sets up a new subscription, but when the consumer is up-to-date with the latest events it can consume the &ldquo;live&rdquo; events immediately without the latency from the database round trip. This gives very low end-to-end latency. The journal is still used as the reliable source in case the consumer can&rsquo;t keep up or in failure scenarios.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Currently, the event replication mechanism requires Event Sourced entities as the source on the producer side. Something similar could be implemented for Akka&rsquo;s Durable State entities, but that is currently not supported. </p></div>
<h2><a href="#dynamic-filters" name="dynamic-filters" class="anchor"><span class="anchor-link"></span></a>Dynamic filters</h2>
<p>Events from all entities might not be needed at all locations. Therefore, it is possible to define filters that select which entities to replicate where. These filters are typically defined by tagging the events, but can also select individual entity identifiers.</p>
<p>The filters can be defined on both the producer side and on the consumer side, and they can be changed at runtime. The ability to dynamically change the filters without tearing down the event stream opens up for building very flexible and efficient interactions between services or geographically distributed systems.</p>
<p>When a filter includes events from an entity that the consumer has not seen before, this is automatically detected and the preceding events are replayed and delivered to the consumer so that it can process all events in the right order.</p>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="index.html"><i class="icon-prev"></i> <span class="link-prev">Akka Distributed Cluster</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="use-cases.html">Example Use Cases <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-projection/tree/master/akka-distributed-cluster-docs/src/main/paradox/overview.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka Distributed Cluster is available under the <a href="https://www.lightbend.com/akka/license" target="_blank">Business Source License 1.1</a>.</div>
<p class="legal">
&copy; 2011-2023 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/snippets.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>
<script type="text/javascript" src="js/lbHeader.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- hook for including project specific javascript into the generated docs -->

</body>
</html>
