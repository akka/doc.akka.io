<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Mon Jun 19 14:53:16 CEST 2017 -->
<title>AsyncRecovery</title>
<meta name="date" content="2017-06-19">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncRecovery";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../akka/persistence/journal/japi/AsyncWriteJournal.html" title="class in akka.persistence.journal.japi"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?akka/persistence/journal/japi/AsyncRecovery.html" target="_top">Frames</a></li>
<li><a href="AsyncRecovery.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">akka.persistence.journal.japi</div>
<h2 title="Class AsyncRecovery" class="title">Class AsyncRecovery</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>akka.persistence.journal.japi.AsyncRecovery</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../akka/persistence/journal/AsyncRecovery.html" title="interface in akka.persistence.journal">AsyncRecovery</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../akka/persistence/journal/japi/AsyncWriteJournal.html" title="class in akka.persistence.journal.japi">AsyncWriteJournal</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">AsyncRecovery</span>
extends java.lang.Object
implements <a href="../../../../akka/persistence/journal/AsyncRecovery.html" title="interface in akka.persistence.journal">AsyncRecovery</a></pre>
<div class="block">Java API: asynchronous message replay and sequence number recovery interface.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#AsyncRecovery--">AsyncRecovery</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#asyncReadHighestSequenceNr-java.lang.String-long-">asyncReadHighestSequenceNr</a></span>(java.lang.String&nbsp;persistenceId,
                          long&nbsp;fromSequenceNr)</code>
<div class="block">Plugin API: asynchronously reads the highest stored sequence number for the
 given <code>persistenceId</code>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#asyncReplayMessages-java.lang.String-long-long-long-scala.Function1-">asyncReplayMessages</a></span>(java.lang.String&nbsp;persistenceId,
                   long&nbsp;fromSequenceNr,
                   long&nbsp;toSequenceNr,
                   long&nbsp;max,
                   scala.Function1&lt;<a href="../../../../akka/persistence/PersistentRepr.html" title="interface in akka.persistence">PersistentRepr</a>,scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</code>
<div class="block">Plugin API: asynchronously replays persistent messages.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;java.lang.Long&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#doAsyncReadHighestSequenceNr-java.lang.String-long-">doAsyncReadHighestSequenceNr</a></span>(java.lang.String&nbsp;persistenceId,
                            long&nbsp;fromSequenceNr)</code>
<div class="block">Java API, Plugin API: asynchronously reads the highest stored sequence
 number for the given `persistenceId`.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;java.lang.Void&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#doAsyncReplayMessages-java.lang.String-long-long-long-java.util.function.Consumer-">doAsyncReplayMessages</a></span>(java.lang.String&nbsp;persistenceId,
                     long&nbsp;fromSequenceNr,
                     long&nbsp;toSequenceNr,
                     long&nbsp;max,
                     java.util.function.Consumer&lt;<a href="../../../../akka/persistence/PersistentRepr.html" title="interface in akka.persistence">PersistentRepr</a>&gt;&nbsp;replayCallback)</code>
<div class="block">Java API, Plugin API: asynchronously replays persistent messages.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AsyncRecovery--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AsyncRecovery</h4>
<pre>public&nbsp;AsyncRecovery()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="asyncReplayMessages-java.lang.String-long-long-long-scala.Function1-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReplayMessages</h4>
<pre>public final&nbsp;scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;&nbsp;asyncReplayMessages(java.lang.String&nbsp;persistenceId,
                                                                                  long&nbsp;fromSequenceNr,
                                                                                  long&nbsp;toSequenceNr,
                                                                                  long&nbsp;max,
                                                                                  scala.Function1&lt;<a href="../../../../akka/persistence/PersistentRepr.html" title="interface in akka.persistence">PersistentRepr</a>,scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReplayMessages-java.lang.String-long-long-long-scala.Function1-">AsyncRecovery</a></code></span></div>
<div class="block">Plugin API: asynchronously replays persistent messages. Implementations replay
 a message by calling <code>replayCallback</code>. The returned future must be completed
 when all messages (matching the sequence number bounds) have been replayed.
 The future must be completed with a failure if any of the persistent messages
 could not be replayed.
 <p>
 The <code>replayCallback</code> must also be called with messages that have been marked
 as deleted. In this case a replayed message's <code>deleted</code> method must return
 <code>true</code>.
 <p>
 The <code>toSequenceNr</code> is the lowest of what was returned by <a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReadHighestSequenceNr-java.lang.String-long-"><code>AsyncRecovery.asyncReadHighestSequenceNr(java.lang.String, long)</code></a>
 and what the user specified as recovery <a href="../../../../akka/persistence/Recovery.html" title="class in akka.persistence"><code>Recovery</code></a> parameter.
 This does imply that this call is always preceded by reading the highest sequence
 number for the given <code>persistenceId</code>.
 <p>
 This call is NOT protected with a circuit-breaker because it may take long time
 to replay all events. The plugin implementation itself must protect against
 an unresponsive backend store and make sure that the returned Future is
 completed with success or failure within reasonable time. It is not allowed
 to ignore completing the future.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReplayMessages-java.lang.String-long-long-long-scala.Function1-">asyncReplayMessages</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../akka/persistence/journal/AsyncRecovery.html" title="interface in akka.persistence.journal">AsyncRecovery</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - persistent actor id.</dd>
<dd><code>fromSequenceNr</code> - sequence number where replay should start (inclusive).</dd>
<dd><code>toSequenceNr</code> - sequence number where replay should end (inclusive).</dd>
<dd><code>max</code> - maximum number of messages to be replayed.</dd>
<dd><code>replayCallback</code> - called to replay a single message. Can be called from any
                       thread.
 <p></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(undocumented)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../akka/persistence/journal/AsyncWriteJournal.html" title="interface in akka.persistence.journal"><code>AsyncWriteJournal</code></a></dd>
</dl>
</li>
</ul>
<a name="asyncReadHighestSequenceNr-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReadHighestSequenceNr</h4>
<pre>public final&nbsp;scala.concurrent.Future&lt;java.lang.Object&gt;&nbsp;asyncReadHighestSequenceNr(java.lang.String&nbsp;persistenceId,
                                                                                  long&nbsp;fromSequenceNr)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReadHighestSequenceNr-java.lang.String-long-">AsyncRecovery</a></code></span></div>
<div class="block">Plugin API: asynchronously reads the highest stored sequence number for the
 given <code>persistenceId</code>. The persistent actor will use the highest sequence
 number after recovery as the starting point when persisting new events.
 This sequence number is also used as <code>toSequenceNr</code> in subsequent call
 to <a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReplayMessages-java.lang.String-long-long-long-scala.Function1-"><code>AsyncRecovery.asyncReplayMessages(java.lang.String, long, long, long, scala.Function1&lt;akka.persistence.PersistentRepr, scala.runtime.BoxedUnit&gt;)</code></a> unless the user has specified a lower <code>toSequenceNr</code>.
 Journal must maintain the highest sequence number and never decrease it.
 <p>
 This call is protected with a circuit-breaker.
 <p>
 Please also note that requests for the highest sequence number may be made concurrently
 to writes executing for the same <code>persistenceId</code>, in particular it is possible that
 a restarting actor tries to recover before its outstanding writes have completed.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../akka/persistence/journal/AsyncRecovery.html#asyncReadHighestSequenceNr-java.lang.String-long-">asyncReadHighestSequenceNr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../akka/persistence/journal/AsyncRecovery.html" title="interface in akka.persistence.journal">AsyncRecovery</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - persistent actor id.</dd>
<dd><code>fromSequenceNr</code> - hint where to start searching for the highest sequence
                       number. When a persistent actor is recovering this
                       <code>fromSequenceNr</code> will be the sequence number of the used
                       snapshot or <code>0L</code> if no snapshot is used.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>(undocumented)</dd>
</dl>
</li>
</ul>
<a name="doAsyncReplayMessages-java.lang.String-long-long-long-java.util.function.Consumer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doAsyncReplayMessages</h4>
<pre>public&nbsp;scala.concurrent.Future&lt;java.lang.Void&gt;&nbsp;doAsyncReplayMessages(java.lang.String&nbsp;persistenceId,
                                                                     long&nbsp;fromSequenceNr,
                                                                     long&nbsp;toSequenceNr,
                                                                     long&nbsp;max,
                                                                     java.util.function.Consumer&lt;<a href="../../../../akka/persistence/PersistentRepr.html" title="interface in akka.persistence">PersistentRepr</a>&gt;&nbsp;replayCallback)</pre>
<div class="block">Java API, Plugin API: asynchronously replays persistent messages.
 Implementations replay a message by calling `replayCallback`. The returned
 future must be completed when all messages (matching the sequence number
 bounds) have been replayed. The future must be completed with a failure if
 any of the persistent messages could not be replayed.

 The `replayCallback` must also be called with messages that have been
 marked as deleted. In this case a replayed message's `deleted` method must
 return `true`.

 The `toSequenceNr` is the lowest of what was returned by
 <a href="../../../../akka/persistence/journal/japi/AsyncRecovery.html#doAsyncReadHighestSequenceNr-java.lang.String-long-"><code>doAsyncReadHighestSequenceNr(java.lang.String, long)</code></a> and what the user specified as
 recovery <a href="../../../../akka/persistence/Recovery.html" title="class in akka.persistence"><code>Recovery</code></a> parameter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - id of the persistent actor.</dd>
<dd><code>fromSequenceNr</code> - sequence number where replay should start (inclusive).</dd>
<dd><code>toSequenceNr</code> - sequence number where replay should end (inclusive).</dd>
<dd><code>max</code> - maximum number of messages to be replayed.</dd>
<dd><code>replayCallback</code> - called to replay a single message. Can be called from any thread.</dd>
</dl>
</li>
</ul>
<a name="doAsyncReadHighestSequenceNr-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>doAsyncReadHighestSequenceNr</h4>
<pre>public&nbsp;scala.concurrent.Future&lt;java.lang.Long&gt;&nbsp;doAsyncReadHighestSequenceNr(java.lang.String&nbsp;persistenceId,
                                                                            long&nbsp;fromSequenceNr)</pre>
<div class="block">Java API, Plugin API: asynchronously reads the highest stored sequence
 number for the given `persistenceId`. The persistent actor will use the
 highest sequence number after recovery as the starting point when
 persisting new events. This sequence number is also used as `toSequenceNr`
 in subsequent call to [[#asyncReplayMessages]] unless the user has
 specified a lower `toSequenceNr`.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - id of the persistent actor.</dd>
<dd><code>fromSequenceNr</code> - hint where to start searching for the highest sequence number.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../akka/persistence/journal/japi/AsyncWriteJournal.html" title="class in akka.persistence.journal.japi"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?akka/persistence/journal/japi/AsyncRecovery.html" target="_top">Frames</a></li>
<li><a href="AsyncRecovery.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
